function lP(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var uP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function cP(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var qw={exports:{}},jd={},Kw={exports:{}},Pe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zu=Symbol.for("react.element"),hP=Symbol.for("react.portal"),dP=Symbol.for("react.fragment"),fP=Symbol.for("react.strict_mode"),mP=Symbol.for("react.profiler"),pP=Symbol.for("react.provider"),gP=Symbol.for("react.context"),_P=Symbol.for("react.forward_ref"),yP=Symbol.for("react.suspense"),vP=Symbol.for("react.memo"),wP=Symbol.for("react.lazy"),$y=Symbol.iterator;function xP(t){return t===null||typeof t!="object"?null:(t=$y&&t[$y]||t["@@iterator"],typeof t=="function"?t:null)}var Gw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Zw=Object.assign,Qw={};function Da(t,e,n){this.props=t,this.context=e,this.refs=Qw,this.updater=n||Gw}Da.prototype.isReactComponent={};Da.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Da.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Yw(){}Yw.prototype=Da.prototype;function mg(t,e,n){this.props=t,this.context=e,this.refs=Qw,this.updater=n||Gw}var pg=mg.prototype=new Yw;pg.constructor=mg;Zw(pg,Da.prototype);pg.isPureReactComponent=!0;var qy=Array.isArray,Xw=Object.prototype.hasOwnProperty,gg={current:null},Jw={key:!0,ref:!0,__self:!0,__source:!0};function ex(t,e,n){var r,i={},o=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(o=""+e.key),e)Xw.call(e,r)&&!Jw.hasOwnProperty(r)&&(i[r]=e[r]);var c=arguments.length-2;if(c===1)i.children=n;else if(1<c){for(var d=Array(c),m=0;m<c;m++)d[m]=arguments[m+2];i.children=d}if(t&&t.defaultProps)for(r in c=t.defaultProps,c)i[r]===void 0&&(i[r]=c[r]);return{$$typeof:zu,type:t,key:o,ref:a,props:i,_owner:gg.current}}function EP(t,e){return{$$typeof:zu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function _g(t){return typeof t=="object"&&t!==null&&t.$$typeof===zu}function TP(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Ky=/\/+/g;function Kf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?TP(""+t.key):e.toString(36)}function gh(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case zu:case hP:a=!0}}if(a)return a=t,i=i(a),t=r===""?"."+Kf(a,0):r,qy(i)?(n="",t!=null&&(n=t.replace(Ky,"$&/")+"/"),gh(i,e,n,"",function(m){return m})):i!=null&&(_g(i)&&(i=EP(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(Ky,"$&/")+"/")+t)),e.push(i)),1;if(a=0,r=r===""?".":r+":",qy(t))for(var c=0;c<t.length;c++){o=t[c];var d=r+Kf(o,c);a+=gh(o,e,n,d,i)}else if(d=xP(t),typeof d=="function")for(t=d.call(t),c=0;!(o=t.next()).done;)o=o.value,d=r+Kf(o,c++),a+=gh(o,e,n,d,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function $c(t,e,n){if(t==null)return t;var r=[],i=0;return gh(t,r,"","",function(o){return e.call(n,o,i++)}),r}function kP(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var sn={current:null},_h={transition:null},IP={ReactCurrentDispatcher:sn,ReactCurrentBatchConfig:_h,ReactCurrentOwner:gg};function tx(){throw Error("act(...) is not supported in production builds of React.")}Pe.Children={map:$c,forEach:function(t,e,n){$c(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return $c(t,function(){e++}),e},toArray:function(t){return $c(t,function(e){return e})||[]},only:function(t){if(!_g(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Pe.Component=Da;Pe.Fragment=dP;Pe.Profiler=mP;Pe.PureComponent=mg;Pe.StrictMode=fP;Pe.Suspense=yP;Pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=IP;Pe.act=tx;Pe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Zw({},t.props),i=t.key,o=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,a=gg.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(d in e)Xw.call(e,d)&&!Jw.hasOwnProperty(d)&&(r[d]=e[d]===void 0&&c!==void 0?c[d]:e[d])}var d=arguments.length-2;if(d===1)r.children=n;else if(1<d){c=Array(d);for(var m=0;m<d;m++)c[m]=arguments[m+2];r.children=c}return{$$typeof:zu,type:t.type,key:i,ref:o,props:r,_owner:a}};Pe.createContext=function(t){return t={$$typeof:gP,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:pP,_context:t},t.Consumer=t};Pe.createElement=ex;Pe.createFactory=function(t){var e=ex.bind(null,t);return e.type=t,e};Pe.createRef=function(){return{current:null}};Pe.forwardRef=function(t){return{$$typeof:_P,render:t}};Pe.isValidElement=_g;Pe.lazy=function(t){return{$$typeof:wP,_payload:{_status:-1,_result:t},_init:kP}};Pe.memo=function(t,e){return{$$typeof:vP,type:t,compare:e===void 0?null:e}};Pe.startTransition=function(t){var e=_h.transition;_h.transition={};try{t()}finally{_h.transition=e}};Pe.unstable_act=tx;Pe.useCallback=function(t,e){return sn.current.useCallback(t,e)};Pe.useContext=function(t){return sn.current.useContext(t)};Pe.useDebugValue=function(){};Pe.useDeferredValue=function(t){return sn.current.useDeferredValue(t)};Pe.useEffect=function(t,e){return sn.current.useEffect(t,e)};Pe.useId=function(){return sn.current.useId()};Pe.useImperativeHandle=function(t,e,n){return sn.current.useImperativeHandle(t,e,n)};Pe.useInsertionEffect=function(t,e){return sn.current.useInsertionEffect(t,e)};Pe.useLayoutEffect=function(t,e){return sn.current.useLayoutEffect(t,e)};Pe.useMemo=function(t,e){return sn.current.useMemo(t,e)};Pe.useReducer=function(t,e,n){return sn.current.useReducer(t,e,n)};Pe.useRef=function(t){return sn.current.useRef(t)};Pe.useState=function(t){return sn.current.useState(t)};Pe.useSyncExternalStore=function(t,e,n){return sn.current.useSyncExternalStore(t,e,n)};Pe.useTransition=function(){return sn.current.useTransition()};Pe.version="18.3.1";Kw.exports=Pe;var O=Kw.exports;const Vh=cP(O),PP=lP({__proto__:null,default:Vh},[O]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SP=O,bP=Symbol.for("react.element"),AP=Symbol.for("react.fragment"),CP=Object.prototype.hasOwnProperty,NP=SP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,RP={key:!0,ref:!0,__self:!0,__source:!0};function nx(t,e,n){var r,i={},o=null,a=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)CP.call(e,r)&&!RP.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:bP,type:t,key:o,ref:a,props:i,_owner:NP.current}}jd.Fragment=AP;jd.jsx=nx;jd.jsxs=nx;qw.exports=jd;var f=qw.exports,rx={exports:{}},Sn={},ix={exports:{}},sx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(G,ue){var J=G.length;G.push(ue);e:for(;0<J;){var he=J-1>>>1,we=G[he];if(0<i(we,ue))G[he]=ue,G[J]=we,J=he;else break e}}function n(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var ue=G[0],J=G.pop();if(J!==ue){G[0]=J;e:for(var he=0,we=G.length,Se=we>>>1;he<Se;){var De=2*(he+1)-1,Te=G[De],pe=De+1,wt=G[pe];if(0>i(Te,J))pe<we&&0>i(wt,Te)?(G[he]=wt,G[pe]=J,he=pe):(G[he]=Te,G[De]=J,he=De);else if(pe<we&&0>i(wt,J))G[he]=wt,G[pe]=J,he=pe;else break e}}return ue}function i(G,ue){var J=G.sortIndex-ue.sortIndex;return J!==0?J:G.id-ue.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,c=a.now();t.unstable_now=function(){return a.now()-c}}var d=[],m=[],_=1,v=null,x=3,S=!1,C=!1,R=!1,F=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function P(G){for(var ue=n(m);ue!==null;){if(ue.callback===null)r(m);else if(ue.startTime<=G)r(m),ue.sortIndex=ue.expirationTime,e(d,ue);else break;ue=n(m)}}function z(G){if(R=!1,P(G),!C)if(n(d)!==null)C=!0,vt(K);else{var ue=n(m);ue!==null&&Xt(z,ue.startTime-G)}}function K(G,ue){C=!1,R&&(R=!1,b(k),k=-1),S=!0;var J=x;try{for(P(ue),v=n(d);v!==null&&(!(v.expirationTime>ue)||G&&!U());){var he=v.callback;if(typeof he=="function"){v.callback=null,x=v.priorityLevel;var we=he(v.expirationTime<=ue);ue=t.unstable_now(),typeof we=="function"?v.callback=we:v===n(d)&&r(d),P(ue)}else r(d);v=n(d)}if(v!==null)var Se=!0;else{var De=n(m);De!==null&&Xt(z,De.startTime-ue),Se=!1}return Se}finally{v=null,x=J,S=!1}}var $=!1,A=null,k=-1,N=5,j=-1;function U(){return!(t.unstable_now()-j<N)}function M(){if(A!==null){var G=t.unstable_now();j=G;var ue=!0;try{ue=A(!0,G)}finally{ue?D():($=!1,A=null)}}else $=!1}var D;if(typeof T=="function")D=function(){T(M)};else if(typeof MessageChannel<"u"){var me=new MessageChannel,kt=me.port2;me.port1.onmessage=M,D=function(){kt.postMessage(null)}}else D=function(){F(M,0)};function vt(G){A=G,$||($=!0,D())}function Xt(G,ue){k=F(function(){G(t.unstable_now())},ue)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_continueExecution=function(){C||S||(C=!0,vt(K))},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_getFirstCallbackNode=function(){return n(d)},t.unstable_next=function(G){switch(x){case 1:case 2:case 3:var ue=3;break;default:ue=x}var J=x;x=ue;try{return G()}finally{x=J}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(G,ue){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var J=x;x=G;try{return ue()}finally{x=J}},t.unstable_scheduleCallback=function(G,ue,J){var he=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?he+J:he):J=he,G){case 1:var we=-1;break;case 2:we=250;break;case 5:we=1073741823;break;case 4:we=1e4;break;default:we=5e3}return we=J+we,G={id:_++,callback:ue,priorityLevel:G,startTime:J,expirationTime:we,sortIndex:-1},J>he?(G.sortIndex=J,e(m,G),n(d)===null&&G===n(m)&&(R?(b(k),k=-1):R=!0,Xt(z,J-he))):(G.sortIndex=we,e(d,G),C||S||(C=!0,vt(K))),G},t.unstable_shouldYield=U,t.unstable_wrapCallback=function(G){var ue=x;return function(){var J=x;x=ue;try{return G.apply(this,arguments)}finally{x=J}}}})(sx);ix.exports=sx;var LP=ix.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MP=O,In=LP;function X(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ox=new Set,cu={};function Ys(t,e){ya(t,e),ya(t+"Capture",e)}function ya(t,e){for(cu[t]=e,t=0;t<e.length;t++)ox.add(e[t])}var Xr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),jm=Object.prototype.hasOwnProperty,OP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Gy={},Zy={};function DP(t){return jm.call(Zy,t)?!0:jm.call(Gy,t)?!1:OP.test(t)?Zy[t]=!0:(Gy[t]=!0,!1)}function jP(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function VP(t,e,n,r){if(e===null||typeof e>"u"||jP(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function on(t,e,n,r,i,o,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var zt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){zt[t]=new on(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];zt[e]=new on(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){zt[t]=new on(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){zt[t]=new on(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){zt[t]=new on(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){zt[t]=new on(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){zt[t]=new on(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){zt[t]=new on(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){zt[t]=new on(t,5,!1,t.toLowerCase(),null,!1,!1)});var yg=/[\-:]([a-z])/g;function vg(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(yg,vg);zt[e]=new on(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(yg,vg);zt[e]=new on(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(yg,vg);zt[e]=new on(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){zt[t]=new on(t,1,!1,t.toLowerCase(),null,!1,!1)});zt.xlinkHref=new on("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){zt[t]=new on(t,1,!1,t.toLowerCase(),null,!0,!0)});function wg(t,e,n,r){var i=zt.hasOwnProperty(e)?zt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(VP(e,n,i,r)&&(n=null),r||i===null?DP(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var li=MP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,qc=Symbol.for("react.element"),Ko=Symbol.for("react.portal"),Go=Symbol.for("react.fragment"),xg=Symbol.for("react.strict_mode"),Vm=Symbol.for("react.profiler"),ax=Symbol.for("react.provider"),lx=Symbol.for("react.context"),Eg=Symbol.for("react.forward_ref"),Fm=Symbol.for("react.suspense"),Um=Symbol.for("react.suspense_list"),Tg=Symbol.for("react.memo"),Ii=Symbol.for("react.lazy"),ux=Symbol.for("react.offscreen"),Qy=Symbol.iterator;function Sl(t){return t===null||typeof t!="object"?null:(t=Qy&&t[Qy]||t["@@iterator"],typeof t=="function"?t:null)}var it=Object.assign,Gf;function Vl(t){if(Gf===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Gf=e&&e[1]||""}return`
`+Gf+t}var Zf=!1;function Qf(t,e){if(!t||Zf)return"";Zf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(m){var r=m}Reflect.construct(t,[],e)}else{try{e.call()}catch(m){r=m}t.call(e.prototype)}else{try{throw Error()}catch(m){r=m}t()}}catch(m){if(m&&r&&typeof m.stack=="string"){for(var i=m.stack.split(`
`),o=r.stack.split(`
`),a=i.length-1,c=o.length-1;1<=a&&0<=c&&i[a]!==o[c];)c--;for(;1<=a&&0<=c;a--,c--)if(i[a]!==o[c]){if(a!==1||c!==1)do if(a--,c--,0>c||i[a]!==o[c]){var d=`
`+i[a].replace(" at new "," at ");return t.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",t.displayName)),d}while(1<=a&&0<=c);break}}}finally{Zf=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Vl(t):""}function FP(t){switch(t.tag){case 5:return Vl(t.type);case 16:return Vl("Lazy");case 13:return Vl("Suspense");case 19:return Vl("SuspenseList");case 0:case 2:case 15:return t=Qf(t.type,!1),t;case 11:return t=Qf(t.type.render,!1),t;case 1:return t=Qf(t.type,!0),t;default:return""}}function zm(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Go:return"Fragment";case Ko:return"Portal";case Vm:return"Profiler";case xg:return"StrictMode";case Fm:return"Suspense";case Um:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case lx:return(t.displayName||"Context")+".Consumer";case ax:return(t._context.displayName||"Context")+".Provider";case Eg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Tg:return e=t.displayName||null,e!==null?e:zm(t.type)||"Memo";case Ii:e=t._payload,t=t._init;try{return zm(t(e))}catch{}}return null}function UP(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return zm(e);case 8:return e===xg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Xi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function cx(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function zP(t){var e=cx(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,o.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Kc(t){t._valueTracker||(t._valueTracker=zP(t))}function hx(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=cx(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Fh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Bm(t,e){var n=e.checked;return it({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Yy(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Xi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function dx(t,e){e=e.checked,e!=null&&wg(t,"checked",e,!1)}function Wm(t,e){dx(t,e);var n=Xi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Hm(t,e.type,n):e.hasOwnProperty("defaultValue")&&Hm(t,e.type,Xi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Xy(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Hm(t,e,n){(e!=="number"||Fh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Fl=Array.isArray;function oa(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Xi(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function $m(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(X(91));return it({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Jy(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(X(92));if(Fl(n)){if(1<n.length)throw Error(X(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Xi(n)}}function fx(t,e){var n=Xi(e.value),r=Xi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function ev(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function mx(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function qm(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?mx(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Gc,px=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Gc=Gc||document.createElement("div"),Gc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Gc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function hu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Gl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},BP=["Webkit","ms","Moz","O"];Object.keys(Gl).forEach(function(t){BP.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Gl[e]=Gl[t]})});function gx(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Gl.hasOwnProperty(t)&&Gl[t]?(""+e).trim():e+"px"}function _x(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=gx(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var WP=it({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Km(t,e){if(e){if(WP[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(X(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(X(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(X(61))}if(e.style!=null&&typeof e.style!="object")throw Error(X(62))}}function Gm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zm=null;function kg(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Qm=null,aa=null,la=null;function tv(t){if(t=Hu(t)){if(typeof Qm!="function")throw Error(X(280));var e=t.stateNode;e&&(e=Bd(e),Qm(t.stateNode,t.type,e))}}function yx(t){aa?la?la.push(t):la=[t]:aa=t}function vx(){if(aa){var t=aa,e=la;if(la=aa=null,tv(t),e)for(t=0;t<e.length;t++)tv(e[t])}}function wx(t,e){return t(e)}function xx(){}var Yf=!1;function Ex(t,e,n){if(Yf)return t(e,n);Yf=!0;try{return wx(t,e,n)}finally{Yf=!1,(aa!==null||la!==null)&&(xx(),vx())}}function du(t,e){var n=t.stateNode;if(n===null)return null;var r=Bd(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(X(231,e,typeof n));return n}var Ym=!1;if(Xr)try{var bl={};Object.defineProperty(bl,"passive",{get:function(){Ym=!0}}),window.addEventListener("test",bl,bl),window.removeEventListener("test",bl,bl)}catch{Ym=!1}function HP(t,e,n,r,i,o,a,c,d){var m=Array.prototype.slice.call(arguments,3);try{e.apply(n,m)}catch(_){this.onError(_)}}var Zl=!1,Uh=null,zh=!1,Xm=null,$P={onError:function(t){Zl=!0,Uh=t}};function qP(t,e,n,r,i,o,a,c,d){Zl=!1,Uh=null,HP.apply($P,arguments)}function KP(t,e,n,r,i,o,a,c,d){if(qP.apply(this,arguments),Zl){if(Zl){var m=Uh;Zl=!1,Uh=null}else throw Error(X(198));zh||(zh=!0,Xm=m)}}function Xs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Tx(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function nv(t){if(Xs(t)!==t)throw Error(X(188))}function GP(t){var e=t.alternate;if(!e){if(e=Xs(t),e===null)throw Error(X(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return nv(i),t;if(o===r)return nv(i),e;o=o.sibling}throw Error(X(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,c=i.child;c;){if(c===n){a=!0,n=i,r=o;break}if(c===r){a=!0,r=i,n=o;break}c=c.sibling}if(!a){for(c=o.child;c;){if(c===n){a=!0,n=o,r=i;break}if(c===r){a=!0,r=o,n=i;break}c=c.sibling}if(!a)throw Error(X(189))}}if(n.alternate!==r)throw Error(X(190))}if(n.tag!==3)throw Error(X(188));return n.stateNode.current===n?t:e}function kx(t){return t=GP(t),t!==null?Ix(t):null}function Ix(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Ix(t);if(e!==null)return e;t=t.sibling}return null}var Px=In.unstable_scheduleCallback,rv=In.unstable_cancelCallback,ZP=In.unstable_shouldYield,QP=In.unstable_requestPaint,dt=In.unstable_now,YP=In.unstable_getCurrentPriorityLevel,Ig=In.unstable_ImmediatePriority,Sx=In.unstable_UserBlockingPriority,Bh=In.unstable_NormalPriority,XP=In.unstable_LowPriority,bx=In.unstable_IdlePriority,Vd=null,wr=null;function JP(t){if(wr&&typeof wr.onCommitFiberRoot=="function")try{wr.onCommitFiberRoot(Vd,t,void 0,(t.current.flags&128)===128)}catch{}}var er=Math.clz32?Math.clz32:nS,eS=Math.log,tS=Math.LN2;function nS(t){return t>>>=0,t===0?32:31-(eS(t)/tS|0)|0}var Zc=64,Qc=4194304;function Ul(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Wh(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,a=n&268435455;if(a!==0){var c=a&~i;c!==0?r=Ul(c):(o&=a,o!==0&&(r=Ul(o)))}else a=n&~i,a!==0?r=Ul(a):o!==0&&(r=Ul(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-er(e),i=1<<n,r|=t[n],e&=~i;return r}function rS(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function iS(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-er(o),c=1<<a,d=i[a];d===-1?(!(c&n)||c&r)&&(i[a]=rS(c,e)):d<=e&&(t.expiredLanes|=c),o&=~c}}function Jm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Ax(){var t=Zc;return Zc<<=1,!(Zc&4194240)&&(Zc=64),t}function Xf(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Bu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-er(e),t[e]=n}function sS(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-er(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function Pg(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-er(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Fe=0;function Cx(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Nx,Sg,Rx,Lx,Mx,ep=!1,Yc=[],Fi=null,Ui=null,zi=null,fu=new Map,mu=new Map,bi=[],oS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function iv(t,e){switch(t){case"focusin":case"focusout":Fi=null;break;case"dragenter":case"dragleave":Ui=null;break;case"mouseover":case"mouseout":zi=null;break;case"pointerover":case"pointerout":fu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":mu.delete(e.pointerId)}}function Al(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=Hu(e),e!==null&&Sg(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function aS(t,e,n,r,i){switch(e){case"focusin":return Fi=Al(Fi,t,e,n,r,i),!0;case"dragenter":return Ui=Al(Ui,t,e,n,r,i),!0;case"mouseover":return zi=Al(zi,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return fu.set(o,Al(fu.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,mu.set(o,Al(mu.get(o)||null,t,e,n,r,i)),!0}return!1}function Ox(t){var e=Cs(t.target);if(e!==null){var n=Xs(e);if(n!==null){if(e=n.tag,e===13){if(e=Tx(n),e!==null){t.blockedOn=e,Mx(t.priority,function(){Rx(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function yh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=tp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Zm=r,n.target.dispatchEvent(r),Zm=null}else return e=Hu(n),e!==null&&Sg(e),t.blockedOn=n,!1;e.shift()}return!0}function sv(t,e,n){yh(t)&&n.delete(e)}function lS(){ep=!1,Fi!==null&&yh(Fi)&&(Fi=null),Ui!==null&&yh(Ui)&&(Ui=null),zi!==null&&yh(zi)&&(zi=null),fu.forEach(sv),mu.forEach(sv)}function Cl(t,e){t.blockedOn===e&&(t.blockedOn=null,ep||(ep=!0,In.unstable_scheduleCallback(In.unstable_NormalPriority,lS)))}function pu(t){function e(i){return Cl(i,t)}if(0<Yc.length){Cl(Yc[0],t);for(var n=1;n<Yc.length;n++){var r=Yc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Fi!==null&&Cl(Fi,t),Ui!==null&&Cl(Ui,t),zi!==null&&Cl(zi,t),fu.forEach(e),mu.forEach(e),n=0;n<bi.length;n++)r=bi[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<bi.length&&(n=bi[0],n.blockedOn===null);)Ox(n),n.blockedOn===null&&bi.shift()}var ua=li.ReactCurrentBatchConfig,Hh=!0;function uS(t,e,n,r){var i=Fe,o=ua.transition;ua.transition=null;try{Fe=1,bg(t,e,n,r)}finally{Fe=i,ua.transition=o}}function cS(t,e,n,r){var i=Fe,o=ua.transition;ua.transition=null;try{Fe=4,bg(t,e,n,r)}finally{Fe=i,ua.transition=o}}function bg(t,e,n,r){if(Hh){var i=tp(t,e,n,r);if(i===null)lm(t,e,r,$h,n),iv(t,r);else if(aS(i,t,e,n,r))r.stopPropagation();else if(iv(t,r),e&4&&-1<oS.indexOf(t)){for(;i!==null;){var o=Hu(i);if(o!==null&&Nx(o),o=tp(t,e,n,r),o===null&&lm(t,e,r,$h,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else lm(t,e,r,null,n)}}var $h=null;function tp(t,e,n,r){if($h=null,t=kg(r),t=Cs(t),t!==null)if(e=Xs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Tx(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return $h=t,null}function Dx(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(YP()){case Ig:return 1;case Sx:return 4;case Bh:case XP:return 16;case bx:return 536870912;default:return 16}default:return 16}}var Oi=null,Ag=null,vh=null;function jx(){if(vh)return vh;var t,e=Ag,n=e.length,r,i="value"in Oi?Oi.value:Oi.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===i[o-r];r++);return vh=i.slice(t,1<r?1-r:void 0)}function wh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Xc(){return!0}function ov(){return!1}function bn(t){function e(n,r,i,o,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(o):o[c]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Xc:ov,this.isPropagationStopped=ov,this}return it(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Xc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Xc)},persist:function(){},isPersistent:Xc}),e}var ja={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Cg=bn(ja),Wu=it({},ja,{view:0,detail:0}),hS=bn(Wu),Jf,em,Nl,Fd=it({},Wu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ng,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Nl&&(Nl&&t.type==="mousemove"?(Jf=t.screenX-Nl.screenX,em=t.screenY-Nl.screenY):em=Jf=0,Nl=t),Jf)},movementY:function(t){return"movementY"in t?t.movementY:em}}),av=bn(Fd),dS=it({},Fd,{dataTransfer:0}),fS=bn(dS),mS=it({},Wu,{relatedTarget:0}),tm=bn(mS),pS=it({},ja,{animationName:0,elapsedTime:0,pseudoElement:0}),gS=bn(pS),_S=it({},ja,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),yS=bn(_S),vS=it({},ja,{data:0}),lv=bn(vS),wS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ES={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function TS(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=ES[t])?!!e[t]:!1}function Ng(){return TS}var kS=it({},Wu,{key:function(t){if(t.key){var e=wS[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=wh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?xS[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ng,charCode:function(t){return t.type==="keypress"?wh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?wh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),IS=bn(kS),PS=it({},Fd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),uv=bn(PS),SS=it({},Wu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ng}),bS=bn(SS),AS=it({},ja,{propertyName:0,elapsedTime:0,pseudoElement:0}),CS=bn(AS),NS=it({},Fd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),RS=bn(NS),LS=[9,13,27,32],Rg=Xr&&"CompositionEvent"in window,Ql=null;Xr&&"documentMode"in document&&(Ql=document.documentMode);var MS=Xr&&"TextEvent"in window&&!Ql,Vx=Xr&&(!Rg||Ql&&8<Ql&&11>=Ql),cv=" ",hv=!1;function Fx(t,e){switch(t){case"keyup":return LS.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ux(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Zo=!1;function OS(t,e){switch(t){case"compositionend":return Ux(e);case"keypress":return e.which!==32?null:(hv=!0,cv);case"textInput":return t=e.data,t===cv&&hv?null:t;default:return null}}function DS(t,e){if(Zo)return t==="compositionend"||!Rg&&Fx(t,e)?(t=jx(),vh=Ag=Oi=null,Zo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Vx&&e.locale!=="ko"?null:e.data;default:return null}}var jS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!jS[t.type]:e==="textarea"}function zx(t,e,n,r){yx(r),e=qh(e,"onChange"),0<e.length&&(n=new Cg("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Yl=null,gu=null;function VS(t){Xx(t,0)}function Ud(t){var e=Xo(t);if(hx(e))return t}function FS(t,e){if(t==="change")return e}var Bx=!1;if(Xr){var nm;if(Xr){var rm="oninput"in document;if(!rm){var fv=document.createElement("div");fv.setAttribute("oninput","return;"),rm=typeof fv.oninput=="function"}nm=rm}else nm=!1;Bx=nm&&(!document.documentMode||9<document.documentMode)}function mv(){Yl&&(Yl.detachEvent("onpropertychange",Wx),gu=Yl=null)}function Wx(t){if(t.propertyName==="value"&&Ud(gu)){var e=[];zx(e,gu,t,kg(t)),Ex(VS,e)}}function US(t,e,n){t==="focusin"?(mv(),Yl=e,gu=n,Yl.attachEvent("onpropertychange",Wx)):t==="focusout"&&mv()}function zS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ud(gu)}function BS(t,e){if(t==="click")return Ud(e)}function WS(t,e){if(t==="input"||t==="change")return Ud(e)}function HS(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var rr=typeof Object.is=="function"?Object.is:HS;function _u(t,e){if(rr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!jm.call(e,i)||!rr(t[i],e[i]))return!1}return!0}function pv(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function gv(t,e){var n=pv(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=pv(n)}}function Hx(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Hx(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function $x(){for(var t=window,e=Fh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Fh(t.document)}return e}function Lg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function $S(t){var e=$x(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Hx(n.ownerDocument.documentElement,n)){if(r!==null&&Lg(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=gv(n,o);var a=gv(n,r);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var qS=Xr&&"documentMode"in document&&11>=document.documentMode,Qo=null,np=null,Xl=null,rp=!1;function _v(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;rp||Qo==null||Qo!==Fh(r)||(r=Qo,"selectionStart"in r&&Lg(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Xl&&_u(Xl,r)||(Xl=r,r=qh(np,"onSelect"),0<r.length&&(e=new Cg("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Qo)))}function Jc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Yo={animationend:Jc("Animation","AnimationEnd"),animationiteration:Jc("Animation","AnimationIteration"),animationstart:Jc("Animation","AnimationStart"),transitionend:Jc("Transition","TransitionEnd")},im={},qx={};Xr&&(qx=document.createElement("div").style,"AnimationEvent"in window||(delete Yo.animationend.animation,delete Yo.animationiteration.animation,delete Yo.animationstart.animation),"TransitionEvent"in window||delete Yo.transitionend.transition);function zd(t){if(im[t])return im[t];if(!Yo[t])return t;var e=Yo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in qx)return im[t]=e[n];return t}var Kx=zd("animationend"),Gx=zd("animationiteration"),Zx=zd("animationstart"),Qx=zd("transitionend"),Yx=new Map,yv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ss(t,e){Yx.set(t,e),Ys(e,[t])}for(var sm=0;sm<yv.length;sm++){var om=yv[sm],KS=om.toLowerCase(),GS=om[0].toUpperCase()+om.slice(1);ss(KS,"on"+GS)}ss(Kx,"onAnimationEnd");ss(Gx,"onAnimationIteration");ss(Zx,"onAnimationStart");ss("dblclick","onDoubleClick");ss("focusin","onFocus");ss("focusout","onBlur");ss(Qx,"onTransitionEnd");ya("onMouseEnter",["mouseout","mouseover"]);ya("onMouseLeave",["mouseout","mouseover"]);ya("onPointerEnter",["pointerout","pointerover"]);ya("onPointerLeave",["pointerout","pointerover"]);Ys("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ys("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ys("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ys("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ys("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ys("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ZS=new Set("cancel close invalid load scroll toggle".split(" ").concat(zl));function vv(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,KP(r,e,void 0,t),t.currentTarget=null}function Xx(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var a=r.length-1;0<=a;a--){var c=r[a],d=c.instance,m=c.currentTarget;if(c=c.listener,d!==o&&i.isPropagationStopped())break e;vv(i,c,m),o=d}else for(a=0;a<r.length;a++){if(c=r[a],d=c.instance,m=c.currentTarget,c=c.listener,d!==o&&i.isPropagationStopped())break e;vv(i,c,m),o=d}}}if(zh)throw t=Xm,zh=!1,Xm=null,t}function qe(t,e){var n=e[lp];n===void 0&&(n=e[lp]=new Set);var r=t+"__bubble";n.has(r)||(Jx(e,t,2,!1),n.add(r))}function am(t,e,n){var r=0;e&&(r|=4),Jx(n,t,r,e)}var eh="_reactListening"+Math.random().toString(36).slice(2);function yu(t){if(!t[eh]){t[eh]=!0,ox.forEach(function(n){n!=="selectionchange"&&(ZS.has(n)||am(n,!1,t),am(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[eh]||(e[eh]=!0,am("selectionchange",!1,e))}}function Jx(t,e,n,r){switch(Dx(e)){case 1:var i=uS;break;case 4:i=cS;break;default:i=bg}n=i.bind(null,e,n,t),i=void 0,!Ym||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function lm(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var c=r.stateNode.containerInfo;if(c===i||c.nodeType===8&&c.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var d=a.tag;if((d===3||d===4)&&(d=a.stateNode.containerInfo,d===i||d.nodeType===8&&d.parentNode===i))return;a=a.return}for(;c!==null;){if(a=Cs(c),a===null)return;if(d=a.tag,d===5||d===6){r=o=a;continue e}c=c.parentNode}}r=r.return}Ex(function(){var m=o,_=kg(n),v=[];e:{var x=Yx.get(t);if(x!==void 0){var S=Cg,C=t;switch(t){case"keypress":if(wh(n)===0)break e;case"keydown":case"keyup":S=IS;break;case"focusin":C="focus",S=tm;break;case"focusout":C="blur",S=tm;break;case"beforeblur":case"afterblur":S=tm;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":S=av;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":S=fS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":S=bS;break;case Kx:case Gx:case Zx:S=gS;break;case Qx:S=CS;break;case"scroll":S=hS;break;case"wheel":S=RS;break;case"copy":case"cut":case"paste":S=yS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":S=uv}var R=(e&4)!==0,F=!R&&t==="scroll",b=R?x!==null?x+"Capture":null:x;R=[];for(var T=m,P;T!==null;){P=T;var z=P.stateNode;if(P.tag===5&&z!==null&&(P=z,b!==null&&(z=du(T,b),z!=null&&R.push(vu(T,z,P)))),F)break;T=T.return}0<R.length&&(x=new S(x,C,null,n,_),v.push({event:x,listeners:R}))}}if(!(e&7)){e:{if(x=t==="mouseover"||t==="pointerover",S=t==="mouseout"||t==="pointerout",x&&n!==Zm&&(C=n.relatedTarget||n.fromElement)&&(Cs(C)||C[Jr]))break e;if((S||x)&&(x=_.window===_?_:(x=_.ownerDocument)?x.defaultView||x.parentWindow:window,S?(C=n.relatedTarget||n.toElement,S=m,C=C?Cs(C):null,C!==null&&(F=Xs(C),C!==F||C.tag!==5&&C.tag!==6)&&(C=null)):(S=null,C=m),S!==C)){if(R=av,z="onMouseLeave",b="onMouseEnter",T="mouse",(t==="pointerout"||t==="pointerover")&&(R=uv,z="onPointerLeave",b="onPointerEnter",T="pointer"),F=S==null?x:Xo(S),P=C==null?x:Xo(C),x=new R(z,T+"leave",S,n,_),x.target=F,x.relatedTarget=P,z=null,Cs(_)===m&&(R=new R(b,T+"enter",C,n,_),R.target=P,R.relatedTarget=F,z=R),F=z,S&&C)t:{for(R=S,b=C,T=0,P=R;P;P=Uo(P))T++;for(P=0,z=b;z;z=Uo(z))P++;for(;0<T-P;)R=Uo(R),T--;for(;0<P-T;)b=Uo(b),P--;for(;T--;){if(R===b||b!==null&&R===b.alternate)break t;R=Uo(R),b=Uo(b)}R=null}else R=null;S!==null&&wv(v,x,S,R,!1),C!==null&&F!==null&&wv(v,F,C,R,!0)}}e:{if(x=m?Xo(m):window,S=x.nodeName&&x.nodeName.toLowerCase(),S==="select"||S==="input"&&x.type==="file")var K=FS;else if(dv(x))if(Bx)K=WS;else{K=zS;var $=US}else(S=x.nodeName)&&S.toLowerCase()==="input"&&(x.type==="checkbox"||x.type==="radio")&&(K=BS);if(K&&(K=K(t,m))){zx(v,K,n,_);break e}$&&$(t,x,m),t==="focusout"&&($=x._wrapperState)&&$.controlled&&x.type==="number"&&Hm(x,"number",x.value)}switch($=m?Xo(m):window,t){case"focusin":(dv($)||$.contentEditable==="true")&&(Qo=$,np=m,Xl=null);break;case"focusout":Xl=np=Qo=null;break;case"mousedown":rp=!0;break;case"contextmenu":case"mouseup":case"dragend":rp=!1,_v(v,n,_);break;case"selectionchange":if(qS)break;case"keydown":case"keyup":_v(v,n,_)}var A;if(Rg)e:{switch(t){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Zo?Fx(t,n)&&(k="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(k="onCompositionStart");k&&(Vx&&n.locale!=="ko"&&(Zo||k!=="onCompositionStart"?k==="onCompositionEnd"&&Zo&&(A=jx()):(Oi=_,Ag="value"in Oi?Oi.value:Oi.textContent,Zo=!0)),$=qh(m,k),0<$.length&&(k=new lv(k,t,null,n,_),v.push({event:k,listeners:$}),A?k.data=A:(A=Ux(n),A!==null&&(k.data=A)))),(A=MS?OS(t,n):DS(t,n))&&(m=qh(m,"onBeforeInput"),0<m.length&&(_=new lv("onBeforeInput","beforeinput",null,n,_),v.push({event:_,listeners:m}),_.data=A))}Xx(v,e)})}function vu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function qh(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=du(t,n),o!=null&&r.unshift(vu(t,o,i)),o=du(t,e),o!=null&&r.push(vu(t,o,i))),t=t.return}return r}function Uo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function wv(t,e,n,r,i){for(var o=e._reactName,a=[];n!==null&&n!==r;){var c=n,d=c.alternate,m=c.stateNode;if(d!==null&&d===r)break;c.tag===5&&m!==null&&(c=m,i?(d=du(n,o),d!=null&&a.unshift(vu(n,d,c))):i||(d=du(n,o),d!=null&&a.push(vu(n,d,c)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var QS=/\r\n?/g,YS=/\u0000|\uFFFD/g;function xv(t){return(typeof t=="string"?t:""+t).replace(QS,`
`).replace(YS,"")}function th(t,e,n){if(e=xv(e),xv(t)!==e&&n)throw Error(X(425))}function Kh(){}var ip=null,sp=null;function op(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ap=typeof setTimeout=="function"?setTimeout:void 0,XS=typeof clearTimeout=="function"?clearTimeout:void 0,Ev=typeof Promise=="function"?Promise:void 0,JS=typeof queueMicrotask=="function"?queueMicrotask:typeof Ev<"u"?function(t){return Ev.resolve(null).then(t).catch(eb)}:ap;function eb(t){setTimeout(function(){throw t})}function um(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),pu(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);pu(e)}function Bi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Tv(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Va=Math.random().toString(36).slice(2),pr="__reactFiber$"+Va,wu="__reactProps$"+Va,Jr="__reactContainer$"+Va,lp="__reactEvents$"+Va,tb="__reactListeners$"+Va,nb="__reactHandles$"+Va;function Cs(t){var e=t[pr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Jr]||n[pr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Tv(t);t!==null;){if(n=t[pr])return n;t=Tv(t)}return e}t=n,n=t.parentNode}return null}function Hu(t){return t=t[pr]||t[Jr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Xo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(X(33))}function Bd(t){return t[wu]||null}var up=[],Jo=-1;function os(t){return{current:t}}function Ze(t){0>Jo||(t.current=up[Jo],up[Jo]=null,Jo--)}function $e(t,e){Jo++,up[Jo]=t.current,t.current=e}var Ji={},Qt=os(Ji),dn=os(!1),Fs=Ji;function va(t,e){var n=t.type.contextTypes;if(!n)return Ji;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function fn(t){return t=t.childContextTypes,t!=null}function Gh(){Ze(dn),Ze(Qt)}function kv(t,e,n){if(Qt.current!==Ji)throw Error(X(168));$e(Qt,e),$e(dn,n)}function eE(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(X(108,UP(t)||"Unknown",i));return it({},n,r)}function Zh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ji,Fs=Qt.current,$e(Qt,t),$e(dn,dn.current),!0}function Iv(t,e,n){var r=t.stateNode;if(!r)throw Error(X(169));n?(t=eE(t,e,Fs),r.__reactInternalMemoizedMergedChildContext=t,Ze(dn),Ze(Qt),$e(Qt,t)):Ze(dn),$e(dn,n)}var Br=null,Wd=!1,cm=!1;function tE(t){Br===null?Br=[t]:Br.push(t)}function rb(t){Wd=!0,tE(t)}function as(){if(!cm&&Br!==null){cm=!0;var t=0,e=Fe;try{var n=Br;for(Fe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Br=null,Wd=!1}catch(i){throw Br!==null&&(Br=Br.slice(t+1)),Px(Ig,as),i}finally{Fe=e,cm=!1}}return null}var ea=[],ta=0,Qh=null,Yh=0,jn=[],Vn=0,Us=null,Hr=1,$r="";function Ps(t,e){ea[ta++]=Yh,ea[ta++]=Qh,Qh=t,Yh=e}function nE(t,e,n){jn[Vn++]=Hr,jn[Vn++]=$r,jn[Vn++]=Us,Us=t;var r=Hr;t=$r;var i=32-er(r)-1;r&=~(1<<i),n+=1;var o=32-er(e)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Hr=1<<32-er(e)+i|n<<i|r,$r=o+t}else Hr=1<<o|n<<i|r,$r=t}function Mg(t){t.return!==null&&(Ps(t,1),nE(t,1,0))}function Og(t){for(;t===Qh;)Qh=ea[--ta],ea[ta]=null,Yh=ea[--ta],ea[ta]=null;for(;t===Us;)Us=jn[--Vn],jn[Vn]=null,$r=jn[--Vn],jn[Vn]=null,Hr=jn[--Vn],jn[Vn]=null}var Tn=null,wn=null,Xe=!1,Jn=null;function rE(t,e){var n=Fn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Pv(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Tn=t,wn=Bi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Tn=t,wn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Us!==null?{id:Hr,overflow:$r}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Fn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Tn=t,wn=null,!0):!1;default:return!1}}function cp(t){return(t.mode&1)!==0&&(t.flags&128)===0}function hp(t){if(Xe){var e=wn;if(e){var n=e;if(!Pv(t,e)){if(cp(t))throw Error(X(418));e=Bi(n.nextSibling);var r=Tn;e&&Pv(t,e)?rE(r,n):(t.flags=t.flags&-4097|2,Xe=!1,Tn=t)}}else{if(cp(t))throw Error(X(418));t.flags=t.flags&-4097|2,Xe=!1,Tn=t}}}function Sv(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Tn=t}function nh(t){if(t!==Tn)return!1;if(!Xe)return Sv(t),Xe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!op(t.type,t.memoizedProps)),e&&(e=wn)){if(cp(t))throw iE(),Error(X(418));for(;e;)rE(t,e),e=Bi(e.nextSibling)}if(Sv(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(X(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){wn=Bi(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}wn=null}}else wn=Tn?Bi(t.stateNode.nextSibling):null;return!0}function iE(){for(var t=wn;t;)t=Bi(t.nextSibling)}function wa(){wn=Tn=null,Xe=!1}function Dg(t){Jn===null?Jn=[t]:Jn.push(t)}var ib=li.ReactCurrentBatchConfig;function Rl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(X(309));var r=n.stateNode}if(!r)throw Error(X(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(a){var c=i.refs;a===null?delete c[o]:c[o]=a},e._stringRef=o,e)}if(typeof t!="string")throw Error(X(284));if(!n._owner)throw Error(X(290,t))}return t}function rh(t,e){throw t=Object.prototype.toString.call(e),Error(X(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function bv(t){var e=t._init;return e(t._payload)}function sE(t){function e(b,T){if(t){var P=b.deletions;P===null?(b.deletions=[T],b.flags|=16):P.push(T)}}function n(b,T){if(!t)return null;for(;T!==null;)e(b,T),T=T.sibling;return null}function r(b,T){for(b=new Map;T!==null;)T.key!==null?b.set(T.key,T):b.set(T.index,T),T=T.sibling;return b}function i(b,T){return b=qi(b,T),b.index=0,b.sibling=null,b}function o(b,T,P){return b.index=P,t?(P=b.alternate,P!==null?(P=P.index,P<T?(b.flags|=2,T):P):(b.flags|=2,T)):(b.flags|=1048576,T)}function a(b){return t&&b.alternate===null&&(b.flags|=2),b}function c(b,T,P,z){return T===null||T.tag!==6?(T=_m(P,b.mode,z),T.return=b,T):(T=i(T,P),T.return=b,T)}function d(b,T,P,z){var K=P.type;return K===Go?_(b,T,P.props.children,z,P.key):T!==null&&(T.elementType===K||typeof K=="object"&&K!==null&&K.$$typeof===Ii&&bv(K)===T.type)?(z=i(T,P.props),z.ref=Rl(b,T,P),z.return=b,z):(z=Sh(P.type,P.key,P.props,null,b.mode,z),z.ref=Rl(b,T,P),z.return=b,z)}function m(b,T,P,z){return T===null||T.tag!==4||T.stateNode.containerInfo!==P.containerInfo||T.stateNode.implementation!==P.implementation?(T=ym(P,b.mode,z),T.return=b,T):(T=i(T,P.children||[]),T.return=b,T)}function _(b,T,P,z,K){return T===null||T.tag!==7?(T=Ds(P,b.mode,z,K),T.return=b,T):(T=i(T,P),T.return=b,T)}function v(b,T,P){if(typeof T=="string"&&T!==""||typeof T=="number")return T=_m(""+T,b.mode,P),T.return=b,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case qc:return P=Sh(T.type,T.key,T.props,null,b.mode,P),P.ref=Rl(b,null,T),P.return=b,P;case Ko:return T=ym(T,b.mode,P),T.return=b,T;case Ii:var z=T._init;return v(b,z(T._payload),P)}if(Fl(T)||Sl(T))return T=Ds(T,b.mode,P,null),T.return=b,T;rh(b,T)}return null}function x(b,T,P,z){var K=T!==null?T.key:null;if(typeof P=="string"&&P!==""||typeof P=="number")return K!==null?null:c(b,T,""+P,z);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case qc:return P.key===K?d(b,T,P,z):null;case Ko:return P.key===K?m(b,T,P,z):null;case Ii:return K=P._init,x(b,T,K(P._payload),z)}if(Fl(P)||Sl(P))return K!==null?null:_(b,T,P,z,null);rh(b,P)}return null}function S(b,T,P,z,K){if(typeof z=="string"&&z!==""||typeof z=="number")return b=b.get(P)||null,c(T,b,""+z,K);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case qc:return b=b.get(z.key===null?P:z.key)||null,d(T,b,z,K);case Ko:return b=b.get(z.key===null?P:z.key)||null,m(T,b,z,K);case Ii:var $=z._init;return S(b,T,P,$(z._payload),K)}if(Fl(z)||Sl(z))return b=b.get(P)||null,_(T,b,z,K,null);rh(T,z)}return null}function C(b,T,P,z){for(var K=null,$=null,A=T,k=T=0,N=null;A!==null&&k<P.length;k++){A.index>k?(N=A,A=null):N=A.sibling;var j=x(b,A,P[k],z);if(j===null){A===null&&(A=N);break}t&&A&&j.alternate===null&&e(b,A),T=o(j,T,k),$===null?K=j:$.sibling=j,$=j,A=N}if(k===P.length)return n(b,A),Xe&&Ps(b,k),K;if(A===null){for(;k<P.length;k++)A=v(b,P[k],z),A!==null&&(T=o(A,T,k),$===null?K=A:$.sibling=A,$=A);return Xe&&Ps(b,k),K}for(A=r(b,A);k<P.length;k++)N=S(A,b,k,P[k],z),N!==null&&(t&&N.alternate!==null&&A.delete(N.key===null?k:N.key),T=o(N,T,k),$===null?K=N:$.sibling=N,$=N);return t&&A.forEach(function(U){return e(b,U)}),Xe&&Ps(b,k),K}function R(b,T,P,z){var K=Sl(P);if(typeof K!="function")throw Error(X(150));if(P=K.call(P),P==null)throw Error(X(151));for(var $=K=null,A=T,k=T=0,N=null,j=P.next();A!==null&&!j.done;k++,j=P.next()){A.index>k?(N=A,A=null):N=A.sibling;var U=x(b,A,j.value,z);if(U===null){A===null&&(A=N);break}t&&A&&U.alternate===null&&e(b,A),T=o(U,T,k),$===null?K=U:$.sibling=U,$=U,A=N}if(j.done)return n(b,A),Xe&&Ps(b,k),K;if(A===null){for(;!j.done;k++,j=P.next())j=v(b,j.value,z),j!==null&&(T=o(j,T,k),$===null?K=j:$.sibling=j,$=j);return Xe&&Ps(b,k),K}for(A=r(b,A);!j.done;k++,j=P.next())j=S(A,b,k,j.value,z),j!==null&&(t&&j.alternate!==null&&A.delete(j.key===null?k:j.key),T=o(j,T,k),$===null?K=j:$.sibling=j,$=j);return t&&A.forEach(function(M){return e(b,M)}),Xe&&Ps(b,k),K}function F(b,T,P,z){if(typeof P=="object"&&P!==null&&P.type===Go&&P.key===null&&(P=P.props.children),typeof P=="object"&&P!==null){switch(P.$$typeof){case qc:e:{for(var K=P.key,$=T;$!==null;){if($.key===K){if(K=P.type,K===Go){if($.tag===7){n(b,$.sibling),T=i($,P.props.children),T.return=b,b=T;break e}}else if($.elementType===K||typeof K=="object"&&K!==null&&K.$$typeof===Ii&&bv(K)===$.type){n(b,$.sibling),T=i($,P.props),T.ref=Rl(b,$,P),T.return=b,b=T;break e}n(b,$);break}else e(b,$);$=$.sibling}P.type===Go?(T=Ds(P.props.children,b.mode,z,P.key),T.return=b,b=T):(z=Sh(P.type,P.key,P.props,null,b.mode,z),z.ref=Rl(b,T,P),z.return=b,b=z)}return a(b);case Ko:e:{for($=P.key;T!==null;){if(T.key===$)if(T.tag===4&&T.stateNode.containerInfo===P.containerInfo&&T.stateNode.implementation===P.implementation){n(b,T.sibling),T=i(T,P.children||[]),T.return=b,b=T;break e}else{n(b,T);break}else e(b,T);T=T.sibling}T=ym(P,b.mode,z),T.return=b,b=T}return a(b);case Ii:return $=P._init,F(b,T,$(P._payload),z)}if(Fl(P))return C(b,T,P,z);if(Sl(P))return R(b,T,P,z);rh(b,P)}return typeof P=="string"&&P!==""||typeof P=="number"?(P=""+P,T!==null&&T.tag===6?(n(b,T.sibling),T=i(T,P),T.return=b,b=T):(n(b,T),T=_m(P,b.mode,z),T.return=b,b=T),a(b)):n(b,T)}return F}var xa=sE(!0),oE=sE(!1),Xh=os(null),Jh=null,na=null,jg=null;function Vg(){jg=na=Jh=null}function Fg(t){var e=Xh.current;Ze(Xh),t._currentValue=e}function dp(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ca(t,e){Jh=t,jg=na=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(hn=!0),t.firstContext=null)}function Bn(t){var e=t._currentValue;if(jg!==t)if(t={context:t,memoizedValue:e,next:null},na===null){if(Jh===null)throw Error(X(308));na=t,Jh.dependencies={lanes:0,firstContext:t}}else na=na.next=t;return e}var Ns=null;function Ug(t){Ns===null?Ns=[t]:Ns.push(t)}function aE(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Ug(e)):(n.next=i.next,i.next=n),e.interleaved=n,ei(t,r)}function ei(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Pi=!1;function zg(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lE(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Qr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Wi(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Me&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,ei(t,n)}return i=r.interleaved,i===null?(e.next=e,Ug(r)):(e.next=i.next,i.next=e),r.interleaved=e,ei(t,n)}function xh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Pg(t,n)}}function Av(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ed(t,e,n,r){var i=t.updateQueue;Pi=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,c=i.shared.pending;if(c!==null){i.shared.pending=null;var d=c,m=d.next;d.next=null,a===null?o=m:a.next=m,a=d;var _=t.alternate;_!==null&&(_=_.updateQueue,c=_.lastBaseUpdate,c!==a&&(c===null?_.firstBaseUpdate=m:c.next=m,_.lastBaseUpdate=d))}if(o!==null){var v=i.baseState;a=0,_=m=d=null,c=o;do{var x=c.lane,S=c.eventTime;if((r&x)===x){_!==null&&(_=_.next={eventTime:S,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var C=t,R=c;switch(x=e,S=n,R.tag){case 1:if(C=R.payload,typeof C=="function"){v=C.call(S,v,x);break e}v=C;break e;case 3:C.flags=C.flags&-65537|128;case 0:if(C=R.payload,x=typeof C=="function"?C.call(S,v,x):C,x==null)break e;v=it({},v,x);break e;case 2:Pi=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,x=i.effects,x===null?i.effects=[c]:x.push(c))}else S={eventTime:S,lane:x,tag:c.tag,payload:c.payload,callback:c.callback,next:null},_===null?(m=_=S,d=v):_=_.next=S,a|=x;if(c=c.next,c===null){if(c=i.shared.pending,c===null)break;x=c,c=x.next,x.next=null,i.lastBaseUpdate=x,i.shared.pending=null}}while(!0);if(_===null&&(d=v),i.baseState=d,i.firstBaseUpdate=m,i.lastBaseUpdate=_,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);Bs|=a,t.lanes=a,t.memoizedState=v}}function Cv(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(X(191,i));i.call(r)}}}var $u={},xr=os($u),xu=os($u),Eu=os($u);function Rs(t){if(t===$u)throw Error(X(174));return t}function Bg(t,e){switch($e(Eu,e),$e(xu,t),$e(xr,$u),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:qm(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=qm(e,t)}Ze(xr),$e(xr,e)}function Ea(){Ze(xr),Ze(xu),Ze(Eu)}function uE(t){Rs(Eu.current);var e=Rs(xr.current),n=qm(e,t.type);e!==n&&($e(xu,t),$e(xr,n))}function Wg(t){xu.current===t&&(Ze(xr),Ze(xu))}var tt=os(0);function td(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var hm=[];function Hg(){for(var t=0;t<hm.length;t++)hm[t]._workInProgressVersionPrimary=null;hm.length=0}var Eh=li.ReactCurrentDispatcher,dm=li.ReactCurrentBatchConfig,zs=0,nt=null,xt=null,Ct=null,nd=!1,Jl=!1,Tu=0,sb=0;function Wt(){throw Error(X(321))}function $g(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!rr(t[n],e[n]))return!1;return!0}function qg(t,e,n,r,i,o){if(zs=o,nt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Eh.current=t===null||t.memoizedState===null?ub:cb,t=n(r,i),Jl){o=0;do{if(Jl=!1,Tu=0,25<=o)throw Error(X(301));o+=1,Ct=xt=null,e.updateQueue=null,Eh.current=hb,t=n(r,i)}while(Jl)}if(Eh.current=rd,e=xt!==null&&xt.next!==null,zs=0,Ct=xt=nt=null,nd=!1,e)throw Error(X(300));return t}function Kg(){var t=Tu!==0;return Tu=0,t}function mr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ct===null?nt.memoizedState=Ct=t:Ct=Ct.next=t,Ct}function Wn(){if(xt===null){var t=nt.alternate;t=t!==null?t.memoizedState:null}else t=xt.next;var e=Ct===null?nt.memoizedState:Ct.next;if(e!==null)Ct=e,xt=t;else{if(t===null)throw Error(X(310));xt=t,t={memoizedState:xt.memoizedState,baseState:xt.baseState,baseQueue:xt.baseQueue,queue:xt.queue,next:null},Ct===null?nt.memoizedState=Ct=t:Ct=Ct.next=t}return Ct}function ku(t,e){return typeof e=="function"?e(t):e}function fm(t){var e=Wn(),n=e.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=t;var r=xt,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var c=a=null,d=null,m=o;do{var _=m.lane;if((zs&_)===_)d!==null&&(d=d.next={lane:0,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null}),r=m.hasEagerState?m.eagerState:t(r,m.action);else{var v={lane:_,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null};d===null?(c=d=v,a=r):d=d.next=v,nt.lanes|=_,Bs|=_}m=m.next}while(m!==null&&m!==o);d===null?a=r:d.next=c,rr(r,e.memoizedState)||(hn=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=d,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,nt.lanes|=o,Bs|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function mm(t){var e=Wn(),n=e.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do o=t(o,a.action),a=a.next;while(a!==i);rr(o,e.memoizedState)||(hn=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function cE(){}function hE(t,e){var n=nt,r=Wn(),i=e(),o=!rr(r.memoizedState,i);if(o&&(r.memoizedState=i,hn=!0),r=r.queue,Gg(mE.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||Ct!==null&&Ct.memoizedState.tag&1){if(n.flags|=2048,Iu(9,fE.bind(null,n,r,i,e),void 0,null),Rt===null)throw Error(X(349));zs&30||dE(n,e,i)}return i}function dE(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=nt.updateQueue,e===null?(e={lastEffect:null,stores:null},nt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function fE(t,e,n,r){e.value=n,e.getSnapshot=r,pE(e)&&gE(t)}function mE(t,e,n){return n(function(){pE(e)&&gE(t)})}function pE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!rr(t,n)}catch{return!0}}function gE(t){var e=ei(t,1);e!==null&&tr(e,t,1,-1)}function Nv(t){var e=mr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ku,lastRenderedState:t},e.queue=t,t=t.dispatch=lb.bind(null,nt,t),[e.memoizedState,t]}function Iu(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=nt.updateQueue,e===null?(e={lastEffect:null,stores:null},nt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function _E(){return Wn().memoizedState}function Th(t,e,n,r){var i=mr();nt.flags|=t,i.memoizedState=Iu(1|e,n,void 0,r===void 0?null:r)}function Hd(t,e,n,r){var i=Wn();r=r===void 0?null:r;var o=void 0;if(xt!==null){var a=xt.memoizedState;if(o=a.destroy,r!==null&&$g(r,a.deps)){i.memoizedState=Iu(e,n,o,r);return}}nt.flags|=t,i.memoizedState=Iu(1|e,n,o,r)}function Rv(t,e){return Th(8390656,8,t,e)}function Gg(t,e){return Hd(2048,8,t,e)}function yE(t,e){return Hd(4,2,t,e)}function vE(t,e){return Hd(4,4,t,e)}function wE(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function xE(t,e,n){return n=n!=null?n.concat([t]):null,Hd(4,4,wE.bind(null,e,t),n)}function Zg(){}function EE(t,e){var n=Wn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&$g(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function TE(t,e){var n=Wn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&$g(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function kE(t,e,n){return zs&21?(rr(n,e)||(n=Ax(),nt.lanes|=n,Bs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,hn=!0),t.memoizedState=n)}function ob(t,e){var n=Fe;Fe=n!==0&&4>n?n:4,t(!0);var r=dm.transition;dm.transition={};try{t(!1),e()}finally{Fe=n,dm.transition=r}}function IE(){return Wn().memoizedState}function ab(t,e,n){var r=$i(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},PE(t))SE(e,n);else if(n=aE(t,e,n,r),n!==null){var i=rn();tr(n,t,r,i),bE(n,e,r)}}function lb(t,e,n){var r=$i(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(PE(t))SE(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,c=o(a,n);if(i.hasEagerState=!0,i.eagerState=c,rr(c,a)){var d=e.interleaved;d===null?(i.next=i,Ug(e)):(i.next=d.next,d.next=i),e.interleaved=i;return}}catch{}finally{}n=aE(t,e,i,r),n!==null&&(i=rn(),tr(n,t,r,i),bE(n,e,r))}}function PE(t){var e=t.alternate;return t===nt||e!==null&&e===nt}function SE(t,e){Jl=nd=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function bE(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Pg(t,n)}}var rd={readContext:Bn,useCallback:Wt,useContext:Wt,useEffect:Wt,useImperativeHandle:Wt,useInsertionEffect:Wt,useLayoutEffect:Wt,useMemo:Wt,useReducer:Wt,useRef:Wt,useState:Wt,useDebugValue:Wt,useDeferredValue:Wt,useTransition:Wt,useMutableSource:Wt,useSyncExternalStore:Wt,useId:Wt,unstable_isNewReconciler:!1},ub={readContext:Bn,useCallback:function(t,e){return mr().memoizedState=[t,e===void 0?null:e],t},useContext:Bn,useEffect:Rv,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Th(4194308,4,wE.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Th(4194308,4,t,e)},useInsertionEffect:function(t,e){return Th(4,2,t,e)},useMemo:function(t,e){var n=mr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=mr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=ab.bind(null,nt,t),[r.memoizedState,t]},useRef:function(t){var e=mr();return t={current:t},e.memoizedState=t},useState:Nv,useDebugValue:Zg,useDeferredValue:function(t){return mr().memoizedState=t},useTransition:function(){var t=Nv(!1),e=t[0];return t=ob.bind(null,t[1]),mr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=nt,i=mr();if(Xe){if(n===void 0)throw Error(X(407));n=n()}else{if(n=e(),Rt===null)throw Error(X(349));zs&30||dE(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,Rv(mE.bind(null,r,o,t),[t]),r.flags|=2048,Iu(9,fE.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=mr(),e=Rt.identifierPrefix;if(Xe){var n=$r,r=Hr;n=(r&~(1<<32-er(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Tu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=sb++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},cb={readContext:Bn,useCallback:EE,useContext:Bn,useEffect:Gg,useImperativeHandle:xE,useInsertionEffect:yE,useLayoutEffect:vE,useMemo:TE,useReducer:fm,useRef:_E,useState:function(){return fm(ku)},useDebugValue:Zg,useDeferredValue:function(t){var e=Wn();return kE(e,xt.memoizedState,t)},useTransition:function(){var t=fm(ku)[0],e=Wn().memoizedState;return[t,e]},useMutableSource:cE,useSyncExternalStore:hE,useId:IE,unstable_isNewReconciler:!1},hb={readContext:Bn,useCallback:EE,useContext:Bn,useEffect:Gg,useImperativeHandle:xE,useInsertionEffect:yE,useLayoutEffect:vE,useMemo:TE,useReducer:mm,useRef:_E,useState:function(){return mm(ku)},useDebugValue:Zg,useDeferredValue:function(t){var e=Wn();return xt===null?e.memoizedState=t:kE(e,xt.memoizedState,t)},useTransition:function(){var t=mm(ku)[0],e=Wn().memoizedState;return[t,e]},useMutableSource:cE,useSyncExternalStore:hE,useId:IE,unstable_isNewReconciler:!1};function Yn(t,e){if(t&&t.defaultProps){e=it({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function fp(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:it({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var $d={isMounted:function(t){return(t=t._reactInternals)?Xs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=rn(),i=$i(t),o=Qr(r,i);o.payload=e,n!=null&&(o.callback=n),e=Wi(t,o,i),e!==null&&(tr(e,t,i,r),xh(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=rn(),i=$i(t),o=Qr(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=Wi(t,o,i),e!==null&&(tr(e,t,i,r),xh(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=rn(),r=$i(t),i=Qr(n,r);i.tag=2,e!=null&&(i.callback=e),e=Wi(t,i,r),e!==null&&(tr(e,t,r,n),xh(e,t,r))}};function Lv(t,e,n,r,i,o,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,a):e.prototype&&e.prototype.isPureReactComponent?!_u(n,r)||!_u(i,o):!0}function AE(t,e,n){var r=!1,i=Ji,o=e.contextType;return typeof o=="object"&&o!==null?o=Bn(o):(i=fn(e)?Fs:Qt.current,r=e.contextTypes,o=(r=r!=null)?va(t,i):Ji),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=$d,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function Mv(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&$d.enqueueReplaceState(e,e.state,null)}function mp(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},zg(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=Bn(o):(o=fn(e)?Fs:Qt.current,i.context=va(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(fp(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&$d.enqueueReplaceState(i,i.state,null),ed(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Ta(t,e){try{var n="",r=e;do n+=FP(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function pm(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function pp(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var db=typeof WeakMap=="function"?WeakMap:Map;function CE(t,e,n){n=Qr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){sd||(sd=!0,Ip=r),pp(t,e)},n}function NE(t,e,n){n=Qr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){pp(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){pp(t,e),typeof r!="function"&&(Hi===null?Hi=new Set([this]):Hi.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function Ov(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new db;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Pb.bind(null,t,e,n),e.then(t,t))}function Dv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function jv(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Qr(-1,1),e.tag=2,Wi(n,e,1))),n.lanes|=1),t)}var fb=li.ReactCurrentOwner,hn=!1;function nn(t,e,n,r){e.child=t===null?oE(e,null,n,r):xa(e,t.child,n,r)}function Vv(t,e,n,r,i){n=n.render;var o=e.ref;return ca(e,i),r=qg(t,e,n,r,o,i),n=Kg(),t!==null&&!hn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ti(t,e,i)):(Xe&&n&&Mg(e),e.flags|=1,nn(t,e,r,i),e.child)}function Fv(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!r_(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,RE(t,e,o,r,i)):(t=Sh(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:_u,n(a,r)&&t.ref===e.ref)return ti(t,e,i)}return e.flags|=1,t=qi(o,r),t.ref=e.ref,t.return=e,e.child=t}function RE(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(_u(o,r)&&t.ref===e.ref)if(hn=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(hn=!0);else return e.lanes=t.lanes,ti(t,e,i)}return gp(t,e,n,r,i)}function LE(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},$e(ia,yn),yn|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,$e(ia,yn),yn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,$e(ia,yn),yn|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,$e(ia,yn),yn|=r;return nn(t,e,i,n),e.child}function ME(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function gp(t,e,n,r,i){var o=fn(n)?Fs:Qt.current;return o=va(e,o),ca(e,i),n=qg(t,e,n,r,o,i),r=Kg(),t!==null&&!hn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ti(t,e,i)):(Xe&&r&&Mg(e),e.flags|=1,nn(t,e,n,i),e.child)}function Uv(t,e,n,r,i){if(fn(n)){var o=!0;Zh(e)}else o=!1;if(ca(e,i),e.stateNode===null)kh(t,e),AE(e,n,r),mp(e,n,r,i),r=!0;else if(t===null){var a=e.stateNode,c=e.memoizedProps;a.props=c;var d=a.context,m=n.contextType;typeof m=="object"&&m!==null?m=Bn(m):(m=fn(n)?Fs:Qt.current,m=va(e,m));var _=n.getDerivedStateFromProps,v=typeof _=="function"||typeof a.getSnapshotBeforeUpdate=="function";v||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(c!==r||d!==m)&&Mv(e,a,r,m),Pi=!1;var x=e.memoizedState;a.state=x,ed(e,r,a,i),d=e.memoizedState,c!==r||x!==d||dn.current||Pi?(typeof _=="function"&&(fp(e,n,_,r),d=e.memoizedState),(c=Pi||Lv(e,n,c,r,x,d,m))?(v||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=d),a.props=r,a.state=d,a.context=m,r=c):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,lE(t,e),c=e.memoizedProps,m=e.type===e.elementType?c:Yn(e.type,c),a.props=m,v=e.pendingProps,x=a.context,d=n.contextType,typeof d=="object"&&d!==null?d=Bn(d):(d=fn(n)?Fs:Qt.current,d=va(e,d));var S=n.getDerivedStateFromProps;(_=typeof S=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(c!==v||x!==d)&&Mv(e,a,r,d),Pi=!1,x=e.memoizedState,a.state=x,ed(e,r,a,i);var C=e.memoizedState;c!==v||x!==C||dn.current||Pi?(typeof S=="function"&&(fp(e,n,S,r),C=e.memoizedState),(m=Pi||Lv(e,n,m,r,x,C,d)||!1)?(_||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,C,d),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,C,d)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||c===t.memoizedProps&&x===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&x===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=C),a.props=r,a.state=C,a.context=d,r=m):(typeof a.componentDidUpdate!="function"||c===t.memoizedProps&&x===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&x===t.memoizedState||(e.flags|=1024),r=!1)}return _p(t,e,n,r,o,i)}function _p(t,e,n,r,i,o){ME(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return i&&Iv(e,n,!1),ti(t,e,o);r=e.stateNode,fb.current=e;var c=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=xa(e,t.child,null,o),e.child=xa(e,null,c,o)):nn(t,e,c,o),e.memoizedState=r.state,i&&Iv(e,n,!0),e.child}function OE(t){var e=t.stateNode;e.pendingContext?kv(t,e.pendingContext,e.pendingContext!==e.context):e.context&&kv(t,e.context,!1),Bg(t,e.containerInfo)}function zv(t,e,n,r,i){return wa(),Dg(i),e.flags|=256,nn(t,e,n,r),e.child}var yp={dehydrated:null,treeContext:null,retryLane:0};function vp(t){return{baseLanes:t,cachePool:null,transitions:null}}function DE(t,e,n){var r=e.pendingProps,i=tt.current,o=!1,a=(e.flags&128)!==0,c;if((c=a)||(c=t!==null&&t.memoizedState===null?!1:(i&2)!==0),c?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),$e(tt,i&1),t===null)return hp(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,o?(r=e.mode,o=e.child,a={mode:"hidden",children:a},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=Gd(a,r,0,null),t=Ds(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=vp(n),e.memoizedState=yp,t):Qg(e,a));if(i=t.memoizedState,i!==null&&(c=i.dehydrated,c!==null))return mb(t,e,a,r,c,i,n);if(o){o=r.fallback,a=e.mode,i=t.child,c=i.sibling;var d={mode:"hidden",children:r.children};return!(a&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=d,e.deletions=null):(r=qi(i,d),r.subtreeFlags=i.subtreeFlags&14680064),c!==null?o=qi(c,o):(o=Ds(o,a,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,a=t.child.memoizedState,a=a===null?vp(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=t.childLanes&~n,e.memoizedState=yp,r}return o=t.child,t=o.sibling,r=qi(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Qg(t,e){return e=Gd({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ih(t,e,n,r){return r!==null&&Dg(r),xa(e,t.child,null,n),t=Qg(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function mb(t,e,n,r,i,o,a){if(n)return e.flags&256?(e.flags&=-257,r=pm(Error(X(422))),ih(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=Gd({mode:"visible",children:r.children},i,0,null),o=Ds(o,i,a,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&xa(e,t.child,null,a),e.child.memoizedState=vp(a),e.memoizedState=yp,o);if(!(e.mode&1))return ih(t,e,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var c=r.dgst;return r=c,o=Error(X(419)),r=pm(o,r,void 0),ih(t,e,a,r)}if(c=(a&t.childLanes)!==0,hn||c){if(r=Rt,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,ei(t,i),tr(r,t,i,-1))}return n_(),r=pm(Error(X(421))),ih(t,e,a,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Sb.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,wn=Bi(i.nextSibling),Tn=e,Xe=!0,Jn=null,t!==null&&(jn[Vn++]=Hr,jn[Vn++]=$r,jn[Vn++]=Us,Hr=t.id,$r=t.overflow,Us=e),e=Qg(e,r.children),e.flags|=4096,e)}function Bv(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),dp(t.return,e,n)}function gm(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function jE(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(nn(t,e,r.children,n),r=tt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Bv(t,n,e);else if(t.tag===19)Bv(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if($e(tt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&td(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),gm(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&td(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}gm(e,!0,n,null,o);break;case"together":gm(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function kh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ti(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Bs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(X(153));if(e.child!==null){for(t=e.child,n=qi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=qi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function pb(t,e,n){switch(e.tag){case 3:OE(e),wa();break;case 5:uE(e);break;case 1:fn(e.type)&&Zh(e);break;case 4:Bg(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;$e(Xh,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?($e(tt,tt.current&1),e.flags|=128,null):n&e.child.childLanes?DE(t,e,n):($e(tt,tt.current&1),t=ti(t,e,n),t!==null?t.sibling:null);$e(tt,tt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return jE(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),$e(tt,tt.current),r)break;return null;case 22:case 23:return e.lanes=0,LE(t,e,n)}return ti(t,e,n)}var VE,wp,FE,UE;VE=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};wp=function(){};FE=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Rs(xr.current);var o=null;switch(n){case"input":i=Bm(t,i),r=Bm(t,r),o=[];break;case"select":i=it({},i,{value:void 0}),r=it({},r,{value:void 0}),o=[];break;case"textarea":i=$m(t,i),r=$m(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Kh)}Km(n,r);var a;n=null;for(m in i)if(!r.hasOwnProperty(m)&&i.hasOwnProperty(m)&&i[m]!=null)if(m==="style"){var c=i[m];for(a in c)c.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else m!=="dangerouslySetInnerHTML"&&m!=="children"&&m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(cu.hasOwnProperty(m)?o||(o=[]):(o=o||[]).push(m,null));for(m in r){var d=r[m];if(c=i!=null?i[m]:void 0,r.hasOwnProperty(m)&&d!==c&&(d!=null||c!=null))if(m==="style")if(c){for(a in c)!c.hasOwnProperty(a)||d&&d.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in d)d.hasOwnProperty(a)&&c[a]!==d[a]&&(n||(n={}),n[a]=d[a])}else n||(o||(o=[]),o.push(m,n)),n=d;else m==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,c=c?c.__html:void 0,d!=null&&c!==d&&(o=o||[]).push(m,d)):m==="children"?typeof d!="string"&&typeof d!="number"||(o=o||[]).push(m,""+d):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&(cu.hasOwnProperty(m)?(d!=null&&m==="onScroll"&&qe("scroll",t),o||c===d||(o=[])):(o=o||[]).push(m,d))}n&&(o=o||[]).push("style",n);var m=o;(e.updateQueue=m)&&(e.flags|=4)}};UE=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ll(t,e){if(!Xe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ht(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function gb(t,e,n){var r=e.pendingProps;switch(Og(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ht(e),null;case 1:return fn(e.type)&&Gh(),Ht(e),null;case 3:return r=e.stateNode,Ea(),Ze(dn),Ze(Qt),Hg(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(nh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Jn!==null&&(bp(Jn),Jn=null))),wp(t,e),Ht(e),null;case 5:Wg(e);var i=Rs(Eu.current);if(n=e.type,t!==null&&e.stateNode!=null)FE(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(X(166));return Ht(e),null}if(t=Rs(xr.current),nh(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[pr]=e,r[wu]=o,t=(e.mode&1)!==0,n){case"dialog":qe("cancel",r),qe("close",r);break;case"iframe":case"object":case"embed":qe("load",r);break;case"video":case"audio":for(i=0;i<zl.length;i++)qe(zl[i],r);break;case"source":qe("error",r);break;case"img":case"image":case"link":qe("error",r),qe("load",r);break;case"details":qe("toggle",r);break;case"input":Yy(r,o),qe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},qe("invalid",r);break;case"textarea":Jy(r,o),qe("invalid",r)}Km(n,o),i=null;for(var a in o)if(o.hasOwnProperty(a)){var c=o[a];a==="children"?typeof c=="string"?r.textContent!==c&&(o.suppressHydrationWarning!==!0&&th(r.textContent,c,t),i=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(o.suppressHydrationWarning!==!0&&th(r.textContent,c,t),i=["children",""+c]):cu.hasOwnProperty(a)&&c!=null&&a==="onScroll"&&qe("scroll",r)}switch(n){case"input":Kc(r),Xy(r,o,!0);break;case"textarea":Kc(r),ev(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Kh)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=mx(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[pr]=e,t[wu]=r,VE(t,e,!1,!1),e.stateNode=t;e:{switch(a=Gm(n,r),n){case"dialog":qe("cancel",t),qe("close",t),i=r;break;case"iframe":case"object":case"embed":qe("load",t),i=r;break;case"video":case"audio":for(i=0;i<zl.length;i++)qe(zl[i],t);i=r;break;case"source":qe("error",t),i=r;break;case"img":case"image":case"link":qe("error",t),qe("load",t),i=r;break;case"details":qe("toggle",t),i=r;break;case"input":Yy(t,r),i=Bm(t,r),qe("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=it({},r,{value:void 0}),qe("invalid",t);break;case"textarea":Jy(t,r),i=$m(t,r),qe("invalid",t);break;default:i=r}Km(n,i),c=i;for(o in c)if(c.hasOwnProperty(o)){var d=c[o];o==="style"?_x(t,d):o==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&px(t,d)):o==="children"?typeof d=="string"?(n!=="textarea"||d!=="")&&hu(t,d):typeof d=="number"&&hu(t,""+d):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(cu.hasOwnProperty(o)?d!=null&&o==="onScroll"&&qe("scroll",t):d!=null&&wg(t,o,d,a))}switch(n){case"input":Kc(t),Xy(t,r,!1);break;case"textarea":Kc(t),ev(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Xi(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?oa(t,!!r.multiple,o,!1):r.defaultValue!=null&&oa(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Kh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ht(e),null;case 6:if(t&&e.stateNode!=null)UE(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(X(166));if(n=Rs(Eu.current),Rs(xr.current),nh(e)){if(r=e.stateNode,n=e.memoizedProps,r[pr]=e,(o=r.nodeValue!==n)&&(t=Tn,t!==null))switch(t.tag){case 3:th(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&th(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[pr]=e,e.stateNode=r}return Ht(e),null;case 13:if(Ze(tt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Xe&&wn!==null&&e.mode&1&&!(e.flags&128))iE(),wa(),e.flags|=98560,o=!1;else if(o=nh(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(X(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(X(317));o[pr]=e}else wa(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ht(e),o=!1}else Jn!==null&&(bp(Jn),Jn=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||tt.current&1?Tt===0&&(Tt=3):n_())),e.updateQueue!==null&&(e.flags|=4),Ht(e),null);case 4:return Ea(),wp(t,e),t===null&&yu(e.stateNode.containerInfo),Ht(e),null;case 10:return Fg(e.type._context),Ht(e),null;case 17:return fn(e.type)&&Gh(),Ht(e),null;case 19:if(Ze(tt),o=e.memoizedState,o===null)return Ht(e),null;if(r=(e.flags&128)!==0,a=o.rendering,a===null)if(r)Ll(o,!1);else{if(Tt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=td(t),a!==null){for(e.flags|=128,Ll(o,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,t=a.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return $e(tt,tt.current&1|2),e.child}t=t.sibling}o.tail!==null&&dt()>ka&&(e.flags|=128,r=!0,Ll(o,!1),e.lanes=4194304)}else{if(!r)if(t=td(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ll(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!Xe)return Ht(e),null}else 2*dt()-o.renderingStartTime>ka&&n!==1073741824&&(e.flags|=128,r=!0,Ll(o,!1),e.lanes=4194304);o.isBackwards?(a.sibling=e.child,e.child=a):(n=o.last,n!==null?n.sibling=a:e.child=a,o.last=a)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=dt(),e.sibling=null,n=tt.current,$e(tt,r?n&1|2:n&1),e):(Ht(e),null);case 22:case 23:return t_(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?yn&1073741824&&(Ht(e),e.subtreeFlags&6&&(e.flags|=8192)):Ht(e),null;case 24:return null;case 25:return null}throw Error(X(156,e.tag))}function _b(t,e){switch(Og(e),e.tag){case 1:return fn(e.type)&&Gh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ea(),Ze(dn),Ze(Qt),Hg(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Wg(e),null;case 13:if(Ze(tt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(X(340));wa()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ze(tt),null;case 4:return Ea(),null;case 10:return Fg(e.type._context),null;case 22:case 23:return t_(),null;case 24:return null;default:return null}}var sh=!1,Kt=!1,yb=typeof WeakSet=="function"?WeakSet:Set,re=null;function ra(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){at(t,e,r)}else n.current=null}function xp(t,e,n){try{n()}catch(r){at(t,e,r)}}var Wv=!1;function vb(t,e){if(ip=Hh,t=$x(),Lg(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,c=-1,d=-1,m=0,_=0,v=t,x=null;t:for(;;){for(var S;v!==n||i!==0&&v.nodeType!==3||(c=a+i),v!==o||r!==0&&v.nodeType!==3||(d=a+r),v.nodeType===3&&(a+=v.nodeValue.length),(S=v.firstChild)!==null;)x=v,v=S;for(;;){if(v===t)break t;if(x===n&&++m===i&&(c=a),x===o&&++_===r&&(d=a),(S=v.nextSibling)!==null)break;v=x,x=v.parentNode}v=S}n=c===-1||d===-1?null:{start:c,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for(sp={focusedElem:t,selectionRange:n},Hh=!1,re=e;re!==null;)if(e=re,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,re=t;else for(;re!==null;){e=re;try{var C=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(C!==null){var R=C.memoizedProps,F=C.memoizedState,b=e.stateNode,T=b.getSnapshotBeforeUpdate(e.elementType===e.type?R:Yn(e.type,R),F);b.__reactInternalSnapshotBeforeUpdate=T}break;case 3:var P=e.stateNode.containerInfo;P.nodeType===1?P.textContent="":P.nodeType===9&&P.documentElement&&P.removeChild(P.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(X(163))}}catch(z){at(e,e.return,z)}if(t=e.sibling,t!==null){t.return=e.return,re=t;break}re=e.return}return C=Wv,Wv=!1,C}function eu(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&xp(e,n,o)}i=i.next}while(i!==r)}}function qd(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Ep(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function zE(t){var e=t.alternate;e!==null&&(t.alternate=null,zE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[pr],delete e[wu],delete e[lp],delete e[tb],delete e[nb])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function BE(t){return t.tag===5||t.tag===3||t.tag===4}function Hv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||BE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Tp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Kh));else if(r!==4&&(t=t.child,t!==null))for(Tp(t,e,n),t=t.sibling;t!==null;)Tp(t,e,n),t=t.sibling}function kp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(kp(t,e,n),t=t.sibling;t!==null;)kp(t,e,n),t=t.sibling}var Dt=null,Xn=!1;function Ei(t,e,n){for(n=n.child;n!==null;)WE(t,e,n),n=n.sibling}function WE(t,e,n){if(wr&&typeof wr.onCommitFiberUnmount=="function")try{wr.onCommitFiberUnmount(Vd,n)}catch{}switch(n.tag){case 5:Kt||ra(n,e);case 6:var r=Dt,i=Xn;Dt=null,Ei(t,e,n),Dt=r,Xn=i,Dt!==null&&(Xn?(t=Dt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Dt.removeChild(n.stateNode));break;case 18:Dt!==null&&(Xn?(t=Dt,n=n.stateNode,t.nodeType===8?um(t.parentNode,n):t.nodeType===1&&um(t,n),pu(t)):um(Dt,n.stateNode));break;case 4:r=Dt,i=Xn,Dt=n.stateNode.containerInfo,Xn=!0,Ei(t,e,n),Dt=r,Xn=i;break;case 0:case 11:case 14:case 15:if(!Kt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&xp(n,e,a),i=i.next}while(i!==r)}Ei(t,e,n);break;case 1:if(!Kt&&(ra(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){at(n,e,c)}Ei(t,e,n);break;case 21:Ei(t,e,n);break;case 22:n.mode&1?(Kt=(r=Kt)||n.memoizedState!==null,Ei(t,e,n),Kt=r):Ei(t,e,n);break;default:Ei(t,e,n)}}function $v(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new yb),e.forEach(function(r){var i=bb.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Qn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,a=e,c=a;e:for(;c!==null;){switch(c.tag){case 5:Dt=c.stateNode,Xn=!1;break e;case 3:Dt=c.stateNode.containerInfo,Xn=!0;break e;case 4:Dt=c.stateNode.containerInfo,Xn=!0;break e}c=c.return}if(Dt===null)throw Error(X(160));WE(o,a,i),Dt=null,Xn=!1;var d=i.alternate;d!==null&&(d.return=null),i.return=null}catch(m){at(i,e,m)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)HE(e,t),e=e.sibling}function HE(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Qn(e,t),fr(t),r&4){try{eu(3,t,t.return),qd(3,t)}catch(R){at(t,t.return,R)}try{eu(5,t,t.return)}catch(R){at(t,t.return,R)}}break;case 1:Qn(e,t),fr(t),r&512&&n!==null&&ra(n,n.return);break;case 5:if(Qn(e,t),fr(t),r&512&&n!==null&&ra(n,n.return),t.flags&32){var i=t.stateNode;try{hu(i,"")}catch(R){at(t,t.return,R)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,a=n!==null?n.memoizedProps:o,c=t.type,d=t.updateQueue;if(t.updateQueue=null,d!==null)try{c==="input"&&o.type==="radio"&&o.name!=null&&dx(i,o),Gm(c,a);var m=Gm(c,o);for(a=0;a<d.length;a+=2){var _=d[a],v=d[a+1];_==="style"?_x(i,v):_==="dangerouslySetInnerHTML"?px(i,v):_==="children"?hu(i,v):wg(i,_,v,m)}switch(c){case"input":Wm(i,o);break;case"textarea":fx(i,o);break;case"select":var x=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var S=o.value;S!=null?oa(i,!!o.multiple,S,!1):x!==!!o.multiple&&(o.defaultValue!=null?oa(i,!!o.multiple,o.defaultValue,!0):oa(i,!!o.multiple,o.multiple?[]:"",!1))}i[wu]=o}catch(R){at(t,t.return,R)}}break;case 6:if(Qn(e,t),fr(t),r&4){if(t.stateNode===null)throw Error(X(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(R){at(t,t.return,R)}}break;case 3:if(Qn(e,t),fr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{pu(e.containerInfo)}catch(R){at(t,t.return,R)}break;case 4:Qn(e,t),fr(t);break;case 13:Qn(e,t),fr(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(Jg=dt())),r&4&&$v(t);break;case 22:if(_=n!==null&&n.memoizedState!==null,t.mode&1?(Kt=(m=Kt)||_,Qn(e,t),Kt=m):Qn(e,t),fr(t),r&8192){if(m=t.memoizedState!==null,(t.stateNode.isHidden=m)&&!_&&t.mode&1)for(re=t,_=t.child;_!==null;){for(v=re=_;re!==null;){switch(x=re,S=x.child,x.tag){case 0:case 11:case 14:case 15:eu(4,x,x.return);break;case 1:ra(x,x.return);var C=x.stateNode;if(typeof C.componentWillUnmount=="function"){r=x,n=x.return;try{e=r,C.props=e.memoizedProps,C.state=e.memoizedState,C.componentWillUnmount()}catch(R){at(r,n,R)}}break;case 5:ra(x,x.return);break;case 22:if(x.memoizedState!==null){Kv(v);continue}}S!==null?(S.return=x,re=S):Kv(v)}_=_.sibling}e:for(_=null,v=t;;){if(v.tag===5){if(_===null){_=v;try{i=v.stateNode,m?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(c=v.stateNode,d=v.memoizedProps.style,a=d!=null&&d.hasOwnProperty("display")?d.display:null,c.style.display=gx("display",a))}catch(R){at(t,t.return,R)}}}else if(v.tag===6){if(_===null)try{v.stateNode.nodeValue=m?"":v.memoizedProps}catch(R){at(t,t.return,R)}}else if((v.tag!==22&&v.tag!==23||v.memoizedState===null||v===t)&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===t)break e;for(;v.sibling===null;){if(v.return===null||v.return===t)break e;_===v&&(_=null),v=v.return}_===v&&(_=null),v.sibling.return=v.return,v=v.sibling}}break;case 19:Qn(e,t),fr(t),r&4&&$v(t);break;case 21:break;default:Qn(e,t),fr(t)}}function fr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(BE(n)){var r=n;break e}n=n.return}throw Error(X(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(hu(i,""),r.flags&=-33);var o=Hv(t);kp(t,o,i);break;case 3:case 4:var a=r.stateNode.containerInfo,c=Hv(t);Tp(t,c,a);break;default:throw Error(X(161))}}catch(d){at(t,t.return,d)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function wb(t,e,n){re=t,$E(t)}function $E(t,e,n){for(var r=(t.mode&1)!==0;re!==null;){var i=re,o=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||sh;if(!a){var c=i.alternate,d=c!==null&&c.memoizedState!==null||Kt;c=sh;var m=Kt;if(sh=a,(Kt=d)&&!m)for(re=i;re!==null;)a=re,d=a.child,a.tag===22&&a.memoizedState!==null?Gv(i):d!==null?(d.return=a,re=d):Gv(i);for(;o!==null;)re=o,$E(o),o=o.sibling;re=i,sh=c,Kt=m}qv(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,re=o):qv(t)}}function qv(t){for(;re!==null;){var e=re;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Kt||qd(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Kt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Yn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&Cv(e,o,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Cv(e,a,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var d=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var m=e.alternate;if(m!==null){var _=m.memoizedState;if(_!==null){var v=_.dehydrated;v!==null&&pu(v)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(X(163))}Kt||e.flags&512&&Ep(e)}catch(x){at(e,e.return,x)}}if(e===t){re=null;break}if(n=e.sibling,n!==null){n.return=e.return,re=n;break}re=e.return}}function Kv(t){for(;re!==null;){var e=re;if(e===t){re=null;break}var n=e.sibling;if(n!==null){n.return=e.return,re=n;break}re=e.return}}function Gv(t){for(;re!==null;){var e=re;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{qd(4,e)}catch(d){at(e,n,d)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(d){at(e,i,d)}}var o=e.return;try{Ep(e)}catch(d){at(e,o,d)}break;case 5:var a=e.return;try{Ep(e)}catch(d){at(e,a,d)}}}catch(d){at(e,e.return,d)}if(e===t){re=null;break}var c=e.sibling;if(c!==null){c.return=e.return,re=c;break}re=e.return}}var xb=Math.ceil,id=li.ReactCurrentDispatcher,Yg=li.ReactCurrentOwner,Un=li.ReactCurrentBatchConfig,Me=0,Rt=null,_t=null,Ft=0,yn=0,ia=os(0),Tt=0,Pu=null,Bs=0,Kd=0,Xg=0,tu=null,un=null,Jg=0,ka=1/0,zr=null,sd=!1,Ip=null,Hi=null,oh=!1,Di=null,od=0,nu=0,Pp=null,Ih=-1,Ph=0;function rn(){return Me&6?dt():Ih!==-1?Ih:Ih=dt()}function $i(t){return t.mode&1?Me&2&&Ft!==0?Ft&-Ft:ib.transition!==null?(Ph===0&&(Ph=Ax()),Ph):(t=Fe,t!==0||(t=window.event,t=t===void 0?16:Dx(t.type)),t):1}function tr(t,e,n,r){if(50<nu)throw nu=0,Pp=null,Error(X(185));Bu(t,n,r),(!(Me&2)||t!==Rt)&&(t===Rt&&(!(Me&2)&&(Kd|=n),Tt===4&&Ai(t,Ft)),mn(t,r),n===1&&Me===0&&!(e.mode&1)&&(ka=dt()+500,Wd&&as()))}function mn(t,e){var n=t.callbackNode;iS(t,e);var r=Wh(t,t===Rt?Ft:0);if(r===0)n!==null&&rv(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&rv(n),e===1)t.tag===0?rb(Zv.bind(null,t)):tE(Zv.bind(null,t)),JS(function(){!(Me&6)&&as()}),n=null;else{switch(Cx(r)){case 1:n=Ig;break;case 4:n=Sx;break;case 16:n=Bh;break;case 536870912:n=bx;break;default:n=Bh}n=JE(n,qE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function qE(t,e){if(Ih=-1,Ph=0,Me&6)throw Error(X(327));var n=t.callbackNode;if(ha()&&t.callbackNode!==n)return null;var r=Wh(t,t===Rt?Ft:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ad(t,r);else{e=r;var i=Me;Me|=2;var o=GE();(Rt!==t||Ft!==e)&&(zr=null,ka=dt()+500,Os(t,e));do try{kb();break}catch(c){KE(t,c)}while(!0);Vg(),id.current=o,Me=i,_t!==null?e=0:(Rt=null,Ft=0,e=Tt)}if(e!==0){if(e===2&&(i=Jm(t),i!==0&&(r=i,e=Sp(t,i))),e===1)throw n=Pu,Os(t,0),Ai(t,r),mn(t,dt()),n;if(e===6)Ai(t,r);else{if(i=t.current.alternate,!(r&30)&&!Eb(i)&&(e=ad(t,r),e===2&&(o=Jm(t),o!==0&&(r=o,e=Sp(t,o))),e===1))throw n=Pu,Os(t,0),Ai(t,r),mn(t,dt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(X(345));case 2:Ss(t,un,zr);break;case 3:if(Ai(t,r),(r&130023424)===r&&(e=Jg+500-dt(),10<e)){if(Wh(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){rn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=ap(Ss.bind(null,t,un,zr),e);break}Ss(t,un,zr);break;case 4:if(Ai(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var a=31-er(r);o=1<<a,a=e[a],a>i&&(i=a),r&=~o}if(r=i,r=dt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*xb(r/1960))-r,10<r){t.timeoutHandle=ap(Ss.bind(null,t,un,zr),r);break}Ss(t,un,zr);break;case 5:Ss(t,un,zr);break;default:throw Error(X(329))}}}return mn(t,dt()),t.callbackNode===n?qE.bind(null,t):null}function Sp(t,e){var n=tu;return t.current.memoizedState.isDehydrated&&(Os(t,e).flags|=256),t=ad(t,e),t!==2&&(e=un,un=n,e!==null&&bp(e)),t}function bp(t){un===null?un=t:un.push.apply(un,t)}function Eb(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!rr(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ai(t,e){for(e&=~Xg,e&=~Kd,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-er(e),r=1<<n;t[n]=-1,e&=~r}}function Zv(t){if(Me&6)throw Error(X(327));ha();var e=Wh(t,0);if(!(e&1))return mn(t,dt()),null;var n=ad(t,e);if(t.tag!==0&&n===2){var r=Jm(t);r!==0&&(e=r,n=Sp(t,r))}if(n===1)throw n=Pu,Os(t,0),Ai(t,e),mn(t,dt()),n;if(n===6)throw Error(X(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ss(t,un,zr),mn(t,dt()),null}function e_(t,e){var n=Me;Me|=1;try{return t(e)}finally{Me=n,Me===0&&(ka=dt()+500,Wd&&as())}}function Ws(t){Di!==null&&Di.tag===0&&!(Me&6)&&ha();var e=Me;Me|=1;var n=Un.transition,r=Fe;try{if(Un.transition=null,Fe=1,t)return t()}finally{Fe=r,Un.transition=n,Me=e,!(Me&6)&&as()}}function t_(){yn=ia.current,Ze(ia)}function Os(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,XS(n)),_t!==null)for(n=_t.return;n!==null;){var r=n;switch(Og(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Gh();break;case 3:Ea(),Ze(dn),Ze(Qt),Hg();break;case 5:Wg(r);break;case 4:Ea();break;case 13:Ze(tt);break;case 19:Ze(tt);break;case 10:Fg(r.type._context);break;case 22:case 23:t_()}n=n.return}if(Rt=t,_t=t=qi(t.current,null),Ft=yn=e,Tt=0,Pu=null,Xg=Kd=Bs=0,un=tu=null,Ns!==null){for(e=0;e<Ns.length;e++)if(n=Ns[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var a=o.next;o.next=i,r.next=a}n.pending=r}Ns=null}return t}function KE(t,e){do{var n=_t;try{if(Vg(),Eh.current=rd,nd){for(var r=nt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}nd=!1}if(zs=0,Ct=xt=nt=null,Jl=!1,Tu=0,Yg.current=null,n===null||n.return===null){Tt=1,Pu=e,_t=null;break}e:{var o=t,a=n.return,c=n,d=e;if(e=Ft,c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var m=d,_=c,v=_.tag;if(!(_.mode&1)&&(v===0||v===11||v===15)){var x=_.alternate;x?(_.updateQueue=x.updateQueue,_.memoizedState=x.memoizedState,_.lanes=x.lanes):(_.updateQueue=null,_.memoizedState=null)}var S=Dv(a);if(S!==null){S.flags&=-257,jv(S,a,c,o,e),S.mode&1&&Ov(o,m,e),e=S,d=m;var C=e.updateQueue;if(C===null){var R=new Set;R.add(d),e.updateQueue=R}else C.add(d);break e}else{if(!(e&1)){Ov(o,m,e),n_();break e}d=Error(X(426))}}else if(Xe&&c.mode&1){var F=Dv(a);if(F!==null){!(F.flags&65536)&&(F.flags|=256),jv(F,a,c,o,e),Dg(Ta(d,c));break e}}o=d=Ta(d,c),Tt!==4&&(Tt=2),tu===null?tu=[o]:tu.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var b=CE(o,d,e);Av(o,b);break e;case 1:c=d;var T=o.type,P=o.stateNode;if(!(o.flags&128)&&(typeof T.getDerivedStateFromError=="function"||P!==null&&typeof P.componentDidCatch=="function"&&(Hi===null||!Hi.has(P)))){o.flags|=65536,e&=-e,o.lanes|=e;var z=NE(o,c,e);Av(o,z);break e}}o=o.return}while(o!==null)}QE(n)}catch(K){e=K,_t===n&&n!==null&&(_t=n=n.return);continue}break}while(!0)}function GE(){var t=id.current;return id.current=rd,t===null?rd:t}function n_(){(Tt===0||Tt===3||Tt===2)&&(Tt=4),Rt===null||!(Bs&268435455)&&!(Kd&268435455)||Ai(Rt,Ft)}function ad(t,e){var n=Me;Me|=2;var r=GE();(Rt!==t||Ft!==e)&&(zr=null,Os(t,e));do try{Tb();break}catch(i){KE(t,i)}while(!0);if(Vg(),Me=n,id.current=r,_t!==null)throw Error(X(261));return Rt=null,Ft=0,Tt}function Tb(){for(;_t!==null;)ZE(_t)}function kb(){for(;_t!==null&&!ZP();)ZE(_t)}function ZE(t){var e=XE(t.alternate,t,yn);t.memoizedProps=t.pendingProps,e===null?QE(t):_t=e,Yg.current=null}function QE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=_b(n,e),n!==null){n.flags&=32767,_t=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Tt=6,_t=null;return}}else if(n=gb(n,e,yn),n!==null){_t=n;return}if(e=e.sibling,e!==null){_t=e;return}_t=e=t}while(e!==null);Tt===0&&(Tt=5)}function Ss(t,e,n){var r=Fe,i=Un.transition;try{Un.transition=null,Fe=1,Ib(t,e,n,r)}finally{Un.transition=i,Fe=r}return null}function Ib(t,e,n,r){do ha();while(Di!==null);if(Me&6)throw Error(X(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(X(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(sS(t,o),t===Rt&&(_t=Rt=null,Ft=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||oh||(oh=!0,JE(Bh,function(){return ha(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Un.transition,Un.transition=null;var a=Fe;Fe=1;var c=Me;Me|=4,Yg.current=null,vb(t,n),HE(n,t),$S(sp),Hh=!!ip,sp=ip=null,t.current=n,wb(n),QP(),Me=c,Fe=a,Un.transition=o}else t.current=n;if(oh&&(oh=!1,Di=t,od=i),o=t.pendingLanes,o===0&&(Hi=null),JP(n.stateNode),mn(t,dt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(sd)throw sd=!1,t=Ip,Ip=null,t;return od&1&&t.tag!==0&&ha(),o=t.pendingLanes,o&1?t===Pp?nu++:(nu=0,Pp=t):nu=0,as(),null}function ha(){if(Di!==null){var t=Cx(od),e=Un.transition,n=Fe;try{if(Un.transition=null,Fe=16>t?16:t,Di===null)var r=!1;else{if(t=Di,Di=null,od=0,Me&6)throw Error(X(331));var i=Me;for(Me|=4,re=t.current;re!==null;){var o=re,a=o.child;if(re.flags&16){var c=o.deletions;if(c!==null){for(var d=0;d<c.length;d++){var m=c[d];for(re=m;re!==null;){var _=re;switch(_.tag){case 0:case 11:case 15:eu(8,_,o)}var v=_.child;if(v!==null)v.return=_,re=v;else for(;re!==null;){_=re;var x=_.sibling,S=_.return;if(zE(_),_===m){re=null;break}if(x!==null){x.return=S,re=x;break}re=S}}}var C=o.alternate;if(C!==null){var R=C.child;if(R!==null){C.child=null;do{var F=R.sibling;R.sibling=null,R=F}while(R!==null)}}re=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,re=a;else e:for(;re!==null;){if(o=re,o.flags&2048)switch(o.tag){case 0:case 11:case 15:eu(9,o,o.return)}var b=o.sibling;if(b!==null){b.return=o.return,re=b;break e}re=o.return}}var T=t.current;for(re=T;re!==null;){a=re;var P=a.child;if(a.subtreeFlags&2064&&P!==null)P.return=a,re=P;else e:for(a=T;re!==null;){if(c=re,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:qd(9,c)}}catch(K){at(c,c.return,K)}if(c===a){re=null;break e}var z=c.sibling;if(z!==null){z.return=c.return,re=z;break e}re=c.return}}if(Me=i,as(),wr&&typeof wr.onPostCommitFiberRoot=="function")try{wr.onPostCommitFiberRoot(Vd,t)}catch{}r=!0}return r}finally{Fe=n,Un.transition=e}}return!1}function Qv(t,e,n){e=Ta(n,e),e=CE(t,e,1),t=Wi(t,e,1),e=rn(),t!==null&&(Bu(t,1,e),mn(t,e))}function at(t,e,n){if(t.tag===3)Qv(t,t,n);else for(;e!==null;){if(e.tag===3){Qv(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Hi===null||!Hi.has(r))){t=Ta(n,t),t=NE(e,t,1),e=Wi(e,t,1),t=rn(),e!==null&&(Bu(e,1,t),mn(e,t));break}}e=e.return}}function Pb(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=rn(),t.pingedLanes|=t.suspendedLanes&n,Rt===t&&(Ft&n)===n&&(Tt===4||Tt===3&&(Ft&130023424)===Ft&&500>dt()-Jg?Os(t,0):Xg|=n),mn(t,e)}function YE(t,e){e===0&&(t.mode&1?(e=Qc,Qc<<=1,!(Qc&130023424)&&(Qc=4194304)):e=1);var n=rn();t=ei(t,e),t!==null&&(Bu(t,e,n),mn(t,n))}function Sb(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),YE(t,n)}function bb(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(X(314))}r!==null&&r.delete(e),YE(t,n)}var XE;XE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||dn.current)hn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return hn=!1,pb(t,e,n);hn=!!(t.flags&131072)}else hn=!1,Xe&&e.flags&1048576&&nE(e,Yh,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;kh(t,e),t=e.pendingProps;var i=va(e,Qt.current);ca(e,n),i=qg(null,e,r,t,i,n);var o=Kg();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,fn(r)?(o=!0,Zh(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,zg(e),i.updater=$d,e.stateNode=i,i._reactInternals=e,mp(e,r,t,n),e=_p(null,e,r,!0,o,n)):(e.tag=0,Xe&&o&&Mg(e),nn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(kh(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Cb(r),t=Yn(r,t),i){case 0:e=gp(null,e,r,t,n);break e;case 1:e=Uv(null,e,r,t,n);break e;case 11:e=Vv(null,e,r,t,n);break e;case 14:e=Fv(null,e,r,Yn(r.type,t),n);break e}throw Error(X(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Yn(r,i),gp(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Yn(r,i),Uv(t,e,r,i,n);case 3:e:{if(OE(e),t===null)throw Error(X(387));r=e.pendingProps,o=e.memoizedState,i=o.element,lE(t,e),ed(e,r,null,n);var a=e.memoizedState;if(r=a.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=Ta(Error(X(423)),e),e=zv(t,e,r,n,i);break e}else if(r!==i){i=Ta(Error(X(424)),e),e=zv(t,e,r,n,i);break e}else for(wn=Bi(e.stateNode.containerInfo.firstChild),Tn=e,Xe=!0,Jn=null,n=oE(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(wa(),r===i){e=ti(t,e,n);break e}nn(t,e,r,n)}e=e.child}return e;case 5:return uE(e),t===null&&hp(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,a=i.children,op(r,i)?a=null:o!==null&&op(r,o)&&(e.flags|=32),ME(t,e),nn(t,e,a,n),e.child;case 6:return t===null&&hp(e),null;case 13:return DE(t,e,n);case 4:return Bg(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=xa(e,null,r,n):nn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Yn(r,i),Vv(t,e,r,i,n);case 7:return nn(t,e,e.pendingProps,n),e.child;case 8:return nn(t,e,e.pendingProps.children,n),e.child;case 12:return nn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,a=i.value,$e(Xh,r._currentValue),r._currentValue=a,o!==null)if(rr(o.value,a)){if(o.children===i.children&&!dn.current){e=ti(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var c=o.dependencies;if(c!==null){a=o.child;for(var d=c.firstContext;d!==null;){if(d.context===r){if(o.tag===1){d=Qr(-1,n&-n),d.tag=2;var m=o.updateQueue;if(m!==null){m=m.shared;var _=m.pending;_===null?d.next=d:(d.next=_.next,_.next=d),m.pending=d}}o.lanes|=n,d=o.alternate,d!==null&&(d.lanes|=n),dp(o.return,n,e),c.lanes|=n;break}d=d.next}}else if(o.tag===10)a=o.type===e.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(X(341));a.lanes|=n,c=a.alternate,c!==null&&(c.lanes|=n),dp(a,n,e),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===e){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}nn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,ca(e,n),i=Bn(i),r=r(i),e.flags|=1,nn(t,e,r,n),e.child;case 14:return r=e.type,i=Yn(r,e.pendingProps),i=Yn(r.type,i),Fv(t,e,r,i,n);case 15:return RE(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Yn(r,i),kh(t,e),e.tag=1,fn(r)?(t=!0,Zh(e)):t=!1,ca(e,n),AE(e,r,i),mp(e,r,i,n),_p(null,e,r,!0,t,n);case 19:return jE(t,e,n);case 22:return LE(t,e,n)}throw Error(X(156,e.tag))};function JE(t,e){return Px(t,e)}function Ab(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fn(t,e,n,r){return new Ab(t,e,n,r)}function r_(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Cb(t){if(typeof t=="function")return r_(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Eg)return 11;if(t===Tg)return 14}return 2}function qi(t,e){var n=t.alternate;return n===null?(n=Fn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Sh(t,e,n,r,i,o){var a=2;if(r=t,typeof t=="function")r_(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Go:return Ds(n.children,i,o,e);case xg:a=8,i|=8;break;case Vm:return t=Fn(12,n,e,i|2),t.elementType=Vm,t.lanes=o,t;case Fm:return t=Fn(13,n,e,i),t.elementType=Fm,t.lanes=o,t;case Um:return t=Fn(19,n,e,i),t.elementType=Um,t.lanes=o,t;case ux:return Gd(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ax:a=10;break e;case lx:a=9;break e;case Eg:a=11;break e;case Tg:a=14;break e;case Ii:a=16,r=null;break e}throw Error(X(130,t==null?t:typeof t,""))}return e=Fn(a,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function Ds(t,e,n,r){return t=Fn(7,t,r,e),t.lanes=n,t}function Gd(t,e,n,r){return t=Fn(22,t,r,e),t.elementType=ux,t.lanes=n,t.stateNode={isHidden:!1},t}function _m(t,e,n){return t=Fn(6,t,null,e),t.lanes=n,t}function ym(t,e,n){return e=Fn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Nb(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Xf(0),this.expirationTimes=Xf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xf(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function i_(t,e,n,r,i,o,a,c,d){return t=new Nb(t,e,n,c,d),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Fn(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},zg(o),t}function Rb(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ko,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function eT(t){if(!t)return Ji;t=t._reactInternals;e:{if(Xs(t)!==t||t.tag!==1)throw Error(X(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(fn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(X(171))}if(t.tag===1){var n=t.type;if(fn(n))return eE(t,n,e)}return e}function tT(t,e,n,r,i,o,a,c,d){return t=i_(n,r,!0,t,i,o,a,c,d),t.context=eT(null),n=t.current,r=rn(),i=$i(n),o=Qr(r,i),o.callback=e??null,Wi(n,o,i),t.current.lanes=i,Bu(t,i,r),mn(t,r),t}function Zd(t,e,n,r){var i=e.current,o=rn(),a=$i(i);return n=eT(n),e.context===null?e.context=n:e.pendingContext=n,e=Qr(o,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Wi(i,e,a),t!==null&&(tr(t,i,a,o),xh(t,i,a)),a}function ld(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Yv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function s_(t,e){Yv(t,e),(t=t.alternate)&&Yv(t,e)}function Lb(){return null}var nT=typeof reportError=="function"?reportError:function(t){console.error(t)};function o_(t){this._internalRoot=t}Qd.prototype.render=o_.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(X(409));Zd(t,e,null,null)};Qd.prototype.unmount=o_.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ws(function(){Zd(null,t,null,null)}),e[Jr]=null}};function Qd(t){this._internalRoot=t}Qd.prototype.unstable_scheduleHydration=function(t){if(t){var e=Lx();t={blockedOn:null,target:t,priority:e};for(var n=0;n<bi.length&&e!==0&&e<bi[n].priority;n++);bi.splice(n,0,t),n===0&&Ox(t)}};function a_(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Yd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Xv(){}function Mb(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var m=ld(a);o.call(m)}}var a=tT(e,r,t,0,null,!1,!1,"",Xv);return t._reactRootContainer=a,t[Jr]=a.current,yu(t.nodeType===8?t.parentNode:t),Ws(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var c=r;r=function(){var m=ld(d);c.call(m)}}var d=i_(t,0,!1,null,null,!1,!1,"",Xv);return t._reactRootContainer=d,t[Jr]=d.current,yu(t.nodeType===8?t.parentNode:t),Ws(function(){Zd(e,d,n,r)}),d}function Xd(t,e,n,r,i){var o=n._reactRootContainer;if(o){var a=o;if(typeof i=="function"){var c=i;i=function(){var d=ld(a);c.call(d)}}Zd(e,a,t,i)}else a=Mb(n,e,t,i,r);return ld(a)}Nx=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ul(e.pendingLanes);n!==0&&(Pg(e,n|1),mn(e,dt()),!(Me&6)&&(ka=dt()+500,as()))}break;case 13:Ws(function(){var r=ei(t,1);if(r!==null){var i=rn();tr(r,t,1,i)}}),s_(t,1)}};Sg=function(t){if(t.tag===13){var e=ei(t,134217728);if(e!==null){var n=rn();tr(e,t,134217728,n)}s_(t,134217728)}};Rx=function(t){if(t.tag===13){var e=$i(t),n=ei(t,e);if(n!==null){var r=rn();tr(n,t,e,r)}s_(t,e)}};Lx=function(){return Fe};Mx=function(t,e){var n=Fe;try{return Fe=t,e()}finally{Fe=n}};Qm=function(t,e,n){switch(e){case"input":if(Wm(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Bd(r);if(!i)throw Error(X(90));hx(r),Wm(r,i)}}}break;case"textarea":fx(t,n);break;case"select":e=n.value,e!=null&&oa(t,!!n.multiple,e,!1)}};wx=e_;xx=Ws;var Ob={usingClientEntryPoint:!1,Events:[Hu,Xo,Bd,yx,vx,e_]},Ml={findFiberByHostInstance:Cs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Db={bundleType:Ml.bundleType,version:Ml.version,rendererPackageName:Ml.rendererPackageName,rendererConfig:Ml.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:li.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=kx(t),t===null?null:t.stateNode},findFiberByHostInstance:Ml.findFiberByHostInstance||Lb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ah=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ah.isDisabled&&ah.supportsFiber)try{Vd=ah.inject(Db),wr=ah}catch{}}Sn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ob;Sn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!a_(e))throw Error(X(200));return Rb(t,e,null,n)};Sn.createRoot=function(t,e){if(!a_(t))throw Error(X(299));var n=!1,r="",i=nT;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=i_(t,1,!1,null,null,n,!1,r,i),t[Jr]=e.current,yu(t.nodeType===8?t.parentNode:t),new o_(e)};Sn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(X(188)):(t=Object.keys(t).join(","),Error(X(268,t)));return t=kx(e),t=t===null?null:t.stateNode,t};Sn.flushSync=function(t){return Ws(t)};Sn.hydrate=function(t,e,n){if(!Yd(e))throw Error(X(200));return Xd(null,t,e,!0,n)};Sn.hydrateRoot=function(t,e,n){if(!a_(t))throw Error(X(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",a=nT;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=tT(e,null,t,1,n??null,i,!1,o,a),t[Jr]=e.current,yu(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Qd(e)};Sn.render=function(t,e,n){if(!Yd(e))throw Error(X(200));return Xd(null,t,e,!1,n)};Sn.unmountComponentAtNode=function(t){if(!Yd(t))throw Error(X(40));return t._reactRootContainer?(Ws(function(){Xd(null,null,t,!1,function(){t._reactRootContainer=null,t[Jr]=null})}),!0):!1};Sn.unstable_batchedUpdates=e_;Sn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Yd(n))throw Error(X(200));if(t==null||t._reactInternals===void 0)throw Error(X(38));return Xd(t,e,n,!1,r)};Sn.version="18.3.1-next-f1338f8080-20240426";function rT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(rT)}catch(t){console.error(t)}}rT(),rx.exports=Sn;var iT=rx.exports,sT,Jv=iT;sT=Jv.createRoot,Jv.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Su(){return Su=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Su.apply(this,arguments)}var ji;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ji||(ji={}));const e0="popstate";function jb(t){t===void 0&&(t={});function e(r,i){let{pathname:o,search:a,hash:c}=r.location;return Ap("",{pathname:o,search:a,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:ud(i)}return Fb(e,n,null,t)}function rt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function l_(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Vb(){return Math.random().toString(36).substr(2,8)}function t0(t,e){return{usr:t.state,key:t.key,idx:e}}function Ap(t,e,n,r){return n===void 0&&(n=null),Su({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Fa(e):e,{state:n,key:e&&e.key||r||Vb()})}function ud(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Fa(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function Fb(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,a=i.history,c=ji.Pop,d=null,m=_();m==null&&(m=0,a.replaceState(Su({},a.state,{idx:m}),""));function _(){return(a.state||{idx:null}).idx}function v(){c=ji.Pop;let F=_(),b=F==null?null:F-m;m=F,d&&d({action:c,location:R.location,delta:b})}function x(F,b){c=ji.Push;let T=Ap(R.location,F,b);m=_()+1;let P=t0(T,m),z=R.createHref(T);try{a.pushState(P,"",z)}catch(K){if(K instanceof DOMException&&K.name==="DataCloneError")throw K;i.location.assign(z)}o&&d&&d({action:c,location:R.location,delta:1})}function S(F,b){c=ji.Replace;let T=Ap(R.location,F,b);m=_();let P=t0(T,m),z=R.createHref(T);a.replaceState(P,"",z),o&&d&&d({action:c,location:R.location,delta:0})}function C(F){let b=i.location.origin!=="null"?i.location.origin:i.location.href,T=typeof F=="string"?F:ud(F);return T=T.replace(/ $/,"%20"),rt(b,"No window.location.(origin|href) available to create URL for href: "+T),new URL(T,b)}let R={get action(){return c},get location(){return t(i,a)},listen(F){if(d)throw new Error("A history only accepts one active listener");return i.addEventListener(e0,v),d=F,()=>{i.removeEventListener(e0,v),d=null}},createHref(F){return e(i,F)},createURL:C,encodeLocation(F){let b=C(F);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:x,replace:S,go(F){return a.go(F)}};return R}var n0;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(n0||(n0={}));function Ub(t,e,n){return n===void 0&&(n="/"),zb(t,e,n)}function zb(t,e,n,r){let i=typeof e=="string"?Fa(e):e,o=Ia(i.pathname||"/",n);if(o==null)return null;let a=oT(t);Bb(a);let c=null;for(let d=0;c==null&&d<a.length;++d){let m=Jb(o);c=Yb(a[d],m)}return c}function oT(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(o,a,c)=>{let d={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};d.relativePath.startsWith("/")&&(rt(d.relativePath.startsWith(r),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(r.length));let m=Ki([r,d.relativePath]),_=n.concat(d);o.children&&o.children.length>0&&(rt(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+m+'".')),oT(o.children,e,_,m)),!(o.path==null&&!o.index)&&e.push({path:m,score:Zb(m,o.index),routesMeta:_})};return t.forEach((o,a)=>{var c;if(o.path===""||!((c=o.path)!=null&&c.includes("?")))i(o,a);else for(let d of aT(o.path))i(o,a,d)}),e}function aT(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let a=aT(r.join("/")),c=[];return c.push(...a.map(d=>d===""?o:[o,d].join("/"))),i&&c.push(...a),c.map(d=>t.startsWith("/")&&d===""?"/":d)}function Bb(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Qb(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Wb=/^:[\w-]+$/,Hb=3,$b=2,qb=1,Kb=10,Gb=-2,r0=t=>t==="*";function Zb(t,e){let n=t.split("/"),r=n.length;return n.some(r0)&&(r+=Gb),e&&(r+=$b),n.filter(i=>!r0(i)).reduce((i,o)=>i+(Wb.test(o)?Hb:o===""?qb:Kb),r)}function Qb(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function Yb(t,e,n){let{routesMeta:r}=t,i={},o="/",a=[];for(let c=0;c<r.length;++c){let d=r[c],m=c===r.length-1,_=o==="/"?e:e.slice(o.length)||"/",v=Cp({path:d.relativePath,caseSensitive:d.caseSensitive,end:m},_),x=d.route;if(!v)return null;Object.assign(i,v.params),a.push({params:i,pathname:Ki([o,v.pathname]),pathnameBase:iA(Ki([o,v.pathnameBase])),route:x}),v.pathnameBase!=="/"&&(o=Ki([o,v.pathnameBase]))}return a}function Cp(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=Xb(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let o=i[0],a=o.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:r.reduce((m,_,v)=>{let{paramName:x,isOptional:S}=_;if(x==="*"){let R=c[v]||"";a=o.slice(0,o.length-R.length).replace(/(.)\/+$/,"$1")}const C=c[v];return S&&!C?m[x]=void 0:m[x]=(C||"").replace(/%2F/g,"/"),m},{}),pathname:o,pathnameBase:a,pattern:t}}function Xb(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),l_(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,c,d)=>(r.push({paramName:c,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function Jb(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return l_(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Ia(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const eA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,tA=t=>eA.test(t);function nA(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Fa(t):t,o;if(n)if(tA(n))o=n;else{if(n.includes("//")){let a=n;n=n.replace(/\/\/+/g,"/"),l_(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+n))}n.startsWith("/")?o=i0(n.substring(1),"/"):o=i0(n,e)}else o=e;return{pathname:o,search:sA(r),hash:oA(i)}}function i0(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function vm(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function rA(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function u_(t,e){let n=rA(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function c_(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Fa(t):(i=Su({},t),rt(!i.pathname||!i.pathname.includes("?"),vm("?","pathname","search",i)),rt(!i.pathname||!i.pathname.includes("#"),vm("#","pathname","hash",i)),rt(!i.search||!i.search.includes("#"),vm("#","search","hash",i)));let o=t===""||i.pathname==="",a=o?"/":i.pathname,c;if(a==null)c=n;else{let v=e.length-1;if(!r&&a.startsWith("..")){let x=a.split("/");for(;x[0]==="..";)x.shift(),v-=1;i.pathname=x.join("/")}c=v>=0?e[v]:"/"}let d=nA(i,c),m=a&&a!=="/"&&a.endsWith("/"),_=(o||a===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(m||_)&&(d.pathname+="/"),d}const Ki=t=>t.join("/").replace(/\/\/+/g,"/"),iA=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),sA=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,oA=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function aA(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const lT=["post","put","patch","delete"];new Set(lT);const lA=["get",...lT];new Set(lA);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bu(){return bu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bu.apply(this,arguments)}const Jd=O.createContext(null),uT=O.createContext(null),ui=O.createContext(null),ef=O.createContext(null),ci=O.createContext({outlet:null,matches:[],isDataRoute:!1}),cT=O.createContext(null);function uA(t,e){let{relative:n}=e===void 0?{}:e;Ua()||rt(!1);let{basename:r,navigator:i}=O.useContext(ui),{hash:o,pathname:a,search:c}=nf(t,{relative:n}),d=a;return r!=="/"&&(d=a==="/"?r:Ki([r,a])),i.createHref({pathname:d,search:c,hash:o})}function Ua(){return O.useContext(ef)!=null}function ls(){return Ua()||rt(!1),O.useContext(ef).location}function hT(t){O.useContext(ui).static||O.useLayoutEffect(t)}function tf(){let{isDataRoute:t}=O.useContext(ci);return t?kA():cA()}function cA(){Ua()||rt(!1);let t=O.useContext(Jd),{basename:e,future:n,navigator:r}=O.useContext(ui),{matches:i}=O.useContext(ci),{pathname:o}=ls(),a=JSON.stringify(u_(i,n.v7_relativeSplatPath)),c=O.useRef(!1);return hT(()=>{c.current=!0}),O.useCallback(function(m,_){if(_===void 0&&(_={}),!c.current)return;if(typeof m=="number"){r.go(m);return}let v=c_(m,JSON.parse(a),o,_.relative==="path");t==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:Ki([e,v.pathname])),(_.replace?r.replace:r.push)(v,_.state,_)},[e,r,a,o,t])}const hA=O.createContext(null);function dA(t){let e=O.useContext(ci).outlet;return e&&O.createElement(hA.Provider,{value:t},e)}function nf(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=O.useContext(ui),{matches:i}=O.useContext(ci),{pathname:o}=ls(),a=JSON.stringify(u_(i,r.v7_relativeSplatPath));return O.useMemo(()=>c_(t,JSON.parse(a),o,n==="path"),[t,a,o,n])}function fA(t,e){return mA(t,e)}function mA(t,e,n,r){Ua()||rt(!1);let{navigator:i}=O.useContext(ui),{matches:o}=O.useContext(ci),a=o[o.length-1],c=a?a.params:{};a&&a.pathname;let d=a?a.pathnameBase:"/";a&&a.route;let m=ls(),_;if(e){var v;let F=typeof e=="string"?Fa(e):e;d==="/"||(v=F.pathname)!=null&&v.startsWith(d)||rt(!1),_=F}else _=m;let x=_.pathname||"/",S=x;if(d!=="/"){let F=d.replace(/^\//,"").split("/");S="/"+x.replace(/^\//,"").split("/").slice(F.length).join("/")}let C=Ub(t,{pathname:S}),R=vA(C&&C.map(F=>Object.assign({},F,{params:Object.assign({},c,F.params),pathname:Ki([d,i.encodeLocation?i.encodeLocation(F.pathname).pathname:F.pathname]),pathnameBase:F.pathnameBase==="/"?d:Ki([d,i.encodeLocation?i.encodeLocation(F.pathnameBase).pathname:F.pathnameBase])})),o,n,r);return e&&R?O.createElement(ef.Provider,{value:{location:bu({pathname:"/",search:"",hash:"",state:null,key:"default"},_),navigationType:ji.Pop}},R):R}function pA(){let t=TA(),e=aA(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},e),n?O.createElement("pre",{style:i},n):null,null)}const gA=O.createElement(pA,null);class _A extends O.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?O.createElement(ci.Provider,{value:this.props.routeContext},O.createElement(cT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function yA(t){let{routeContext:e,match:n,children:r}=t,i=O.useContext(Jd);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),O.createElement(ci.Provider,{value:e},r)}function vA(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var o;if(!n)return null;if(n.errors)t=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,c=(i=n)==null?void 0:i.errors;if(c!=null){let _=a.findIndex(v=>v.route.id&&(c==null?void 0:c[v.route.id])!==void 0);_>=0||rt(!1),a=a.slice(0,Math.min(a.length,_+1))}let d=!1,m=-1;if(n&&r&&r.v7_partialHydration)for(let _=0;_<a.length;_++){let v=a[_];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(m=_),v.route.id){let{loaderData:x,errors:S}=n,C=v.route.loader&&x[v.route.id]===void 0&&(!S||S[v.route.id]===void 0);if(v.route.lazy||C){d=!0,m>=0?a=a.slice(0,m+1):a=[a[0]];break}}}return a.reduceRight((_,v,x)=>{let S,C=!1,R=null,F=null;n&&(S=c&&v.route.id?c[v.route.id]:void 0,R=v.route.errorElement||gA,d&&(m<0&&x===0?(IA("route-fallback"),C=!0,F=null):m===x&&(C=!0,F=v.route.hydrateFallbackElement||null)));let b=e.concat(a.slice(0,x+1)),T=()=>{let P;return S?P=R:C?P=F:v.route.Component?P=O.createElement(v.route.Component,null):v.route.element?P=v.route.element:P=_,O.createElement(yA,{match:v,routeContext:{outlet:_,matches:b,isDataRoute:n!=null},children:P})};return n&&(v.route.ErrorBoundary||v.route.errorElement||x===0)?O.createElement(_A,{location:n.location,revalidation:n.revalidation,component:R,error:S,children:T(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):T()},null)}var dT=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(dT||{}),fT=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(fT||{});function wA(t){let e=O.useContext(Jd);return e||rt(!1),e}function xA(t){let e=O.useContext(uT);return e||rt(!1),e}function EA(t){let e=O.useContext(ci);return e||rt(!1),e}function mT(t){let e=EA(),n=e.matches[e.matches.length-1];return n.route.id||rt(!1),n.route.id}function TA(){var t;let e=O.useContext(cT),n=xA(),r=mT();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function kA(){let{router:t}=wA(dT.UseNavigateStable),e=mT(fT.UseNavigateStable),n=O.useRef(!1);return hT(()=>{n.current=!0}),O.useCallback(function(i,o){o===void 0&&(o={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,bu({fromRouteId:e},o)))},[t,e])}const s0={};function IA(t,e,n){s0[t]||(s0[t]=!0)}function PA(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Ls(t){let{to:e,replace:n,state:r,relative:i}=t;Ua()||rt(!1);let{future:o,static:a}=O.useContext(ui),{matches:c}=O.useContext(ci),{pathname:d}=ls(),m=tf(),_=c_(e,u_(c,o.v7_relativeSplatPath),d,i==="path"),v=JSON.stringify(_);return O.useEffect(()=>m(JSON.parse(v),{replace:n,state:r,relative:i}),[m,v,i,n,r]),null}function pT(t){return dA(t.context)}function bt(t){rt(!1)}function SA(t){let{basename:e="/",children:n=null,location:r,navigationType:i=ji.Pop,navigator:o,static:a=!1,future:c}=t;Ua()&&rt(!1);let d=e.replace(/^\/*/,"/"),m=O.useMemo(()=>({basename:d,navigator:o,static:a,future:bu({v7_relativeSplatPath:!1},c)}),[d,c,o,a]);typeof r=="string"&&(r=Fa(r));let{pathname:_="/",search:v="",hash:x="",state:S=null,key:C="default"}=r,R=O.useMemo(()=>{let F=Ia(_,d);return F==null?null:{location:{pathname:F,search:v,hash:x,state:S,key:C},navigationType:i}},[d,_,v,x,S,C,i]);return R==null?null:O.createElement(ui.Provider,{value:m},O.createElement(ef.Provider,{children:n,value:R}))}function bA(t){let{children:e,location:n}=t;return fA(Np(e),n)}new Promise(()=>{});function Np(t,e){e===void 0&&(e=[]);let n=[];return O.Children.forEach(t,(r,i)=>{if(!O.isValidElement(r))return;let o=[...e,i];if(r.type===O.Fragment){n.push.apply(n,Np(r.props.children,o));return}r.type!==bt&&rt(!1),!r.props.index||!r.props.children||rt(!1);let a={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=Np(r.props.children,o)),n.push(a)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function cd(){return cd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cd.apply(this,arguments)}function gT(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function AA(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function CA(t,e){return t.button===0&&(!e||e==="_self")&&!AA(t)}const NA=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],RA=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],LA="6";try{window.__reactRouterVersion=LA}catch{}const MA=O.createContext({isTransitioning:!1}),OA="startTransition",o0=PP[OA];function DA(t){let{basename:e,children:n,future:r,window:i}=t,o=O.useRef();o.current==null&&(o.current=jb({window:i,v5Compat:!0}));let a=o.current,[c,d]=O.useState({action:a.action,location:a.location}),{v7_startTransition:m}=r||{},_=O.useCallback(v=>{m&&o0?o0(()=>d(v)):d(v)},[d,m]);return O.useLayoutEffect(()=>a.listen(_),[a,_]),O.useEffect(()=>PA(r),[r]),O.createElement(SA,{basename:e,children:n,location:c.location,navigationType:c.action,navigator:a,future:r})}const jA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",VA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,FA=O.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:o,replace:a,state:c,target:d,to:m,preventScrollReset:_,viewTransition:v}=e,x=gT(e,NA),{basename:S}=O.useContext(ui),C,R=!1;if(typeof m=="string"&&VA.test(m)&&(C=m,jA))try{let P=new URL(window.location.href),z=m.startsWith("//")?new URL(P.protocol+m):new URL(m),K=Ia(z.pathname,S);z.origin===P.origin&&K!=null?m=K+z.search+z.hash:R=!0}catch{}let F=uA(m,{relative:i}),b=BA(m,{replace:a,state:c,target:d,preventScrollReset:_,relative:i,viewTransition:v});function T(P){r&&r(P),P.defaultPrevented||b(P)}return O.createElement("a",cd({},x,{href:C||F,onClick:R||o?r:T,ref:n,target:d}))}),UA=O.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:i=!1,className:o="",end:a=!1,style:c,to:d,viewTransition:m,children:_}=e,v=gT(e,RA),x=nf(d,{relative:v.relative}),S=ls(),C=O.useContext(uT),{navigator:R,basename:F}=O.useContext(ui),b=C!=null&&WA(x)&&m===!0,T=R.encodeLocation?R.encodeLocation(x).pathname:x.pathname,P=S.pathname,z=C&&C.navigation&&C.navigation.location?C.navigation.location.pathname:null;i||(P=P.toLowerCase(),z=z?z.toLowerCase():null,T=T.toLowerCase()),z&&F&&(z=Ia(z,F)||z);const K=T!=="/"&&T.endsWith("/")?T.length-1:T.length;let $=P===T||!a&&P.startsWith(T)&&P.charAt(K)==="/",A=z!=null&&(z===T||!a&&z.startsWith(T)&&z.charAt(T.length)==="/"),k={isActive:$,isPending:A,isTransitioning:b},N=$?r:void 0,j;typeof o=="function"?j=o(k):j=[o,$?"active":null,A?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let U=typeof c=="function"?c(k):c;return O.createElement(FA,cd({},v,{"aria-current":N,className:j,ref:n,style:U,to:d,viewTransition:m}),typeof _=="function"?_(k):_)});var Rp;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Rp||(Rp={}));var a0;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(a0||(a0={}));function zA(t){let e=O.useContext(Jd);return e||rt(!1),e}function BA(t,e){let{target:n,replace:r,state:i,preventScrollReset:o,relative:a,viewTransition:c}=e===void 0?{}:e,d=tf(),m=ls(),_=nf(t,{relative:a});return O.useCallback(v=>{if(CA(v,n)){v.preventDefault();let x=r!==void 0?r:ud(m)===ud(_);d(t,{replace:x,state:i,preventScrollReset:o,relative:a,viewTransition:c})}},[m,d,_,r,i,n,t,o,a,c])}function WA(t,e){e===void 0&&(e={});let n=O.useContext(MA);n==null&&rt(!1);let{basename:r}=zA(Rp.useViewTransitionState),i=nf(t,{relative:e.relative});if(!n.isTransitioning)return!1;let o=Ia(n.currentLocation.pathname,r)||n.currentLocation.pathname,a=Ia(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Cp(i.pathname,a)!=null||Cp(i.pathname,o)!=null}var l0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _T=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},HA=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=t[n++],a=t[n++],c=t[n++],d=((i&7)<<18|(o&63)<<12|(a&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(d>>10)),e[r++]=String.fromCharCode(56320+(d&1023))}else{const o=t[n++],a=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|a&63)}}return e.join("")},yT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const o=t[i],a=i+1<t.length,c=a?t[i+1]:0,d=i+2<t.length,m=d?t[i+2]:0,_=o>>2,v=(o&3)<<4|c>>4;let x=(c&15)<<2|m>>6,S=m&63;d||(S=64,a||(x=64)),r.push(n[_],n[v],n[x],n[S])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(_T(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):HA(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const o=n[t.charAt(i++)],c=i<t.length?n[t.charAt(i)]:0;++i;const m=i<t.length?n[t.charAt(i)]:64;++i;const v=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||c==null||m==null||v==null)throw new $A;const x=o<<2|c>>4;if(r.push(x),m!==64){const S=c<<4&240|m>>2;if(r.push(S),v!==64){const C=m<<6&192|v;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class $A extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const qA=function(t){const e=_T(t);return yT.encodeByteArray(e,!0)},hd=function(t){return qA(t).replace(/\./g,"")},vT=function(t){try{return yT.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GA=()=>KA().__FIREBASE_DEFAULTS__,ZA=()=>{if(typeof process>"u"||typeof l0>"u")return;const t=l0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},QA=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&vT(t[1]);return e&&JSON.parse(e)},rf=()=>{try{return GA()||ZA()||QA()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},wT=t=>{var e,n;return(n=(e=rf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},h_=t=>{const e=wT(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},xT=()=>{var t;return(t=rf())===null||t===void 0?void 0:t.config},ET=t=>{var e;return(e=rf())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TT(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[hd(JSON.stringify(n)),hd(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function XA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Yt())}function JA(){var t;const e=(t=rf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function eC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function tC(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function nC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function rC(){const t=Yt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function iC(){return!JA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function sC(){try{return typeof indexedDB=="object"}catch{return!1}}function oC(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aC="FirebaseError";class ar extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=aC,Object.setPrototypeOf(this,ar.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,qu.prototype.create)}}class qu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],a=o?lC(o,r):"Error",c=`${this.serviceName}: ${a} (${i}).`;return new ar(i,c,r)}}function lC(t,e){return t.replace(uC,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const uC=/\{\$([^}]+)}/g;function cC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function dd(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const o=t[i],a=e[i];if(u0(o)&&u0(a)){if(!dd(o,a))return!1}else if(o!==a)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function u0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ku(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Bl(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Wl(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function hC(t,e){const n=new dC(t,e);return n.subscribe.bind(n)}class dC{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");fC(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=wm),i.error===void 0&&(i.error=wm),i.complete===void 0&&(i.complete=wm);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function fC(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function wm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ze(t){return t&&t._delegate?t._delegate:t}class ni{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new YA;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(gC(e))try{this.getOrInitializeService({instanceIdentifier:bs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=bs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=bs){return this.instances.has(e)}getOptions(e=bs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,a]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(o);r===c&&a.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);const a=this.instances.get(i);return a&&e(a,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:pC(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=bs){return this.component?this.component.multipleInstances?e:bs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function pC(t){return t===bs?void 0:t}function gC(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new mC(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ne;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ne||(Ne={}));const yC={debug:Ne.DEBUG,verbose:Ne.VERBOSE,info:Ne.INFO,warn:Ne.WARN,error:Ne.ERROR,silent:Ne.SILENT},vC=Ne.INFO,wC={[Ne.DEBUG]:"log",[Ne.VERBOSE]:"log",[Ne.INFO]:"info",[Ne.WARN]:"warn",[Ne.ERROR]:"error"},xC=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=wC[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class d_{constructor(e){this.name=e,this._logLevel=vC,this._logHandler=xC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?yC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ne.DEBUG,...e),this._logHandler(this,Ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ne.VERBOSE,...e),this._logHandler(this,Ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ne.INFO,...e),this._logHandler(this,Ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ne.WARN,...e),this._logHandler(this,Ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ne.ERROR,...e),this._logHandler(this,Ne.ERROR,...e)}}const EC=(t,e)=>e.some(n=>t instanceof n);let c0,h0;function TC(){return c0||(c0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function kC(){return h0||(h0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const kT=new WeakMap,Lp=new WeakMap,IT=new WeakMap,xm=new WeakMap,f_=new WeakMap;function IC(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",a)},o=()=>{n(Gi(t.result)),i()},a=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&kT.set(n,t)}).catch(()=>{}),f_.set(e,t),e}function PC(t){if(Lp.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",a),t.removeEventListener("abort",a)},o=()=>{n(),i()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",a),t.addEventListener("abort",a)});Lp.set(t,e)}let Mp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Lp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||IT.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Gi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function SC(t){Mp=t(Mp)}function bC(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Em(this),e,...n);return IT.set(r,e.sort?e.sort():[e]),Gi(r)}:kC().includes(t)?function(...e){return t.apply(Em(this),e),Gi(kT.get(this))}:function(...e){return Gi(t.apply(Em(this),e))}}function AC(t){return typeof t=="function"?bC(t):(t instanceof IDBTransaction&&PC(t),EC(t,TC())?new Proxy(t,Mp):t)}function Gi(t){if(t instanceof IDBRequest)return IC(t);if(xm.has(t))return xm.get(t);const e=AC(t);return e!==t&&(xm.set(t,e),f_.set(e,t)),e}const Em=t=>f_.get(t);function CC(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const a=indexedDB.open(t,e),c=Gi(a);return r&&a.addEventListener("upgradeneeded",d=>{r(Gi(a.result),d.oldVersion,d.newVersion,Gi(a.transaction),d)}),n&&a.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),c.then(d=>{o&&d.addEventListener("close",()=>o()),i&&d.addEventListener("versionchange",m=>i(m.oldVersion,m.newVersion,m))}).catch(()=>{}),c}const NC=["get","getKey","getAll","getAllKeys","count"],RC=["put","add","delete","clear"],Tm=new Map;function d0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Tm.get(e))return Tm.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=RC.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||NC.includes(n)))return;const o=async function(a,...c){const d=this.transaction(a,i?"readwrite":"readonly");let m=d.store;return r&&(m=m.index(c.shift())),(await Promise.all([m[n](...c),i&&d.done]))[0]};return Tm.set(e,o),o}SC(t=>({...t,get:(e,n,r)=>d0(e,n)||t.get(e,n,r),has:(e,n)=>!!d0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(MC(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function MC(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Op="@firebase/app",f0="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ri=new d_("@firebase/app"),OC="@firebase/app-compat",DC="@firebase/analytics-compat",jC="@firebase/analytics",VC="@firebase/app-check-compat",FC="@firebase/app-check",UC="@firebase/auth",zC="@firebase/auth-compat",BC="@firebase/database",WC="@firebase/data-connect",HC="@firebase/database-compat",$C="@firebase/functions",qC="@firebase/functions-compat",KC="@firebase/installations",GC="@firebase/installations-compat",ZC="@firebase/messaging",QC="@firebase/messaging-compat",YC="@firebase/performance",XC="@firebase/performance-compat",JC="@firebase/remote-config",eN="@firebase/remote-config-compat",tN="@firebase/storage",nN="@firebase/storage-compat",rN="@firebase/firestore",iN="@firebase/vertexai-preview",sN="@firebase/firestore-compat",oN="firebase",aN="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dp="[DEFAULT]",lN={[Op]:"fire-core",[OC]:"fire-core-compat",[jC]:"fire-analytics",[DC]:"fire-analytics-compat",[FC]:"fire-app-check",[VC]:"fire-app-check-compat",[UC]:"fire-auth",[zC]:"fire-auth-compat",[BC]:"fire-rtdb",[WC]:"fire-data-connect",[HC]:"fire-rtdb-compat",[$C]:"fire-fn",[qC]:"fire-fn-compat",[KC]:"fire-iid",[GC]:"fire-iid-compat",[ZC]:"fire-fcm",[QC]:"fire-fcm-compat",[YC]:"fire-perf",[XC]:"fire-perf-compat",[JC]:"fire-rc",[eN]:"fire-rc-compat",[tN]:"fire-gcs",[nN]:"fire-gcs-compat",[rN]:"fire-fst",[sN]:"fire-fst-compat",[iN]:"fire-vertex","fire-js":"fire-js",[oN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fd=new Map,uN=new Map,jp=new Map;function m0(t,e){try{t.container.addComponent(e)}catch(n){ri.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function es(t){const e=t.name;if(jp.has(e))return ri.debug(`There were multiple attempts to register component ${e}.`),!1;jp.set(e,t);for(const n of fd.values())m0(n,t);for(const n of uN.values())m0(n,t);return!0}function Gu(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function qr(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Zi=new qu("app","Firebase",cN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ni("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Zi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Js=aN;function PT(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Dp,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Zi.create("bad-app-name",{appName:String(i)});if(n||(n=xT()),!n)throw Zi.create("no-options");const o=fd.get(i);if(o){if(dd(n,o.options)&&dd(r,o.config))return o;throw Zi.create("duplicate-app",{appName:i})}const a=new _C(i);for(const d of jp.values())a.addComponent(d);const c=new hN(n,r,a);return fd.set(i,c),c}function sf(t=Dp){const e=fd.get(t);if(!e&&t===Dp&&xT())return PT();if(!e)throw Zi.create("no-app",{appName:t});return e}function zn(t,e,n){var r;let i=(r=lN[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const o=i.match(/\s|\//),a=e.match(/\s|\//);if(o||a){const c=[`Unable to register library "${i}" with version "${e}":`];o&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&a&&c.push("and"),a&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ri.warn(c.join(" "));return}es(new ni(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dN="firebase-heartbeat-database",fN=1,Au="firebase-heartbeat-store";let km=null;function ST(){return km||(km=CC(dN,fN,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Au)}catch(n){console.warn(n)}}}}).catch(t=>{throw Zi.create("idb-open",{originalErrorMessage:t.message})})),km}async function mN(t){try{const n=(await ST()).transaction(Au),r=await n.objectStore(Au).get(bT(t));return await n.done,r}catch(e){if(e instanceof ar)ri.warn(e.message);else{const n=Zi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ri.warn(n.message)}}}async function p0(t,e){try{const r=(await ST()).transaction(Au,"readwrite");await r.objectStore(Au).put(e,bT(t)),await r.done}catch(n){if(n instanceof ar)ri.warn(n.message);else{const r=Zi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ri.warn(r.message)}}}function bT(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pN=1024,gN=30*24*60*60*1e3;class _N{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new vN(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=g0();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const c=new Date(a.date).valueOf();return Date.now()-c<=gN}),this._storage.overwrite(this._heartbeatsCache))}catch(r){ri.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=g0(),{heartbeatsToSend:r,unsentEntries:i}=yN(this._heartbeatsCache.heartbeats),o=hd(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return ri.warn(n),""}}}function g0(){return new Date().toISOString().substring(0,10)}function yN(t,e=pN){const n=[];let r=t.slice();for(const i of t){const o=n.find(a=>a.agent===i.agent);if(o){if(o.dates.push(i.date),_0(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),_0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class vN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return sC()?oC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await mN(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return p0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return p0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function _0(t){return hd(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wN(t){es(new ni("platform-logger",e=>new LC(e),"PRIVATE")),es(new ni("heartbeat",e=>new _N(e),"PRIVATE")),zn(Op,f0,t),zn(Op,f0,"esm2017"),zn("fire-js","")}wN("");function m_(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function AT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const xN=AT,CT=new qu("auth","Firebase",AT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const md=new d_("@firebase/auth");function EN(t,...e){md.logLevel<=Ne.WARN&&md.warn(`Auth (${Js}): ${t}`,...e)}function bh(t,...e){md.logLevel<=Ne.ERROR&&md.error(`Auth (${Js}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ir(t,...e){throw p_(t,...e)}function Er(t,...e){return p_(t,...e)}function NT(t,e,n){const r=Object.assign(Object.assign({},xN()),{[e]:n});return new qu("auth","Firebase",r).create(e,{appName:t.name})}function Qi(t){return NT(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function p_(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return CT.create(t,...e)}function ce(t,e,...n){if(!t)throw p_(e,...n)}function Kr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw bh(e),new Error(e)}function ii(t,e){t||Kr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vp(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function TN(){return y0()==="http:"||y0()==="https:"}function y0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(TN()||tC()||"connection"in navigator)?navigator.onLine:!0}function IN(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(e,n){this.shortDelay=e,this.longDelay=n,ii(n>e,"Short delay should be less than long delay!"),this.isMobile=XA()||nC()}get(){return kN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g_(t,e){ii(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Kr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Kr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Kr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SN=new Zu(3e4,6e4);function us(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Sr(t,e,n,r,i={}){return LT(t,i,async()=>{let o={},a={};r&&(e==="GET"?a=r:o={body:JSON.stringify(r)});const c=Ku(Object.assign({key:t.config.apiKey},a)).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const m=Object.assign({method:e,headers:d},o);return eC()||(m.referrerPolicy="no-referrer"),RT.fetch()(MT(t,t.config.apiHost,n,c),m)})}async function LT(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},PN),e);try{const i=new AN(t),o=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const a=await o.json();if("needConfirmation"in a)throw lh(t,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{const c=o.ok?a.errorMessage:a.error.message,[d,m]=c.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw lh(t,"credential-already-in-use",a);if(d==="EMAIL_EXISTS")throw lh(t,"email-already-in-use",a);if(d==="USER_DISABLED")throw lh(t,"user-disabled",a);const _=r[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw NT(t,_,m);ir(t,_)}}catch(i){if(i instanceof ar)throw i;ir(t,"network-request-failed",{message:String(i)})}}async function of(t,e,n,r,i={}){const o=await Sr(t,e,n,r,i);return"mfaPendingCredential"in o&&ir(t,"multi-factor-auth-required",{_serverResponse:o}),o}function MT(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?g_(t.config,i):`${t.config.apiScheme}://${i}`}function bN(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class AN{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Er(this.auth,"network-request-failed")),SN.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function lh(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Er(t,e,r);return i.customData._tokenResponse=n,i}function v0(t){return t!==void 0&&t.enterprise!==void 0}class CN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return bN(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function NN(t,e){return Sr(t,"GET","/v2/recaptchaConfig",us(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RN(t,e){return Sr(t,"POST","/v1/accounts:delete",e)}async function OT(t,e){return Sr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ru(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function LN(t,e=!1){const n=ze(t),r=await n.getIdToken(e),i=__(r);ce(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,a=o==null?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:ru(Im(i.auth_time)),issuedAtTime:ru(Im(i.iat)),expirationTime:ru(Im(i.exp)),signInProvider:a||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Im(t){return Number(t)*1e3}function __(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return bh("JWT malformed, contained fewer than 3 sections"),null;try{const i=vT(n);return i?JSON.parse(i):(bh("Failed to decode base64 JWT payload"),null)}catch(i){return bh("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function w0(t){const e=__(t);return ce(e,"internal-error"),ce(typeof e.exp<"u","internal-error"),ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pa(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ar&&MN(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function MN({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ON{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ru(this.lastLoginAt),this.creationTime=ru(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pd(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Pa(t,OT(n,{idToken:r}));ce(i==null?void 0:i.users.length,n,"internal-error");const o=i.users[0];t._notifyReloadListener(o);const a=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?DT(o.providerUserInfo):[],c=jN(t.providerData,a),d=t.isAnonymous,m=!(t.email&&o.passwordHash)&&!(c!=null&&c.length),_=d?m:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Fp(o.createdAt,o.lastLoginAt),isAnonymous:_};Object.assign(t,v)}async function DN(t){const e=ze(t);await pd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function jN(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function DT(t){return t.map(e=>{var{providerId:n}=e,r=m_(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VN(t,e){const n=await LT(t,{},async()=>{const r=Ku({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,a=MT(t,i,"/v1/token",`key=${o}`),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",RT.fetch()(a,{method:"POST",headers:c,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function FN(t,e){return Sr(t,"POST","/v2/accounts:revokeToken",us(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ce(e.idToken,"internal-error"),ce(typeof e.idToken<"u","internal-error"),ce(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):w0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ce(e.length!==0,"internal-error");const n=w0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ce(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:o}=await VN(e,n);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:o}=n,a=new da;return r&&(ce(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(ce(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),o&&(ce(typeof o=="number","internal-error",{appName:e}),a.expirationTime=o),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new da,this.toJSON())}_performRefresh(){return Kr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ti(t,e){ce(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Gr{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=m_(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ON(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Fp(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Pa(this,this.stsTokenManager.getToken(this.auth,e));return ce(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return LN(this,e)}reload(){return DN(this)}_assign(e){this!==e&&(ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Gr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await pd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(qr(this.auth.app))return Promise.reject(Qi(this.auth));const e=await this.getIdToken();return await Pa(this,RN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,a,c,d,m,_;const v=(r=n.displayName)!==null&&r!==void 0?r:void 0,x=(i=n.email)!==null&&i!==void 0?i:void 0,S=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,C=(a=n.photoURL)!==null&&a!==void 0?a:void 0,R=(c=n.tenantId)!==null&&c!==void 0?c:void 0,F=(d=n._redirectEventId)!==null&&d!==void 0?d:void 0,b=(m=n.createdAt)!==null&&m!==void 0?m:void 0,T=(_=n.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:P,emailVerified:z,isAnonymous:K,providerData:$,stsTokenManager:A}=n;ce(P&&A,e,"internal-error");const k=da.fromJSON(this.name,A);ce(typeof P=="string",e,"internal-error"),Ti(v,e.name),Ti(x,e.name),ce(typeof z=="boolean",e,"internal-error"),ce(typeof K=="boolean",e,"internal-error"),Ti(S,e.name),Ti(C,e.name),Ti(R,e.name),Ti(F,e.name),Ti(b,e.name),Ti(T,e.name);const N=new Gr({uid:P,auth:e,email:x,emailVerified:z,displayName:v,isAnonymous:K,photoURL:C,phoneNumber:S,tenantId:R,stsTokenManager:k,createdAt:b,lastLoginAt:T});return $&&Array.isArray($)&&(N.providerData=$.map(j=>Object.assign({},j))),F&&(N._redirectEventId=F),N}static async _fromIdTokenResponse(e,n,r=!1){const i=new da;i.updateFromServerResponse(n);const o=new Gr({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await pd(o),o}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];ce(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?DT(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!(o!=null&&o.length),c=new da;c.updateFromIdToken(r);const d=new Gr({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:a}),m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Fp(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(o!=null&&o.length)};return Object.assign(d,m),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x0=new Map;function Zr(t){ii(t instanceof Function,"Expected a class definition");let e=x0.get(t);return e?(ii(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,x0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}jT.type="NONE";const E0=jT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ah(t,e,n){return`firebase:${t}:${e}:${n}`}class fa{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=Ah(this.userKey,i.apiKey,o),this.fullPersistenceKey=Ah("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Gr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new fa(Zr(E0),e,r);const i=(await Promise.all(n.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let o=i[0]||Zr(E0);const a=Ah(r,e.config.apiKey,e.name);let c=null;for(const m of n)try{const _=await m._get(a);if(_){const v=Gr._fromJSON(e,_);m!==o&&(c=v),o=m;break}}catch{}const d=i.filter(m=>m._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new fa(o,e,r):(o=d[0],c&&await o._set(a,c.toJSON()),await Promise.all(n.map(async m=>{if(m!==o)try{await m._remove(a)}catch{}})),new fa(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(zT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(VT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(WT(e))return"Blackberry";if(HT(e))return"Webos";if(FT(e))return"Safari";if((e.includes("chrome/")||UT(e))&&!e.includes("edge/"))return"Chrome";if(BT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function VT(t=Yt()){return/firefox\//i.test(t)}function FT(t=Yt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function UT(t=Yt()){return/crios\//i.test(t)}function zT(t=Yt()){return/iemobile/i.test(t)}function BT(t=Yt()){return/android/i.test(t)}function WT(t=Yt()){return/blackberry/i.test(t)}function HT(t=Yt()){return/webos/i.test(t)}function y_(t=Yt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function UN(t=Yt()){var e;return y_(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function zN(){return rC()&&document.documentMode===10}function $T(t=Yt()){return y_(t)||BT(t)||HT(t)||WT(t)||/windows phone/i.test(t)||zT(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qT(t,e=[]){let n;switch(t){case"Browser":n=T0(Yt());break;case"Worker":n=`${T0(Yt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Js}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((a,c)=>{try{const d=e(o);a(d)}catch(d){c(d)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WN(t,e={}){return Sr(t,"GET","/v2/passwordPolicy",us(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HN=6;class $N{constructor(e){var n,r,i,o;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=a.minPasswordLength)!==null&&n!==void 0?n:HN,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,a,c;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(n=d.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),d.isValid&&(d.isValid=(r=d.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(i=d.containsLowercaseLetter)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(o=d.containsUppercaseLetter)!==null&&o!==void 0?o:!0),d.isValid&&(d.isValid=(a=d.containsNumericCharacter)!==null&&a!==void 0?a:!0),d.isValid&&(d.isValid=(c=d.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),d}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qN{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new k0(this),this.idTokenSubscription=new k0(this),this.beforeStateQueue=new BN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=CT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Zr(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await fa.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await OT(this,{idToken:e}),r=await Gr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(qr(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=i==null?void 0:i._redirectEventId,d=await this.tryRedirectSignIn(e);(!a||a===c)&&(d!=null&&d.user)&&(i=d.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ce(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await pd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=IN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(qr(this.app))return Promise.reject(Qi(this));const n=e?ze(e):null;return n&&ce(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return qr(this.app)?Promise.reject(Qi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return qr(this.app)?Promise.reject(Qi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Zr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await WN(this),n=new $N(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new qu("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await FN(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Zr(e)||this._popupRedirectResolver;ce(n,this,"argument-error"),this.redirectPersistenceManager=await fa.create(this,[Zr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let a=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(ce(c,this,"internal-error"),c.then(()=>{a||o(this.currentUser)}),typeof n=="function"){const d=e.addObserver(n,r,i);return()=>{a=!0,d()}}else{const d=e.addObserver(n);return()=>{a=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=qT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&EN(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function eo(t){return ze(t)}class k0{constructor(e){this.auth=e,this.observer=null,this.addObserver=hC(n=>this.observer=n)}get next(){return ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let af={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function KN(t){af=t}function KT(t){return af.loadJS(t)}function GN(){return af.recaptchaEnterpriseScript}function ZN(){return af.gapiScript}function QN(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const YN="recaptcha-enterprise",XN="NO_RECAPTCHA";class JN{constructor(e){this.type=YN,this.auth=eo(e)}async verify(e="verify",n=!1){async function r(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(a,c)=>{NN(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const m=new CN(d);return o.tenantId==null?o._agentRecaptchaConfig=m:o._tenantRecaptchaConfigs[o.tenantId]=m,a(m.siteKey)}}).catch(d=>{c(d)})})}function i(o,a,c){const d=window.grecaptcha;v0(d)?d.enterprise.ready(()=>{d.enterprise.execute(o,{action:e}).then(m=>{a(m)}).catch(()=>{a(XN)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((o,a)=>{r(this.auth).then(c=>{if(!n&&v0(window.grecaptcha))i(c,o,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let d=GN();d.length!==0&&(d+=c),KT(d).then(()=>{i(c,o,a)}).catch(m=>{a(m)})}}).catch(c=>{a(c)})})}}async function I0(t,e,n,r=!1){const i=new JN(t);let o;try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const a=Object.assign({},e);return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Up(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await I0(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await I0(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eR(t,e){const n=Gu(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),o=n.getOptions();if(dd(o,e??{}))return i;ir(i,"already-initialized")}return n.initialize({options:e})}function tR(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Zr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function nR(t,e,n){const r=eo(t);ce(r._canInitEmulator,r,"emulator-config-failed"),ce(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,o=GT(e),{host:a,port:c}=rR(e),d=c===null?"":`:${c}`;r.config.emulator={url:`${o}//${a}${d}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),iR()}function GT(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function rR(t){const e=GT(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:P0(r.substr(o.length+1))}}else{const[o,a]=r.split(":");return{host:o,port:P0(a)}}}function P0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function iR(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v_{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Kr("not implemented")}_getIdTokenResponse(e){return Kr("not implemented")}_linkToIdToken(e,n){return Kr("not implemented")}_getReauthenticationResolver(e){return Kr("not implemented")}}async function sR(t,e){return Sr(t,"POST","/v1/accounts:update",e)}async function oR(t,e){return Sr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aR(t,e){return of(t,"POST","/v1/accounts:signInWithPassword",us(t,e))}async function lR(t,e){return Sr(t,"POST","/v1/accounts:sendOobCode",us(t,e))}async function uR(t,e){return lR(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cR(t,e){return of(t,"POST","/v1/accounts:signInWithEmailLink",us(t,e))}async function hR(t,e){return of(t,"POST","/v1/accounts:signInWithEmailLink",us(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu extends v_{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Cu(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Cu(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Up(e,n,"signInWithPassword",aR);case"emailLink":return cR(e,{email:this._email,oobCode:this._password});default:ir(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Up(e,r,"signUpPassword",oR);case"emailLink":return hR(e,{idToken:n,email:this._email,oobCode:this._password});default:ir(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ma(t,e){return of(t,"POST","/v1/accounts:signInWithIdp",us(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dR="http://localhost";class Hs extends v_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Hs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ir("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,o=m_(n,["providerId","signInMethod"]);if(!r||!i)return null;const a=new Hs(r,i);return a.idToken=o.idToken||void 0,a.accessToken=o.accessToken||void 0,a.secret=o.secret,a.nonce=o.nonce,a.pendingToken=o.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return ma(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ma(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ma(e,n)}buildRequest(){const e={requestUri:dR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ku(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fR(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function mR(t){const e=Bl(Wl(t)).link,n=e?Bl(Wl(e)).deep_link_id:null,r=Bl(Wl(t)).deep_link_id;return(r?Bl(Wl(r)).link:null)||r||n||e||t}class w_{constructor(e){var n,r,i,o,a,c;const d=Bl(Wl(e)),m=(n=d.apiKey)!==null&&n!==void 0?n:null,_=(r=d.oobCode)!==null&&r!==void 0?r:null,v=fR((i=d.mode)!==null&&i!==void 0?i:null);ce(m&&_&&v,"argument-error"),this.apiKey=m,this.operation=v,this.code=_,this.continueUrl=(o=d.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(a=d.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(c=d.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const n=mR(e);try{return new w_(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(){this.providerId=to.PROVIDER_ID}static credential(e,n){return Cu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=w_.parseLink(n);return ce(r,"argument-error"),Cu._fromEmailAndCode(e,r.code,r.tenantId)}}to.PROVIDER_ID="password";to.EMAIL_PASSWORD_SIGN_IN_METHOD="password";to.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu extends ZT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci extends Qu{constructor(){super("facebook.com")}static credential(e){return Hs._fromParams({providerId:Ci.PROVIDER_ID,signInMethod:Ci.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ci.credentialFromTaggedObject(e)}static credentialFromError(e){return Ci.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ci.credential(e.oauthAccessToken)}catch{return null}}}Ci.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ci.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni extends Qu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Hs._fromParams({providerId:Ni.PROVIDER_ID,signInMethod:Ni.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ni.credentialFromTaggedObject(e)}static credentialFromError(e){return Ni.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Ni.credential(n,r)}catch{return null}}}Ni.GOOGLE_SIGN_IN_METHOD="google.com";Ni.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri extends Qu{constructor(){super("github.com")}static credential(e){return Hs._fromParams({providerId:Ri.PROVIDER_ID,signInMethod:Ri.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ri.credentialFromTaggedObject(e)}static credentialFromError(e){return Ri.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ri.credential(e.oauthAccessToken)}catch{return null}}}Ri.GITHUB_SIGN_IN_METHOD="github.com";Ri.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li extends Qu{constructor(){super("twitter.com")}static credential(e,n){return Hs._fromParams({providerId:Li.PROVIDER_ID,signInMethod:Li.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Li.credentialFromTaggedObject(e)}static credentialFromError(e){return Li.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Li.credential(n,r)}catch{return null}}}Li.TWITTER_SIGN_IN_METHOD="twitter.com";Li.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const o=await Gr._fromIdTokenResponse(e,r,i),a=S0(r);return new Sa({user:o,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=S0(r);return new Sa({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function S0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd extends ar{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,gd.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new gd(e,n,r,i)}}function QT(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?gd._fromErrorAndOperation(t,o,e,r):o})}async function pR(t,e,n=!1){const r=await Pa(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Sa._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YT(t,e,n=!1){const{auth:r}=t;if(qr(r.app))return Promise.reject(Qi(r));const i="reauthenticate";try{const o=await Pa(t,QT(r,i,e,t),n);ce(o.idToken,r,"internal-error");const a=__(o.idToken);ce(a,r,"internal-error");const{sub:c}=a;return ce(t.uid===c,r,"user-mismatch"),Sa._forOperation(t,i,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&ir(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XT(t,e,n=!1){if(qr(t.app))return Promise.reject(Qi(t));const r="signIn",i=await QT(t,r,e),o=await Sa._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(o.user),o}async function gR(t,e){return XT(eo(t),e)}async function _R(t,e){return YT(ze(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yR(t){const e=eo(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function vR(t,e,n){const r=eo(t);await Up(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",uR)}function wR(t,e,n){return qr(t.app)?Promise.reject(Qi(t)):gR(ze(t),to.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&yR(t),r})}function xR(t,e){return ER(ze(t),null,e)}async function ER(t,e,n){const{auth:r}=t,o={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(o.password=n);const a=await Pa(t,sR(r,o));await t._updateTokensIfNecessary(a,!0)}function TR(t,e,n,r){return ze(t).onIdTokenChanged(e,n,r)}function kR(t,e,n){return ze(t).beforeAuthStateChanged(e,n)}function IR(t,e,n,r){return ze(t).onAuthStateChanged(e,n,r)}function Pm(t){return ze(t).signOut()}const _d="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(_d,"1"),this.storage.removeItem(_d),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PR=1e3,SR=10;class ek extends JT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=$T(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,c,d)=>{this.notifyListeners(a,d)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},o=this.storage.getItem(r);zN()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,SR):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},PR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}ek.type="LOCAL";const bR=ek;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk extends JT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}tk.type="SESSION";const nk=tk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AR(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new lf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:o}=n.data,a=this.handlersMap[i];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const c=Array.from(a).map(async m=>m(n.origin,o)),d=await AR(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:d})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}lf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x_(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,a;return new Promise((c,d)=>{const m=x_("",20);i.port1.start();const _=setTimeout(()=>{d(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(v){const x=v;if(x.data.eventId===m)switch(x.data.status){case"ack":clearTimeout(_),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(x.data.response);break;default:clearTimeout(_),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:m,data:n},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tr(){return window}function NR(t){Tr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rk(){return typeof Tr().WorkerGlobalScope<"u"&&typeof Tr().importScripts=="function"}async function RR(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function LR(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function MR(){return rk()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ik="firebaseLocalStorageDb",OR=1,yd="firebaseLocalStorage",sk="fbase_key";class Yu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function uf(t,e){return t.transaction([yd],e?"readwrite":"readonly").objectStore(yd)}function DR(){const t=indexedDB.deleteDatabase(ik);return new Yu(t).toPromise()}function zp(){const t=indexedDB.open(ik,OR);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(yd,{keyPath:sk})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(yd)?e(r):(r.close(),await DR(),e(await zp()))})})}async function b0(t,e,n){const r=uf(t,!0).put({[sk]:e,value:n});return new Yu(r).toPromise()}async function jR(t,e){const n=uf(t,!1).get(e),r=await new Yu(n).toPromise();return r===void 0?null:r.value}function A0(t,e){const n=uf(t,!0).delete(e);return new Yu(n).toPromise()}const VR=800,FR=3;class ok{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await zp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>FR)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return rk()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=lf._getInstance(MR()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await RR(),!this.activeServiceWorker)return;this.sender=new CR(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||LR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await zp();return await b0(e,_d,"1"),await A0(e,_d),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>b0(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>jR(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>A0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=uf(i,!1).getAll();return new Yu(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),VR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ok.type="LOCAL";const UR=ok;new Zu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zR(t,e){return e?Zr(e):(ce(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E_ extends v_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ma(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ma(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ma(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function BR(t){return XT(t.auth,new E_(t),t.bypassAuthState)}function WR(t){const{auth:e,user:n}=t;return ce(n,e,"internal-error"),YT(n,new E_(t),t.bypassAuthState)}async function HR(t){const{auth:e,user:n}=t;return ce(n,e,"internal-error"),pR(n,new E_(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:a,type:c}=e;if(a){this.reject(a);return}const d={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(d))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return BR;case"linkViaPopup":case"linkViaRedirect":return HR;case"reauthViaPopup":case"reauthViaRedirect":return WR;default:ir(this.auth,"internal-error")}}resolve(e){ii(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ii(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $R=new Zu(2e3,1e4);class sa extends ak{constructor(e,n,r,i,o){super(e,n,i,o),this.provider=r,this.authWindow=null,this.pollId=null,sa.currentPopupAction&&sa.currentPopupAction.cancel(),sa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ce(e,this.auth,"internal-error"),e}async onExecution(){ii(this.filter.length===1,"Popup operations only handle one event");const e=x_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Er(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Er(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,sa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Er(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,$R.get())};e()}}sa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qR="pendingRedirect",Ch=new Map;class KR extends ak{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Ch.get(this.auth._key());if(!e){try{const r=await GR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Ch.set(this.auth._key(),e)}return this.bypassAuthState||Ch.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function GR(t,e){const n=YR(e),r=QR(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function ZR(t,e){Ch.set(t._key(),e)}function QR(t){return Zr(t._redirectPersistence)}function YR(t){return Ah(qR,t.config.apiKey,t.name)}async function XR(t,e,n=!1){if(qr(t.app))return Promise.reject(Qi(t));const r=eo(t),i=zR(r,e),a=await new KR(r,i,n).execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JR=10*60*1e3;class e2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!t2(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!lk(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Er(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=JR&&this.cachedEventUids.clear(),this.cachedEventUids.has(C0(e))}saveEventToCache(e){this.cachedEventUids.add(C0(e)),this.lastProcessedEventTime=Date.now()}}function C0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function lk({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function t2(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return lk(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n2(t,e={}){return Sr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,i2=/^https?/;async function s2(t){if(t.config.emulator)return;const{authorizedDomains:e}=await n2(t);for(const n of e)try{if(o2(n))return}catch{}ir(t,"unauthorized-domain")}function o2(t){const e=Vp(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===r}if(!i2.test(n))return!1;if(r2.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a2=new Zu(3e4,6e4);function N0(){const t=Tr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function l2(t){return new Promise((e,n)=>{var r,i,o;function a(){N0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{N0(),n(Er(t,"network-request-failed"))},timeout:a2.get()})}if(!((i=(r=Tr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Tr().gapi)===null||o===void 0)&&o.load)a();else{const c=QN("iframefcb");return Tr()[c]=()=>{gapi.load?a():n(Er(t,"network-request-failed"))},KT(`${ZN()}?onload=${c}`).catch(d=>n(d))}}).catch(e=>{throw Nh=null,e})}let Nh=null;function u2(t){return Nh=Nh||l2(t),Nh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c2=new Zu(5e3,15e3),h2="__/auth/iframe",d2="emulator/auth/iframe",f2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},m2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function p2(t){const e=t.config;ce(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?g_(e,d2):`https://${t.config.authDomain}/${h2}`,r={apiKey:e.apiKey,appName:t.name,v:Js},i=m2.get(t.config.apiHost);i&&(r.eid=i);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Ku(r).slice(1)}`}async function g2(t){const e=await u2(t),n=Tr().gapi;return ce(n,t,"internal-error"),e.open({where:document.body,url:p2(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:f2,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const a=Er(t,"network-request-failed"),c=Tr().setTimeout(()=>{o(a)},c2.get());function d(){Tr().clearTimeout(c),i(r)}r.ping(d).then(d,()=>{o(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},y2=500,v2=600,w2="_blank",x2="http://localhost";class R0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function E2(t,e,n,r=y2,i=v2){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const d=Object.assign(Object.assign({},_2),{width:r.toString(),height:i.toString(),top:o,left:a}),m=Yt().toLowerCase();n&&(c=UT(m)?w2:n),VT(m)&&(e=e||x2,d.scrollbars="yes");const _=Object.entries(d).reduce((x,[S,C])=>`${x}${S}=${C},`,"");if(UN(m)&&c!=="_self")return T2(e||"",c),new R0(null);const v=window.open(e||"",c,_);ce(v,t,"popup-blocked");try{v.focus()}catch{}return new R0(v)}function T2(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k2="__/auth/handler",I2="emulator/auth/handler",P2=encodeURIComponent("fac");async function L0(t,e,n,r,i,o){ce(t.config.authDomain,t,"auth-domain-config-required"),ce(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Js,eventId:i};if(e instanceof ZT){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",cC(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,v]of Object.entries({}))a[_]=v}if(e instanceof Qu){const _=e.getScopes().filter(v=>v!=="");_.length>0&&(a.scopes=_.join(","))}t.tenantId&&(a.tid=t.tenantId);const c=a;for(const _ of Object.keys(c))c[_]===void 0&&delete c[_];const d=await t._getAppCheckToken(),m=d?`#${P2}=${encodeURIComponent(d)}`:"";return`${S2(t)}?${Ku(c).slice(1)}${m}`}function S2({config:t}){return t.emulator?g_(t,I2):`https://${t.authDomain}/${k2}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sm="webStorageSupport";class b2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=nk,this._completeRedirectFn=XR,this._overrideRedirectResult=ZR}async _openPopup(e,n,r,i){var o;ii((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const a=await L0(e,n,r,Vp(),i);return E2(e,a,x_())}async _openRedirect(e,n,r,i){await this._originValidation(e);const o=await L0(e,n,r,Vp(),i);return NR(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(ii(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await g2(e),r=new e2(e);return n.register("authEvent",i=>(ce(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Sm,{type:Sm},i=>{var o;const a=(o=i==null?void 0:i[0])===null||o===void 0?void 0:o[Sm];a!==void 0&&n(!!a),ir(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=s2(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return $T()||FT()||y_()}}const A2=b2;var M0="@firebase/auth",O0="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N2(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function R2(t){es(new ni("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:c}=r.options;ce(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const d={apiKey:a,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:qT(t)},m=new qN(r,i,o,d);return tR(m,n),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),es(new ni("auth-internal",e=>{const n=eo(e.getProvider("auth").getImmediate());return(r=>new C2(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),zn(M0,O0,N2(t)),zn(M0,O0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L2=5*60,M2=ET("authIdTokenMaxAge")||L2;let D0=null;const O2=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>M2)return;const i=n==null?void 0:n.token;D0!==i&&(D0=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function D2(t=sf()){const e=Gu(t,"auth");if(e.isInitialized())return e.getImmediate();const n=eR(t,{popupRedirectResolver:A2,persistence:[UR,bR,nk]}),r=ET("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const a=O2(o.toString());kR(n,a,()=>a(n.currentUser)),TR(n,c=>a(c))}}const i=wT("auth");return i&&nR(n,`http://${i}`),n}function j2(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}KN({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const o=Er("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",j2().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});R2("Browser");var j0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var js,uk;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,k){function N(){}N.prototype=k.prototype,A.D=k.prototype,A.prototype=new N,A.prototype.constructor=A,A.C=function(j,U,M){for(var D=Array(arguments.length-2),me=2;me<arguments.length;me++)D[me-2]=arguments[me];return k.prototype[U].apply(j,D)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(A,k,N){N||(N=0);var j=Array(16);if(typeof k=="string")for(var U=0;16>U;++U)j[U]=k.charCodeAt(N++)|k.charCodeAt(N++)<<8|k.charCodeAt(N++)<<16|k.charCodeAt(N++)<<24;else for(U=0;16>U;++U)j[U]=k[N++]|k[N++]<<8|k[N++]<<16|k[N++]<<24;k=A.g[0],N=A.g[1],U=A.g[2];var M=A.g[3],D=k+(M^N&(U^M))+j[0]+3614090360&4294967295;k=N+(D<<7&4294967295|D>>>25),D=M+(U^k&(N^U))+j[1]+3905402710&4294967295,M=k+(D<<12&4294967295|D>>>20),D=U+(N^M&(k^N))+j[2]+606105819&4294967295,U=M+(D<<17&4294967295|D>>>15),D=N+(k^U&(M^k))+j[3]+3250441966&4294967295,N=U+(D<<22&4294967295|D>>>10),D=k+(M^N&(U^M))+j[4]+4118548399&4294967295,k=N+(D<<7&4294967295|D>>>25),D=M+(U^k&(N^U))+j[5]+1200080426&4294967295,M=k+(D<<12&4294967295|D>>>20),D=U+(N^M&(k^N))+j[6]+2821735955&4294967295,U=M+(D<<17&4294967295|D>>>15),D=N+(k^U&(M^k))+j[7]+4249261313&4294967295,N=U+(D<<22&4294967295|D>>>10),D=k+(M^N&(U^M))+j[8]+1770035416&4294967295,k=N+(D<<7&4294967295|D>>>25),D=M+(U^k&(N^U))+j[9]+2336552879&4294967295,M=k+(D<<12&4294967295|D>>>20),D=U+(N^M&(k^N))+j[10]+4294925233&4294967295,U=M+(D<<17&4294967295|D>>>15),D=N+(k^U&(M^k))+j[11]+2304563134&4294967295,N=U+(D<<22&4294967295|D>>>10),D=k+(M^N&(U^M))+j[12]+1804603682&4294967295,k=N+(D<<7&4294967295|D>>>25),D=M+(U^k&(N^U))+j[13]+4254626195&4294967295,M=k+(D<<12&4294967295|D>>>20),D=U+(N^M&(k^N))+j[14]+2792965006&4294967295,U=M+(D<<17&4294967295|D>>>15),D=N+(k^U&(M^k))+j[15]+1236535329&4294967295,N=U+(D<<22&4294967295|D>>>10),D=k+(U^M&(N^U))+j[1]+4129170786&4294967295,k=N+(D<<5&4294967295|D>>>27),D=M+(N^U&(k^N))+j[6]+3225465664&4294967295,M=k+(D<<9&4294967295|D>>>23),D=U+(k^N&(M^k))+j[11]+643717713&4294967295,U=M+(D<<14&4294967295|D>>>18),D=N+(M^k&(U^M))+j[0]+3921069994&4294967295,N=U+(D<<20&4294967295|D>>>12),D=k+(U^M&(N^U))+j[5]+3593408605&4294967295,k=N+(D<<5&4294967295|D>>>27),D=M+(N^U&(k^N))+j[10]+38016083&4294967295,M=k+(D<<9&4294967295|D>>>23),D=U+(k^N&(M^k))+j[15]+3634488961&4294967295,U=M+(D<<14&4294967295|D>>>18),D=N+(M^k&(U^M))+j[4]+3889429448&4294967295,N=U+(D<<20&4294967295|D>>>12),D=k+(U^M&(N^U))+j[9]+568446438&4294967295,k=N+(D<<5&4294967295|D>>>27),D=M+(N^U&(k^N))+j[14]+3275163606&4294967295,M=k+(D<<9&4294967295|D>>>23),D=U+(k^N&(M^k))+j[3]+4107603335&4294967295,U=M+(D<<14&4294967295|D>>>18),D=N+(M^k&(U^M))+j[8]+1163531501&4294967295,N=U+(D<<20&4294967295|D>>>12),D=k+(U^M&(N^U))+j[13]+2850285829&4294967295,k=N+(D<<5&4294967295|D>>>27),D=M+(N^U&(k^N))+j[2]+4243563512&4294967295,M=k+(D<<9&4294967295|D>>>23),D=U+(k^N&(M^k))+j[7]+1735328473&4294967295,U=M+(D<<14&4294967295|D>>>18),D=N+(M^k&(U^M))+j[12]+2368359562&4294967295,N=U+(D<<20&4294967295|D>>>12),D=k+(N^U^M)+j[5]+4294588738&4294967295,k=N+(D<<4&4294967295|D>>>28),D=M+(k^N^U)+j[8]+2272392833&4294967295,M=k+(D<<11&4294967295|D>>>21),D=U+(M^k^N)+j[11]+1839030562&4294967295,U=M+(D<<16&4294967295|D>>>16),D=N+(U^M^k)+j[14]+4259657740&4294967295,N=U+(D<<23&4294967295|D>>>9),D=k+(N^U^M)+j[1]+2763975236&4294967295,k=N+(D<<4&4294967295|D>>>28),D=M+(k^N^U)+j[4]+1272893353&4294967295,M=k+(D<<11&4294967295|D>>>21),D=U+(M^k^N)+j[7]+4139469664&4294967295,U=M+(D<<16&4294967295|D>>>16),D=N+(U^M^k)+j[10]+3200236656&4294967295,N=U+(D<<23&4294967295|D>>>9),D=k+(N^U^M)+j[13]+681279174&4294967295,k=N+(D<<4&4294967295|D>>>28),D=M+(k^N^U)+j[0]+3936430074&4294967295,M=k+(D<<11&4294967295|D>>>21),D=U+(M^k^N)+j[3]+3572445317&4294967295,U=M+(D<<16&4294967295|D>>>16),D=N+(U^M^k)+j[6]+76029189&4294967295,N=U+(D<<23&4294967295|D>>>9),D=k+(N^U^M)+j[9]+3654602809&4294967295,k=N+(D<<4&4294967295|D>>>28),D=M+(k^N^U)+j[12]+3873151461&4294967295,M=k+(D<<11&4294967295|D>>>21),D=U+(M^k^N)+j[15]+530742520&4294967295,U=M+(D<<16&4294967295|D>>>16),D=N+(U^M^k)+j[2]+3299628645&4294967295,N=U+(D<<23&4294967295|D>>>9),D=k+(U^(N|~M))+j[0]+4096336452&4294967295,k=N+(D<<6&4294967295|D>>>26),D=M+(N^(k|~U))+j[7]+1126891415&4294967295,M=k+(D<<10&4294967295|D>>>22),D=U+(k^(M|~N))+j[14]+2878612391&4294967295,U=M+(D<<15&4294967295|D>>>17),D=N+(M^(U|~k))+j[5]+4237533241&4294967295,N=U+(D<<21&4294967295|D>>>11),D=k+(U^(N|~M))+j[12]+1700485571&4294967295,k=N+(D<<6&4294967295|D>>>26),D=M+(N^(k|~U))+j[3]+2399980690&4294967295,M=k+(D<<10&4294967295|D>>>22),D=U+(k^(M|~N))+j[10]+4293915773&4294967295,U=M+(D<<15&4294967295|D>>>17),D=N+(M^(U|~k))+j[1]+2240044497&4294967295,N=U+(D<<21&4294967295|D>>>11),D=k+(U^(N|~M))+j[8]+1873313359&4294967295,k=N+(D<<6&4294967295|D>>>26),D=M+(N^(k|~U))+j[15]+4264355552&4294967295,M=k+(D<<10&4294967295|D>>>22),D=U+(k^(M|~N))+j[6]+2734768916&4294967295,U=M+(D<<15&4294967295|D>>>17),D=N+(M^(U|~k))+j[13]+1309151649&4294967295,N=U+(D<<21&4294967295|D>>>11),D=k+(U^(N|~M))+j[4]+4149444226&4294967295,k=N+(D<<6&4294967295|D>>>26),D=M+(N^(k|~U))+j[11]+3174756917&4294967295,M=k+(D<<10&4294967295|D>>>22),D=U+(k^(M|~N))+j[2]+718787259&4294967295,U=M+(D<<15&4294967295|D>>>17),D=N+(M^(U|~k))+j[9]+3951481745&4294967295,A.g[0]=A.g[0]+k&4294967295,A.g[1]=A.g[1]+(U+(D<<21&4294967295|D>>>11))&4294967295,A.g[2]=A.g[2]+U&4294967295,A.g[3]=A.g[3]+M&4294967295}r.prototype.u=function(A,k){k===void 0&&(k=A.length);for(var N=k-this.blockSize,j=this.B,U=this.h,M=0;M<k;){if(U==0)for(;M<=N;)i(this,A,M),M+=this.blockSize;if(typeof A=="string"){for(;M<k;)if(j[U++]=A.charCodeAt(M++),U==this.blockSize){i(this,j),U=0;break}}else for(;M<k;)if(j[U++]=A[M++],U==this.blockSize){i(this,j),U=0;break}}this.h=U,this.o+=k},r.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var k=1;k<A.length-8;++k)A[k]=0;var N=8*this.o;for(k=A.length-8;k<A.length;++k)A[k]=N&255,N/=256;for(this.u(A),A=Array(16),k=N=0;4>k;++k)for(var j=0;32>j;j+=8)A[N++]=this.g[k]>>>j&255;return A};function o(A,k){var N=c;return Object.prototype.hasOwnProperty.call(N,A)?N[A]:N[A]=k(A)}function a(A,k){this.h=k;for(var N=[],j=!0,U=A.length-1;0<=U;U--){var M=A[U]|0;j&&M==k||(N[U]=M,j=!1)}this.g=N}var c={};function d(A){return-128<=A&&128>A?o(A,function(k){return new a([k|0],0>k?-1:0)}):new a([A|0],0>A?-1:0)}function m(A){if(isNaN(A)||!isFinite(A))return v;if(0>A)return F(m(-A));for(var k=[],N=1,j=0;A>=N;j++)k[j]=A/N|0,N*=4294967296;return new a(k,0)}function _(A,k){if(A.length==0)throw Error("number format error: empty string");if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(A.charAt(0)=="-")return F(_(A.substring(1),k));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=m(Math.pow(k,8)),j=v,U=0;U<A.length;U+=8){var M=Math.min(8,A.length-U),D=parseInt(A.substring(U,U+M),k);8>M?(M=m(Math.pow(k,M)),j=j.j(M).add(m(D))):(j=j.j(N),j=j.add(m(D)))}return j}var v=d(0),x=d(1),S=d(16777216);t=a.prototype,t.m=function(){if(R(this))return-F(this).m();for(var A=0,k=1,N=0;N<this.g.length;N++){var j=this.i(N);A+=(0<=j?j:4294967296+j)*k,k*=4294967296}return A},t.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(C(this))return"0";if(R(this))return"-"+F(this).toString(A);for(var k=m(Math.pow(A,6)),N=this,j="";;){var U=z(N,k).g;N=b(N,U.j(k));var M=((0<N.g.length?N.g[0]:N.h)>>>0).toString(A);if(N=U,C(N))return M+j;for(;6>M.length;)M="0"+M;j=M+j}},t.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function C(A){if(A.h!=0)return!1;for(var k=0;k<A.g.length;k++)if(A.g[k]!=0)return!1;return!0}function R(A){return A.h==-1}t.l=function(A){return A=b(this,A),R(A)?-1:C(A)?0:1};function F(A){for(var k=A.g.length,N=[],j=0;j<k;j++)N[j]=~A.g[j];return new a(N,~A.h).add(x)}t.abs=function(){return R(this)?F(this):this},t.add=function(A){for(var k=Math.max(this.g.length,A.g.length),N=[],j=0,U=0;U<=k;U++){var M=j+(this.i(U)&65535)+(A.i(U)&65535),D=(M>>>16)+(this.i(U)>>>16)+(A.i(U)>>>16);j=D>>>16,M&=65535,D&=65535,N[U]=D<<16|M}return new a(N,N[N.length-1]&-2147483648?-1:0)};function b(A,k){return A.add(F(k))}t.j=function(A){if(C(this)||C(A))return v;if(R(this))return R(A)?F(this).j(F(A)):F(F(this).j(A));if(R(A))return F(this.j(F(A)));if(0>this.l(S)&&0>A.l(S))return m(this.m()*A.m());for(var k=this.g.length+A.g.length,N=[],j=0;j<2*k;j++)N[j]=0;for(j=0;j<this.g.length;j++)for(var U=0;U<A.g.length;U++){var M=this.i(j)>>>16,D=this.i(j)&65535,me=A.i(U)>>>16,kt=A.i(U)&65535;N[2*j+2*U]+=D*kt,T(N,2*j+2*U),N[2*j+2*U+1]+=M*kt,T(N,2*j+2*U+1),N[2*j+2*U+1]+=D*me,T(N,2*j+2*U+1),N[2*j+2*U+2]+=M*me,T(N,2*j+2*U+2)}for(j=0;j<k;j++)N[j]=N[2*j+1]<<16|N[2*j];for(j=k;j<2*k;j++)N[j]=0;return new a(N,0)};function T(A,k){for(;(A[k]&65535)!=A[k];)A[k+1]+=A[k]>>>16,A[k]&=65535,k++}function P(A,k){this.g=A,this.h=k}function z(A,k){if(C(k))throw Error("division by zero");if(C(A))return new P(v,v);if(R(A))return k=z(F(A),k),new P(F(k.g),F(k.h));if(R(k))return k=z(A,F(k)),new P(F(k.g),k.h);if(30<A.g.length){if(R(A)||R(k))throw Error("slowDivide_ only works with positive integers.");for(var N=x,j=k;0>=j.l(A);)N=K(N),j=K(j);var U=$(N,1),M=$(j,1);for(j=$(j,2),N=$(N,2);!C(j);){var D=M.add(j);0>=D.l(A)&&(U=U.add(N),M=D),j=$(j,1),N=$(N,1)}return k=b(A,U.j(k)),new P(U,k)}for(U=v;0<=A.l(k);){for(N=Math.max(1,Math.floor(A.m()/k.m())),j=Math.ceil(Math.log(N)/Math.LN2),j=48>=j?1:Math.pow(2,j-48),M=m(N),D=M.j(k);R(D)||0<D.l(A);)N-=j,M=m(N),D=M.j(k);C(M)&&(M=x),U=U.add(M),A=b(A,D)}return new P(U,A)}t.A=function(A){return z(this,A).h},t.and=function(A){for(var k=Math.max(this.g.length,A.g.length),N=[],j=0;j<k;j++)N[j]=this.i(j)&A.i(j);return new a(N,this.h&A.h)},t.or=function(A){for(var k=Math.max(this.g.length,A.g.length),N=[],j=0;j<k;j++)N[j]=this.i(j)|A.i(j);return new a(N,this.h|A.h)},t.xor=function(A){for(var k=Math.max(this.g.length,A.g.length),N=[],j=0;j<k;j++)N[j]=this.i(j)^A.i(j);return new a(N,this.h^A.h)};function K(A){for(var k=A.g.length+1,N=[],j=0;j<k;j++)N[j]=A.i(j)<<1|A.i(j-1)>>>31;return new a(N,A.h)}function $(A,k){var N=k>>5;k%=32;for(var j=A.g.length-N,U=[],M=0;M<j;M++)U[M]=0<k?A.i(M+N)>>>k|A.i(M+N+1)<<32-k:A.i(M+N);return new a(U,A.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,uk=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=m,a.fromString=_,js=a}).apply(typeof j0<"u"?j0:typeof self<"u"?self:typeof window<"u"?window:{});var uh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ck,Hl,hk,Rh,Bp,dk,fk,mk;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,g,w){return u==Array.prototype||u==Object.prototype||(u[g]=w.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof uh=="object"&&uh];for(var g=0;g<u.length;++g){var w=u[g];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var r=n(this);function i(u,g){if(g)e:{var w=r;u=u.split(".");for(var I=0;I<u.length-1;I++){var B=u[I];if(!(B in w))break e;w=w[B]}u=u[u.length-1],I=w[u],g=g(I),g!=I&&g!=null&&e(w,u,{configurable:!0,writable:!0,value:g})}}function o(u,g){u instanceof String&&(u+="");var w=0,I=!1,B={next:function(){if(!I&&w<u.length){var q=w++;return{value:g(q,u[q]),done:!1}}return I=!0,{done:!0,value:void 0}}};return B[Symbol.iterator]=function(){return B},B}i("Array.prototype.values",function(u){return u||function(){return o(this,function(g,w){return w})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},c=this||self;function d(u){var g=typeof u;return g=g!="object"?g:u?Array.isArray(u)?"array":g:"null",g=="array"||g=="object"&&typeof u.length=="number"}function m(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function _(u,g,w){return u.call.apply(u.bind,arguments)}function v(u,g,w){if(!u)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var B=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(B,I),u.apply(g,B)}}return function(){return u.apply(g,arguments)}}function x(u,g,w){return x=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:v,x.apply(null,arguments)}function S(u,g){var w=Array.prototype.slice.call(arguments,1);return function(){var I=w.slice();return I.push.apply(I,arguments),u.apply(this,I)}}function C(u,g){function w(){}w.prototype=g.prototype,u.aa=g.prototype,u.prototype=new w,u.prototype.constructor=u,u.Qb=function(I,B,q){for(var ee=Array(arguments.length-2),je=2;je<arguments.length;je++)ee[je-2]=arguments[je];return g.prototype[B].apply(I,ee)}}function R(u){const g=u.length;if(0<g){const w=Array(g);for(let I=0;I<g;I++)w[I]=u[I];return w}return[]}function F(u,g){for(let w=1;w<arguments.length;w++){const I=arguments[w];if(d(I)){const B=u.length||0,q=I.length||0;u.length=B+q;for(let ee=0;ee<q;ee++)u[B+ee]=I[ee]}else u.push(I)}}class b{constructor(g,w){this.i=g,this.j=w,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function T(u){return/^[\s\xa0]*$/.test(u)}function P(){var u=c.navigator;return u&&(u=u.userAgent)?u:""}function z(u){return z[" "](u),u}z[" "]=function(){};var K=P().indexOf("Gecko")!=-1&&!(P().toLowerCase().indexOf("webkit")!=-1&&P().indexOf("Edge")==-1)&&!(P().indexOf("Trident")!=-1||P().indexOf("MSIE")!=-1)&&P().indexOf("Edge")==-1;function $(u,g,w){for(const I in u)g.call(w,u[I],I,u)}function A(u,g){for(const w in u)g.call(void 0,u[w],w,u)}function k(u){const g={};for(const w in u)g[w]=u[w];return g}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function j(u,g){let w,I;for(let B=1;B<arguments.length;B++){I=arguments[B];for(w in I)u[w]=I[w];for(let q=0;q<N.length;q++)w=N[q],Object.prototype.hasOwnProperty.call(I,w)&&(u[w]=I[w])}}function U(u){var g=1;u=u.split(":");const w=[];for(;0<g&&u.length;)w.push(u.shift()),g--;return u.length&&w.push(u.join(":")),w}function M(u){c.setTimeout(()=>{throw u},0)}function D(){var u=ue;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class me{constructor(){this.h=this.g=null}add(g,w){const I=kt.get();I.set(g,w),this.h?this.h.next=I:this.g=I,this.h=I}}var kt=new b(()=>new vt,u=>u.reset());class vt{constructor(){this.next=this.g=this.h=null}set(g,w){this.h=g,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let Xt,G=!1,ue=new me,J=()=>{const u=c.Promise.resolve(void 0);Xt=()=>{u.then(he)}};var he=()=>{for(var u;u=D();){try{u.h.call(u.g)}catch(w){M(w)}var g=kt;g.j(u),100>g.h&&(g.h++,u.next=g.g,g.g=u)}G=!1};function we(){this.s=this.s,this.C=this.C}we.prototype.s=!1,we.prototype.ma=function(){this.s||(this.s=!0,this.N())},we.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Se(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}Se.prototype.h=function(){this.defaultPrevented=!0};var De=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const w=()=>{};c.addEventListener("test",w,g),c.removeEventListener("test",w,g)}catch{}return u}();function Te(u,g){if(Se.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var w=this.type=u.type,I=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget){if(K){e:{try{z(g.nodeName);var B=!0;break e}catch{}B=!1}B||(g=null)}}else w=="mouseover"?g=u.fromElement:w=="mouseout"&&(g=u.toElement);this.relatedTarget=g,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:pe[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Te.aa.h.call(this)}}C(Te,Se);var pe={2:"touch",3:"pen",4:"mouse"};Te.prototype.h=function(){Te.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var wt="closure_listenable_"+(1e6*Math.random()|0),lr=0;function uc(u,g,w,I,B){this.listener=u,this.proxy=null,this.src=g,this.type=w,this.capture=!!I,this.ha=B,this.key=++lr,this.da=this.fa=!1}function hi(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function di(u){this.src=u,this.g={},this.h=0}di.prototype.add=function(u,g,w,I,B){var q=u.toString();u=this.g[q],u||(u=this.g[q]=[],this.h++);var ee=ds(u,g,I,B);return-1<ee?(g=u[ee],w||(g.fa=!1)):(g=new uc(g,this.src,q,!!I,B),g.fa=w,u.push(g)),g};function Ar(u,g){var w=g.type;if(w in u.g){var I=u.g[w],B=Array.prototype.indexOf.call(I,g,void 0),q;(q=0<=B)&&Array.prototype.splice.call(I,B,1),q&&(hi(g),u.g[w].length==0&&(delete u.g[w],u.h--))}}function ds(u,g,w,I){for(var B=0;B<u.length;++B){var q=u[B];if(!q.da&&q.listener==g&&q.capture==!!w&&q.ha==I)return B}return-1}var $a="closure_lm_"+(1e6*Math.random()|0),lo={};function qa(u,g,w,I,B){if(Array.isArray(g)){for(var q=0;q<g.length;q++)qa(u,g[q],w,I,B);return null}return w=dc(w),u&&u[wt]?u.K(g,w,m(I)?!!I.capture:!1,B):Ka(u,g,w,!1,I,B)}function Ka(u,g,w,I,B,q){if(!g)throw Error("Invalid event type");var ee=m(B)?!!B.capture:!!B,je=fo(u);if(je||(u[$a]=je=new di(u)),w=je.add(g,w,I,ee,q),w.proxy)return w;if(I=uo(),w.proxy=I,I.src=u,I.listener=w,u.addEventListener)De||(B=ee),B===void 0&&(B=!1),u.addEventListener(g.toString(),I,B);else if(u.attachEvent)u.attachEvent(ho(g.toString()),I);else if(u.addListener&&u.removeListener)u.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return w}function uo(){function u(w){return g.call(u.src,u.listener,w)}const g=hc;return u}function cc(u,g,w,I,B){if(Array.isArray(g))for(var q=0;q<g.length;q++)cc(u,g[q],w,I,B);else I=m(I)?!!I.capture:!!I,w=dc(w),u&&u[wt]?(u=u.i,g=String(g).toString(),g in u.g&&(q=u.g[g],w=ds(q,w,I,B),-1<w&&(hi(q[w]),Array.prototype.splice.call(q,w,1),q.length==0&&(delete u.g[g],u.h--)))):u&&(u=fo(u))&&(g=u.g[g.toString()],u=-1,g&&(u=ds(g,w,I,B)),(w=-1<u?g[u]:null)&&co(w))}function co(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[wt])Ar(g.i,u);else{var w=u.type,I=u.proxy;g.removeEventListener?g.removeEventListener(w,I,u.capture):g.detachEvent?g.detachEvent(ho(w),I):g.addListener&&g.removeListener&&g.removeListener(I),(w=fo(g))?(Ar(w,u),w.h==0&&(w.src=null,g[$a]=null)):hi(u)}}}function ho(u){return u in lo?lo[u]:lo[u]="on"+u}function hc(u,g){if(u.da)u=!0;else{g=new Te(g,this);var w=u.listener,I=u.ha||u.src;u.fa&&co(u),u=w.call(I,g)}return u}function fo(u){return u=u[$a],u instanceof di?u:null}var Ga="__closure_events_fn_"+(1e9*Math.random()>>>0);function dc(u){return typeof u=="function"?u:(u[Ga]||(u[Ga]=function(g){return u.handleEvent(g)}),u[Ga])}function ft(){we.call(this),this.i=new di(this),this.M=this,this.F=null}C(ft,we),ft.prototype[wt]=!0,ft.prototype.removeEventListener=function(u,g,w,I){cc(this,u,g,w,I)};function It(u,g){var w,I=u.F;if(I)for(w=[];I;I=I.F)w.push(I);if(u=u.M,I=g.type||g,typeof g=="string")g=new Se(g,u);else if(g instanceof Se)g.target=g.target||u;else{var B=g;g=new Se(I,u),j(g,B)}if(B=!0,w)for(var q=w.length-1;0<=q;q--){var ee=g.g=w[q];B=fs(ee,I,!0,g)&&B}if(ee=g.g=u,B=fs(ee,I,!0,g)&&B,B=fs(ee,I,!1,g)&&B,w)for(q=0;q<w.length;q++)ee=g.g=w[q],B=fs(ee,I,!1,g)&&B}ft.prototype.N=function(){if(ft.aa.N.call(this),this.i){var u=this.i,g;for(g in u.g){for(var w=u.g[g],I=0;I<w.length;I++)hi(w[I]);delete u.g[g],u.h--}}this.F=null},ft.prototype.K=function(u,g,w,I){return this.i.add(String(u),g,!1,w,I)},ft.prototype.L=function(u,g,w,I){return this.i.add(String(u),g,!0,w,I)};function fs(u,g,w,I){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();for(var B=!0,q=0;q<g.length;++q){var ee=g[q];if(ee&&!ee.da&&ee.capture==w){var je=ee.listener,mt=ee.ha||ee.src;ee.fa&&Ar(u.i,ee),B=je.call(mt,I)!==!1&&B}}return B&&!I.defaultPrevented}function fc(u,g,w){if(typeof u=="function")w&&(u=x(u,w));else if(u&&typeof u.handleEvent=="function")u=x(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:c.setTimeout(u,g||0)}function Za(u){u.g=fc(()=>{u.g=null,u.i&&(u.i=!1,Za(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class mc extends we{constructor(g,w){super(),this.m=g,this.l=w,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Za(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ms(u){we.call(this),this.h=u,this.g={}}C(ms,we);var Qa=[];function mo(u){$(u.g,function(g,w){this.g.hasOwnProperty(w)&&co(g)},u),u.g={}}ms.prototype.N=function(){ms.aa.N.call(this),mo(this)},ms.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var po=c.JSON.stringify,Ff=c.JSON.parse,ps=class{stringify(u){return c.JSON.stringify(u,void 0)}parse(u){return c.JSON.parse(u,void 0)}};function Ya(){}Ya.prototype.h=null;function pc(u){return u.h||(u.h=u.i())}function Xa(){}var fi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function go(){Se.call(this,"d")}C(go,Se);function Ja(){Se.call(this,"c")}C(Ja,Se);var Cr={},gc=null;function _o(){return gc=gc||new ft}Cr.La="serverreachability";function _c(u){Se.call(this,Cr.La,u)}C(_c,Se);function gs(u){const g=_o();It(g,new _c(g))}Cr.STAT_EVENT="statevent";function yo(u,g){Se.call(this,Cr.STAT_EVENT,u),this.stat=g}C(yo,Se);function Ot(u){const g=_o();It(g,new yo(g,u))}Cr.Ma="timingevent";function yc(u,g){Se.call(this,Cr.Ma,u),this.size=g}C(yc,Se);function _s(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){u()},g)}function ys(){this.g=!0}ys.prototype.xa=function(){this.g=!1};function An(u,g,w,I,B,q){u.info(function(){if(u.g)if(q)for(var ee="",je=q.split("&"),mt=0;mt<je.length;mt++){var Re=je[mt].split("=");if(1<Re.length){var We=Re[0];Re=Re[1];var et=We.split("_");ee=2<=et.length&&et[1]=="type"?ee+(We+"="+Re+"&"):ee+(We+"=redacted&")}}else ee=null;else ee=q;return"XMLHTTP REQ ("+I+") [attempt "+B+"]: "+g+`
`+w+`
`+ee})}function se(u,g,w,I,B,q,ee){u.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+B+"]: "+g+`
`+w+`
`+q+" "+ee})}function Nr(u,g,w,I){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+wc(u,w)+(I?" "+I:"")})}function vc(u,g){u.info(function(){return"TIMEOUT: "+g})}ys.prototype.info=function(){};function wc(u,g){if(!u.g)return g;if(!g)return null;try{var w=JSON.parse(g);if(w){for(u=0;u<w.length;u++)if(Array.isArray(w[u])){var I=w[u];if(!(2>I.length)){var B=I[1];if(Array.isArray(B)&&!(1>B.length)){var q=B[0];if(q!="noop"&&q!="stop"&&q!="close")for(var ee=1;ee<B.length;ee++)B[ee]=""}}}}return po(w)}catch{return g}}var vs={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},vo={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},wo;function $n(){}C($n,Ya),$n.prototype.g=function(){return new XMLHttpRequest},$n.prototype.i=function(){return{}},wo=new $n;function qn(u,g,w,I){this.j=u,this.i=g,this.l=w,this.R=I||1,this.U=new ms(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new xc}function xc(){this.i=null,this.g="",this.h=!1}var Ec={},el={};function tl(u,g,w){u.L=1,u.v=Nn(ot(g)),u.m=w,u.P=!0,nl(u,null)}function nl(u,g){u.F=Date.now(),Eo(u),u.A=ot(u.v);var w=u.A,I=u.R;Array.isArray(I)||(I=[String(I)]),Ic(w.i,"t",I),u.C=0,w=u.j.J,u.h=new xc,u.g=Rc(u.j,w?g:null,!u.m),0<u.O&&(u.M=new mc(x(u.Y,u,u.g),u.O)),g=u.U,w=u.g,I=u.ca;var B="readystatechange";Array.isArray(B)||(B&&(Qa[0]=B.toString()),B=Qa);for(var q=0;q<B.length;q++){var ee=qa(w,B[q],I||g.handleEvent,!1,g.h||g);if(!ee)break;g.g[ee.key]=ee}g=u.H?k(u.H):{},u.m?(u.u||(u.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,g)):(u.u="GET",u.g.ea(u.A,u.u,null,g)),gs(),An(u.i,u.u,u.A,u.l,u.R,u.m)}qn.prototype.ca=function(u){u=u.target;const g=this.M;g&&Jt(u)==3?g.j():this.Y(u)},qn.prototype.Y=function(u){try{if(u==this.g)e:{const et=Jt(this.g);var g=this.g.Ba();const wi=this.g.Z();if(!(3>et)&&(et!=3||this.g&&(this.h.h||this.g.oa()||yl(this.g)))){this.J||et!=4||g==7||(g==8||0>=wi?gs(3):gs(2)),rl(this);var w=this.g.Z();this.X=w;t:if(Tc(this)){var I=yl(this.g);u="";var B=I.length,q=Jt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Rr(this),ws(this);var ee="";break t}this.h.i=new c.TextDecoder}for(g=0;g<B;g++)this.h.h=!0,u+=this.h.i.decode(I[g],{stream:!(q&&g==B-1)});I.length=0,this.h.g+=u,this.C=0,ee=this.h.g}else ee=this.g.oa();if(this.o=w==200,se(this.i,this.u,this.A,this.l,this.R,et,w),this.o){if(this.T&&!this.K){t:{if(this.g){var je,mt=this.g;if((je=mt.g?mt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(je)){var Re=je;break t}}Re=null}if(w=Re)Nr(this.i,this.l,w,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,xs(this,w);else{this.o=!1,this.s=3,Ot(12),Rr(this),ws(this);break e}}if(this.P){w=!0;let ct;for(;!this.J&&this.C<ee.length;)if(ct=xo(this,ee),ct==el){et==4&&(this.s=4,Ot(14),w=!1),Nr(this.i,this.l,null,"[Incomplete Response]");break}else if(ct==Ec){this.s=4,Ot(15),Nr(this.i,this.l,ee,"[Invalid Chunk]"),w=!1;break}else Nr(this.i,this.l,ct,null),xs(this,ct);if(Tc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),et!=4||ee.length!=0||this.h.h||(this.s=1,Ot(16),w=!1),this.o=this.o&&w,!w)Nr(this.i,this.l,ee,"[Invalid Chunked Response]"),Rr(this),ws(this);else if(0<ee.length&&!this.W){this.W=!0;var We=this.j;We.g==this&&We.ba&&!We.M&&(We.j.info("Great, no buffering proxy detected. Bytes received: "+ee.length),No(We),We.M=!0,Ot(11))}}else Nr(this.i,this.l,ee,null),xs(this,ee);et==4&&Rr(this),this.o&&!this.J&&(et==4?wl(this.j,this):(this.o=!1,Eo(this)))}else Uf(this.g),w==400&&0<ee.indexOf("Unknown SID")?(this.s=3,Ot(12)):(this.s=0,Ot(13)),Rr(this),ws(this)}}}catch{}finally{}};function Tc(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function xo(u,g){var w=u.C,I=g.indexOf(`
`,w);return I==-1?el:(w=Number(g.substring(w,I)),isNaN(w)?Ec:(I+=1,I+w>g.length?el:(g=g.slice(I,I+w),u.C=I+w,g)))}qn.prototype.cancel=function(){this.J=!0,Rr(this)};function Eo(u){u.S=Date.now()+u.I,kc(u,u.I)}function kc(u,g){if(u.B!=null)throw Error("WatchDog timer not null");u.B=_s(x(u.ba,u),g)}function rl(u){u.B&&(c.clearTimeout(u.B),u.B=null)}qn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(vc(this.i,this.A),this.L!=2&&(gs(),Ot(17)),Rr(this),this.s=2,ws(this)):kc(this,this.S-u)};function ws(u){u.j.G==0||u.J||wl(u.j,u)}function Rr(u){rl(u);var g=u.M;g&&typeof g.ma=="function"&&g.ma(),u.M=null,mo(u.U),u.g&&(g=u.g,u.g=null,g.abort(),g.ma())}function xs(u,g){try{var w=u.j;if(w.G!=0&&(w.g==u||be(w.h,u))){if(!u.K&&be(w.h,u)&&w.G==3){try{var I=w.Da.g.parse(g)}catch{I=null}if(Array.isArray(I)&&I.length==3){var B=I;if(B[0]==0){e:if(!w.u){if(w.g)if(w.g.F+3e3<u.F)Lo(w),Ao(w);else break e;Co(w),Ot(18)}}else w.za=B[1],0<w.za-w.T&&37500>B[2]&&w.F&&w.v==0&&!w.C&&(w.C=_s(x(w.Za,w),6e3));if(1>=mi(w.h)&&w.ca){try{w.ca()}catch{}w.ca=void 0}}else jr(w,11)}else if((u.K||w.g==u)&&Lo(w),!T(g))for(B=w.Da.g.parse(g),g=0;g<B.length;g++){let Re=B[g];if(w.T=Re[0],Re=Re[1],w.G==2)if(Re[0]=="c"){w.K=Re[1],w.ia=Re[2];const We=Re[3];We!=null&&(w.la=We,w.j.info("VER="+w.la));const et=Re[4];et!=null&&(w.Aa=et,w.j.info("SVER="+w.Aa));const wi=Re[5];wi!=null&&typeof wi=="number"&&0<wi&&(I=1.5*wi,w.L=I,w.j.info("backChannelRequestTimeoutMs_="+I)),I=w;const ct=u.g;if(ct){const Oo=ct.g?ct.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Oo){var q=I.h;q.g||Oo.indexOf("spdy")==-1&&Oo.indexOf("quic")==-1&&Oo.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&(He(q,q.h),q.h=null))}if(I.D){const hr=ct.g?ct.g.getResponseHeader("X-HTTP-Session-Id"):null;hr&&(I.ya=hr,de(I.I,I.D,hr))}}w.G=3,w.l&&w.l.ua(),w.ba&&(w.R=Date.now()-u.F,w.j.info("Handshake RTT: "+w.R+"ms")),I=w;var ee=u;if(I.qa=Mo(I,I.J?I.ia:null,I.W),ee.K){Ts(I.h,ee);var je=ee,mt=I.L;mt&&(je.I=mt),je.B&&(rl(je),Eo(je)),I.g=ee}else Zn(I);0<w.i.length&&vi(w)}else Re[0]!="stop"&&Re[0]!="close"||jr(w,7);else w.G==3&&(Re[0]=="stop"||Re[0]=="close"?Re[0]=="stop"?jr(w,7):bo(w):Re[0]!="noop"&&w.l&&w.l.ta(Re),w.v=0)}}gs(4)}catch{}}var Es=class{constructor(u,g){this.g=u,this.map=g}};function il(u){this.l=u||10,c.PerformanceNavigationTiming?(u=c.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function sl(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function mi(u){return u.h?1:u.g?u.g.size:0}function be(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function He(u,g){u.g?u.g.add(g):u.h=g}function Ts(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}il.prototype.cancel=function(){if(this.i=Lr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Lr(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const w of u.g.values())g=g.concat(w.D);return g}return R(u.i)}function pi(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(d(u)){for(var g=[],w=u.length,I=0;I<w;I++)g.push(u[I]);return g}g=[],w=0;for(I in u)g[w++]=u[I];return g}function ol(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(d(u)||typeof u=="string"){var g=[];u=u.length;for(var w=0;w<u;w++)g.push(w);return g}g=[],w=0;for(const I in u)g[w++]=I;return g}}}function ve(u,g){if(u.forEach&&typeof u.forEach=="function")u.forEach(g,void 0);else if(d(u)||typeof u=="string")Array.prototype.forEach.call(u,g,void 0);else for(var w=ol(u),I=pi(u),B=I.length,q=0;q<B;q++)g.call(void 0,I[q],w&&w[q],u)}var Qe=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function al(u,g){if(u){u=u.split("&");for(var w=0;w<u.length;w++){var I=u[w].indexOf("="),B=null;if(0<=I){var q=u[w].substring(0,I);B=u[w].substring(I+1)}else q=u[w];g(q,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function Cn(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Cn){this.h=u.h,To(this,u.j),this.o=u.o,this.g=u.g,Mr(this,u.s),this.l=u.l;var g=u.i,w=new Or;w.i=g.i,g.g&&(w.g=new Map(g.g),w.h=g.h),ur(this,w),this.m=u.m}else u&&(g=String(u).match(Qe))?(this.h=!1,To(this,g[1]||"",!0),this.o=Kn(g[2]||""),this.g=Kn(g[3]||"",!0),Mr(this,g[4]),this.l=Kn(g[5]||"",!0),ur(this,g[6]||"",!0),this.m=Kn(g[7]||"")):(this.h=!1,this.i=new Or(null,this.h))}Cn.prototype.toString=function(){var u=[],g=this.j;g&&u.push(Gn(g,gi,!0),":");var w=this.g;return(w||g=="file")&&(u.push("//"),(g=this.o)&&u.push(Gn(g,gi,!0),"@"),u.push(encodeURIComponent(String(w)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.s,w!=null&&u.push(":",String(w))),(w=this.l)&&(this.g&&w.charAt(0)!="/"&&u.push("/"),u.push(Gn(w,w.charAt(0)=="/"?cl:ul,!0))),(w=this.i.toString())&&u.push("?",w),(w=this.m)&&u.push("#",Gn(w,hl)),u.join("")};function ot(u){return new Cn(u)}function To(u,g,w){u.j=w?Kn(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function Mr(u,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);u.s=g}else u.s=null}function ur(u,g,w){g instanceof Or?(u.i=g,Rn(u.i,u.h)):(w||(g=Gn(g,ko)),u.i=new Or(g,u.h))}function de(u,g,w){u.i.set(g,w)}function Nn(u){return de(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Kn(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Gn(u,g,w){return typeof u=="string"?(u=encodeURI(u).replace(g,ll),w&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function ll(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var gi=/[#\/\?@]/g,ul=/[#\?:]/g,cl=/[#\?]/g,ko=/[#\?@]/g,hl=/#/g;function Or(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function pn(u){u.g||(u.g=new Map,u.h=0,u.i&&al(u.i,function(g,w){u.add(decodeURIComponent(g.replace(/\+/g," ")),w)}))}t=Or.prototype,t.add=function(u,g){pn(this),this.i=null,u=ae(this,u);var w=this.g.get(u);return w||this.g.set(u,w=[]),w.push(g),this.h+=1,this};function dl(u,g){pn(u),g=ae(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function Io(u,g){return pn(u),g=ae(u,g),u.g.has(g)}t.forEach=function(u,g){pn(this),this.g.forEach(function(w,I){w.forEach(function(B){u.call(g,B,I,this)},this)},this)},t.na=function(){pn(this);const u=Array.from(this.g.values()),g=Array.from(this.g.keys()),w=[];for(let I=0;I<g.length;I++){const B=u[I];for(let q=0;q<B.length;q++)w.push(g[I])}return w},t.V=function(u){pn(this);let g=[];if(typeof u=="string")Io(this,u)&&(g=g.concat(this.g.get(ae(this,u))));else{u=Array.from(this.g.values());for(let w=0;w<u.length;w++)g=g.concat(u[w])}return g},t.set=function(u,g){return pn(this),this.i=null,u=ae(this,u),Io(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},t.get=function(u,g){return u?(u=this.V(u),0<u.length?String(u[0]):g):g};function Ic(u,g,w){dl(u,g),0<w.length&&(u.i=null,u.g.set(ae(u,g),R(w)),u.h+=w.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(var w=0;w<g.length;w++){var I=g[w];const q=encodeURIComponent(String(I)),ee=this.V(I);for(I=0;I<ee.length;I++){var B=q;ee[I]!==""&&(B+="="+encodeURIComponent(String(ee[I]))),u.push(B)}}return this.i=u.join("&")};function ae(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function Rn(u,g){g&&!u.j&&(pn(u),u.i=null,u.g.forEach(function(w,I){var B=I.toLowerCase();I!=B&&(dl(this,I),Ic(this,B,w))},u)),u.j=g}function Be(u,g){const w=new ys;if(c.Image){const I=new Image;I.onload=S(Ln,w,"TestLoadImage: loaded",!0,g,I),I.onerror=S(Ln,w,"TestLoadImage: error",!1,g,I),I.onabort=S(Ln,w,"TestLoadImage: abort",!1,g,I),I.ontimeout=S(Ln,w,"TestLoadImage: timeout",!1,g,I),c.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=u}else g(!1)}function Pc(u,g){const w=new ys,I=new AbortController,B=setTimeout(()=>{I.abort(),Ln(w,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:I.signal}).then(q=>{clearTimeout(B),q.ok?Ln(w,"TestPingServer: ok",!0,g):Ln(w,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(B),Ln(w,"TestPingServer: error",!1,g)})}function Ln(u,g,w,I,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),I(w)}catch{}}function fl(){this.g=new ps}function ml(u,g,w){const I=w||"";try{ve(u,function(B,q){let ee=B;m(B)&&(ee=po(B)),g.push(I+q+"="+encodeURIComponent(ee))})}catch(B){throw g.push(I+"type="+encodeURIComponent("_badmap")),B}}function Mn(u){this.l=u.Ub||null,this.j=u.eb||!1}C(Mn,Ya),Mn.prototype.g=function(){return new _i(this.l,this.j)},Mn.prototype.i=function(u){return function(){return u}}({});function _i(u,g){ft.call(this),this.D=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(_i,ft),t=_i.prototype,t.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=g,this.readyState=1,gn(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(g.body=u),(this.D||c).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Je(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,gn(this)),this.g&&(this.readyState=3,gn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;yi(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function yi(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?Je(this):gn(this),this.readyState==3&&yi(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,Je(this))},t.Qa=function(u){this.g&&(this.response=u,Je(this))},t.ga=function(){this.g&&Je(this)};function Je(u){u.readyState=4,u.l=null,u.j=null,u.v=null,gn(u)}t.setRequestHeader=function(u,g){this.u.append(u,g)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var w=g.next();!w.done;)w=w.value,u.push(w[0]+": "+w[1]),w=g.next();return u.join(`\r
`)};function gn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(_i.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function pl(u){let g="";return $(u,function(w,I){g+=I,g+=":",g+=w,g+=`\r
`}),g}function Po(u,g,w){e:{for(I in w){var I=!1;break e}I=!0}I||(w=pl(w),typeof u=="string"?w!=null&&encodeURIComponent(String(w)):de(u,g,w))}function Ye(u){ft.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(Ye,ft);var Sc=/^https?$/i,gl=["POST","PUT"];t=Ye.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,g,w,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():wo.g(),this.v=this.o?pc(this.o):pc(wo),this.g.onreadystatechange=x(this.Ea,this);try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(q){bc(this,q);return}if(u=w||"",w=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var B in I)w.set(B,I[B]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const q of I.keys())w.set(q,I.get(q));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(w.keys()).find(q=>q.toLowerCase()=="content-type"),B=c.FormData&&u instanceof c.FormData,!(0<=Array.prototype.indexOf.call(gl,g,void 0))||I||B||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,ee]of w)this.g.setRequestHeader(q,ee);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{an(this),this.u=!0,this.g.send(u),this.u=!1}catch(q){bc(this,q)}};function bc(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.m=5,_l(u),So(u)}function _l(u){u.A||(u.A=!0,It(u,"complete"),It(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,It(this,"complete"),It(this,"abort"),So(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),So(this,!0)),Ye.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Ie(this):this.bb())},t.bb=function(){Ie(this)};function Ie(u){if(u.h&&typeof a<"u"&&(!u.v[1]||Jt(u)!=4||u.Z()!=2)){if(u.u&&Jt(u)==4)fc(u.Ea,0,u);else if(It(u,"readystatechange"),Jt(u)==4){u.h=!1;try{const ee=u.Z();e:switch(ee){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var w;if(!(w=g)){var I;if(I=ee===0){var B=String(u.D).match(Qe)[1]||null;!B&&c.self&&c.self.location&&(B=c.self.location.protocol.slice(0,-1)),I=!Sc.test(B?B.toLowerCase():"")}w=I}if(w)It(u,"complete"),It(u,"success");else{u.m=6;try{var q=2<Jt(u)?u.g.statusText:""}catch{q=""}u.l=q+" ["+u.Z()+"]",_l(u)}}finally{So(u)}}}}function So(u,g){if(u.g){an(u);const w=u.g,I=u.v[0]?()=>{}:null;u.g=null,u.v=null,g||It(u,"ready");try{w.onreadystatechange=I}catch{}}}function an(u){u.I&&(c.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function Jt(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<Jt(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),Ff(g)}};function yl(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Uf(u){const g={};u=(u.g&&2<=Jt(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<u.length;I++){if(T(u[I]))continue;var w=U(u[I]);const B=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const q=g[B]||[];g[B]=q,q.push(w)}A(g,function(I){return I.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Dr(u,g,w){return w&&w.internalChannelParams&&w.internalChannelParams[u]||g}function Ac(u){this.Aa=0,this.i=[],this.j=new ys,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Dr("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Dr("baseRetryDelayMs",5e3,u),this.cb=Dr("retryDelaySeedMs",1e4,u),this.Wa=Dr("forwardChannelMaxRetries",2,u),this.wa=Dr("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new il(u&&u.concurrentRequestLimit),this.Da=new fl,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Ac.prototype,t.la=8,t.G=1,t.connect=function(u,g,w,I){Ot(0),this.W=u,this.H=g||{},w&&I!==void 0&&(this.H.OSID=w,this.H.OAID=I),this.F=this.X,this.I=Mo(this,null,this.W),vi(this)};function bo(u){if(Cc(u),u.G==3){var g=u.U++,w=ot(u.I);if(de(w,"SID",u.K),de(w,"RID",g),de(w,"TYPE","terminate"),ks(u,w),g=new qn(u,u.j,g),g.L=2,g.v=Nn(ot(w)),w=!1,c.navigator&&c.navigator.sendBeacon)try{w=c.navigator.sendBeacon(g.v.toString(),"")}catch{}!w&&c.Image&&(new Image().src=g.v,w=!0),w||(g.g=Rc(g.j,null),g.g.ea(g.v)),g.F=Date.now(),Eo(g)}Nc(u)}function Ao(u){u.g&&(No(u),u.g.cancel(),u.g=null)}function Cc(u){Ao(u),u.u&&(c.clearTimeout(u.u),u.u=null),Lo(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&c.clearTimeout(u.s),u.s=null)}function vi(u){if(!sl(u.h)&&!u.s){u.s=!0;var g=u.Ga;Xt||J(),G||(Xt(),G=!0),ue.add(g,u),u.B=0}}function zf(u,g){return mi(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=g.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=_s(x(u.Ga,u,g),xl(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const B=new qn(this,this.j,u);let q=this.o;if(this.S&&(q?(q=k(q),j(q,this.S)):q=this.S),this.m!==null||this.O||(B.H=q,q=null),this.P)e:{for(var g=0,w=0;w<this.i.length;w++){t:{var I=this.i[w];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(g+=I,4096<g){g=w;break e}if(g===4096||w===this.i.length-1){g=w+1;break e}}g=1e3}else g=1e3;g=vl(this,B,g),w=ot(this.I),de(w,"RID",u),de(w,"CVER",22),this.D&&de(w,"X-HTTP-Session-Id",this.D),ks(this,w),q&&(this.O?g="headers="+encodeURIComponent(String(pl(q)))+"&"+g:this.m&&Po(w,this.m,q)),He(this.h,B),this.Ua&&de(w,"TYPE","init"),this.P?(de(w,"$req",g),de(w,"SID","null"),B.T=!0,tl(B,w,null)):tl(B,w,g),this.G=2}}else this.G==3&&(u?_n(this,u):this.i.length==0||sl(this.h)||_n(this))};function _n(u,g){var w;g?w=g.l:w=u.U++;const I=ot(u.I);de(I,"SID",u.K),de(I,"RID",w),de(I,"AID",u.T),ks(u,I),u.m&&u.o&&Po(I,u.m,u.o),w=new qn(u,u.j,w,u.B+1),u.m===null&&(w.H=u.o),g&&(u.i=g.D.concat(u.i)),g=vl(u,w,1e3),w.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),He(u.h,w),tl(w,I,g)}function ks(u,g){u.H&&$(u.H,function(w,I){de(g,I,w)}),u.l&&ve({},function(w,I){de(g,I,w)})}function vl(u,g,w){w=Math.min(u.i.length,w);var I=u.l?x(u.l.Na,u.l,u):null;e:{var B=u.i;let q=-1;for(;;){const ee=["count="+w];q==-1?0<w?(q=B[0].g,ee.push("ofs="+q)):q=0:ee.push("ofs="+q);let je=!0;for(let mt=0;mt<w;mt++){let Re=B[mt].g;const We=B[mt].map;if(Re-=q,0>Re)q=Math.max(0,B[mt].g-100),je=!1;else try{ml(We,ee,"req"+Re+"_")}catch{I&&I(We)}}if(je){I=ee.join("&");break e}}}return u=u.i.splice(0,w),g.D=u,I}function Zn(u){if(!u.g&&!u.u){u.Y=1;var g=u.Fa;Xt||J(),G||(Xt(),G=!0),ue.add(g,u),u.v=0}}function Co(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=_s(x(u.Fa,u),xl(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,Ro(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=_s(x(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ot(10),Ao(this),Ro(this))};function No(u){u.A!=null&&(c.clearTimeout(u.A),u.A=null)}function Ro(u){u.g=new qn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var g=ot(u.qa);de(g,"RID","rpc"),de(g,"SID",u.K),de(g,"AID",u.T),de(g,"CI",u.F?"0":"1"),!u.F&&u.ja&&de(g,"TO",u.ja),de(g,"TYPE","xmlhttp"),ks(u,g),u.m&&u.o&&Po(g,u.m,u.o),u.L&&(u.g.I=u.L);var w=u.g;u=u.ia,w.L=1,w.v=Nn(ot(g)),w.m=null,w.P=!0,nl(w,u)}t.Za=function(){this.C!=null&&(this.C=null,Ao(this),Co(this),Ot(19))};function Lo(u){u.C!=null&&(c.clearTimeout(u.C),u.C=null)}function wl(u,g){var w=null;if(u.g==g){Lo(u),No(u),u.g=null;var I=2}else if(be(u.h,g))w=g.D,Ts(u.h,g),I=1;else return;if(u.G!=0){if(g.o)if(I==1){w=g.m?g.m.length:0,g=Date.now()-g.F;var B=u.B;I=_o(),It(I,new yc(I,w)),vi(u)}else Zn(u);else if(B=g.s,B==3||B==0&&0<g.X||!(I==1&&zf(u,g)||I==2&&Co(u)))switch(w&&0<w.length&&(g=u.h,g.i=g.i.concat(w)),B){case 1:jr(u,5);break;case 4:jr(u,10);break;case 3:jr(u,6);break;default:jr(u,2)}}}function xl(u,g){let w=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(w*=2),w*g}function jr(u,g){if(u.j.info("Error code "+g),g==2){var w=x(u.fb,u),I=u.Xa;const B=!I;I=new Cn(I||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||To(I,"https"),Nn(I),B?Be(I.toString(),w):Pc(I.toString(),w)}else Ot(2);u.G=0,u.l&&u.l.sa(g),Nc(u),Cc(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Ot(2)):(this.j.info("Failed to ping google.com"),Ot(1))};function Nc(u){if(u.G=0,u.ka=[],u.l){const g=Lr(u.h);(g.length!=0||u.i.length!=0)&&(F(u.ka,g),F(u.ka,u.i),u.h.i.length=0,R(u.i),u.i.length=0),u.l.ra()}}function Mo(u,g,w){var I=w instanceof Cn?ot(w):new Cn(w);if(I.g!="")g&&(I.g=g+"."+I.g),Mr(I,I.s);else{var B=c.location;I=B.protocol,g=g?g+"."+B.hostname:B.hostname,B=+B.port;var q=new Cn(null);I&&To(q,I),g&&(q.g=g),B&&Mr(q,B),w&&(q.l=w),I=q}return w=u.D,g=u.ya,w&&g&&de(I,w,g),de(I,"VER",u.la),ks(u,I),I}function Rc(u,g,w){if(g&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Ca&&!u.pa?new Ye(new Mn({eb:w})):new Ye(u.pa),g.Ha(u.J),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function El(){}t=El.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Is(){}Is.prototype.g=function(u,g){return new Pt(u,g)};function Pt(u,g){ft.call(this),this.g=new Ac(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(u?u["X-WebChannel-Client-Profile"]=g.va:u={"X-WebChannel-Client-Profile":g.va}),this.g.S=u,(u=g&&g.Sb)&&!T(u)&&(this.g.m=u),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!T(g)&&(this.g.D=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new On(this)}C(Pt,ft),Pt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Pt.prototype.close=function(){bo(this.g)},Pt.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var w={};w.__data__=u,u=w}else this.u&&(w={},w.__data__=po(u),u=w);g.i.push(new Es(g.Ya++,u)),g.G==3&&vi(g)},Pt.prototype.N=function(){this.g.l=null,delete this.j,bo(this.g),delete this.g,Pt.aa.N.call(this)};function cr(u){go.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const w in g){u=w;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}C(cr,go);function Lc(){Ja.call(this),this.status=1}C(Lc,Ja);function On(u){this.g=u}C(On,El),On.prototype.ua=function(){It(this.g,"a")},On.prototype.ta=function(u){It(this.g,new cr(u))},On.prototype.sa=function(u){It(this.g,new Lc)},On.prototype.ra=function(){It(this.g,"b")},Is.prototype.createWebChannel=Is.prototype.g,Pt.prototype.send=Pt.prototype.o,Pt.prototype.open=Pt.prototype.m,Pt.prototype.close=Pt.prototype.close,mk=function(){return new Is},fk=function(){return _o()},dk=Cr,Bp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},vs.NO_ERROR=0,vs.TIMEOUT=8,vs.HTTP_ERROR=6,Rh=vs,vo.COMPLETE="complete",hk=vo,Xa.EventType=fi,fi.OPEN="a",fi.CLOSE="b",fi.ERROR="c",fi.MESSAGE="d",ft.prototype.listen=ft.prototype.K,Hl=Xa,Ye.prototype.listenOnce=Ye.prototype.L,Ye.prototype.getLastError=Ye.prototype.Ka,Ye.prototype.getLastErrorCode=Ye.prototype.Ba,Ye.prototype.getStatus=Ye.prototype.Z,Ye.prototype.getResponseJson=Ye.prototype.Oa,Ye.prototype.getResponseText=Ye.prototype.oa,Ye.prototype.send=Ye.prototype.ea,Ye.prototype.setWithCredentials=Ye.prototype.Ha,ck=Ye}).apply(typeof uh<"u"?uh:typeof self<"u"?self:typeof window<"u"?window:{});const V0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}qt.UNAUTHENTICATED=new qt(null),qt.GOOGLE_CREDENTIALS=new qt("google-credentials-uid"),qt.FIRST_PARTY=new qt("first-party-uid"),qt.MOCK_USER=new qt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let za="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $s=new d_("@firebase/firestore");function Ol(){return $s.logLevel}function ie(t,...e){if($s.logLevel<=Ne.DEBUG){const n=e.map(T_);$s.debug(`Firestore (${za}): ${t}`,...n)}}function si(t,...e){if($s.logLevel<=Ne.ERROR){const n=e.map(T_);$s.error(`Firestore (${za}): ${t}`,...n)}}function ba(t,...e){if($s.logLevel<=Ne.WARN){const n=e.map(T_);$s.warn(`Firestore (${za}): ${t}`,...n)}}function T_(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fe(t="Unexpected state"){const e=`FIRESTORE (${za}) INTERNAL ASSERTION FAILED: `+t;throw si(e),new Error(e)}function Ue(t,e){t||fe()}function _e(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ne extends ar{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pk{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class V2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(qt.UNAUTHENTICATED))}shutdown(){}}class F2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class U2{constructor(e){this.t=e,this.currentUser=qt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ue(this.o===void 0);let r=this.i;const i=d=>this.i!==r?(r=this.i,n(d)):Promise.resolve();let o=new Yr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Yr,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const d=o;e.enqueueRetryable(async()=>{await d.promise,await i(this.currentUser)})},c=d=>{ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(d=>c(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?c(d):(ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Yr)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ue(typeof r.accessToken=="string"),new pk(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ue(e===null||typeof e=="string"),new qt(e)}}class z2{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=qt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class B2{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new z2(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(qt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class W2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class H2{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Ue(this.o===void 0);const r=o=>{o.error!=null&&ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const a=o.token!==this.R;return this.R=o.token,ie("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ue(typeof n.token=="string"),this.R=n.token,new W2(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $2(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gk{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=$2(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%e.length))}return r}}function Oe(t,e){return t<e?-1:t>e?1:0}function Aa(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ne(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ne(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ne(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ne(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ce.fromMillis(Date.now())}static fromDate(e){return Ce.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ce(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Oe(this.nanoseconds,e.nanoseconds):Oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ge(e)}static min(){return new ge(new Ce(0,0))}static max(){return new ge(new Ce(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{constructor(e,n,r){n===void 0?n=0:n>e.length&&fe(),r===void 0?r=e.length-n:r>e.length-n&&fe(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Nu.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Nu?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=e.get(i),a=n.get(i);if(o<a)return-1;if(o>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ge extends Nu{construct(e,n,r){return new Ge(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ne(Z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Ge(n)}static emptyPath(){return new Ge([])}}const q2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Vt extends Nu{construct(e,n,r){return new Vt(e,n,r)}static isValidIdentifier(e){return q2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Vt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Vt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(r.length===0)throw new ne(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new ne(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[i+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new ne(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=d,i+=2}else c==="`"?(a=!a,i++):c!=="."||a?(r+=c,i++):(o(),i++)}if(o(),a)throw new ne(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Vt(n)}static emptyPath(){return new Vt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.path=e}static fromPath(e){return new oe(Ge.fromString(e))}static fromName(e){return new oe(Ge.fromString(e).popFirst(5))}static empty(){return new oe(Ge.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ge.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ge.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new oe(new Ge(e.slice()))}}function K2(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ge.fromTimestamp(r===1e9?new Ce(n+1,0):new Ce(n,r));return new ts(i,oe.empty(),e)}function G2(t){return new ts(t.readTime,t.key,-1)}class ts{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ts(ge.min(),oe.empty(),-1)}static max(){return new ts(ge.max(),oe.empty(),-1)}}function Z2(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=oe.comparator(t.documentKey,e.documentKey),n!==0?n:Oe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Y2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xu(t){if(t.code!==Z.FAILED_PRECONDITION||t.message!==Q2)throw t;ie("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&fe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Y((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Y?n:Y.resolve(n)}catch(n){return Y.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Y.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Y.reject(n)}static resolve(e){return new Y((n,r)=>{n(e)})}static reject(e){return new Y((n,r)=>{r(e)})}static waitFor(e){return new Y((n,r)=>{let i=0,o=0,a=!1;e.forEach(c=>{++i,c.next(()=>{++o,a&&o===i&&n()},d=>r(d))}),a=!0,o===i&&n()})}static or(e){let n=Y.resolve(!1);for(const r of e)n=n.next(i=>i?Y.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new Y((r,i)=>{const o=e.length,a=new Array(o);let c=0;for(let d=0;d<o;d++){const m=d;n(e[m]).next(_=>{a[m]=_,++c,c===o&&r(a)},_=>i(_))}})}static doWhile(e,n){return new Y((r,i)=>{const o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}}function X2(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ju(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}k_.oe=-1;function cf(t){return t==null}function vd(t){return t===0&&1/t==-1/0}function J2(t){return typeof t=="number"&&Number.isInteger(t)&&!vd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function no(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function _k(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e,n){this.comparator=e,this.root=n||jt.EMPTY}insert(e,n){return new st(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,jt.BLACK,null,null))}remove(e){return new st(this.comparator,this.root.remove(e,this.comparator).copy(null,null,jt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ch(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ch(this.root,e,this.comparator,!1)}getReverseIterator(){return new ch(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ch(this.root,e,this.comparator,!0)}}class ch{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class jt{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??jt.RED,this.left=i??jt.EMPTY,this.right=o??jt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new jt(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return jt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return jt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,jt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,jt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw fe();const e=this.left.check();if(e!==this.right.check())throw fe();return e+(this.isRed()?0:1)}}jt.EMPTY=null,jt.RED=!0,jt.BLACK=!1;jt.EMPTY=new class{constructor(){this.size=0}get key(){throw fe()}get value(){throw fe()}get color(){throw fe()}get left(){throw fe()}get right(){throw fe()}copy(e,n,r,i,o){return this}insert(e,n,r){return new jt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.comparator=e,this.data=new st(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new U0(this.data.getIterator())}getIteratorFrom(e){return new U0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ut)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ut(this.comparator);return n.data=e,n}}class U0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e){this.fields=e,e.sort(Vt.comparator)}static empty(){return new xn([])}unionWith(e){let n=new Ut(Vt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new xn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Aa(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new yk("Invalid base64 string: "+o):o}}(e);return new Bt(n)}static fromUint8Array(e){const n=function(i){let o="";for(let a=0;a<i.length;++a)o+=String.fromCharCode(i[a]);return o}(e);return new Bt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Bt.EMPTY_BYTE_STRING=new Bt("");const eL=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ns(t){if(Ue(!!t),typeof t=="string"){let e=0;const n=eL.exec(t);if(Ue(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ht(t.seconds),nanos:ht(t.nanos)}}function ht(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function qs(t){return typeof t=="string"?Bt.fromBase64String(t):Bt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I_(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function P_(t){const e=t.mapValue.fields.__previous_value__;return I_(e)?P_(e):e}function Ru(t){const e=ns(t.mapValue.fields.__local_write_time__.timestampValue);return new Ce(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tL{constructor(e,n,r,i,o,a,c,d,m){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=d,this.useFetchStreams=m}}class Lu{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Lu("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Lu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hh={mapValue:{}};function Ks(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?I_(t)?4:rL(t)?9007199254740991:nL(t)?10:11:fe()}function Pr(t,e){if(t===e)return!0;const n=Ks(t);if(n!==Ks(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ru(t).isEqual(Ru(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const a=ns(i.timestampValue),c=ns(o.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return qs(i.bytesValue).isEqual(qs(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return ht(i.geoPointValue.latitude)===ht(o.geoPointValue.latitude)&&ht(i.geoPointValue.longitude)===ht(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return ht(i.integerValue)===ht(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const a=ht(i.doubleValue),c=ht(o.doubleValue);return a===c?vd(a)===vd(c):isNaN(a)&&isNaN(c)}return!1}(t,e);case 9:return Aa(t.arrayValue.values||[],e.arrayValue.values||[],Pr);case 10:case 11:return function(i,o){const a=i.mapValue.fields||{},c=o.mapValue.fields||{};if(F0(a)!==F0(c))return!1;for(const d in a)if(a.hasOwnProperty(d)&&(c[d]===void 0||!Pr(a[d],c[d])))return!1;return!0}(t,e);default:return fe()}}function Mu(t,e){return(t.values||[]).find(n=>Pr(n,e))!==void 0}function Ca(t,e){if(t===e)return 0;const n=Ks(t),r=Ks(e);if(n!==r)return Oe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Oe(t.booleanValue,e.booleanValue);case 2:return function(o,a){const c=ht(o.integerValue||o.doubleValue),d=ht(a.integerValue||a.doubleValue);return c<d?-1:c>d?1:c===d?0:isNaN(c)?isNaN(d)?0:-1:1}(t,e);case 3:return z0(t.timestampValue,e.timestampValue);case 4:return z0(Ru(t),Ru(e));case 5:return Oe(t.stringValue,e.stringValue);case 6:return function(o,a){const c=qs(o),d=qs(a);return c.compareTo(d)}(t.bytesValue,e.bytesValue);case 7:return function(o,a){const c=o.split("/"),d=a.split("/");for(let m=0;m<c.length&&m<d.length;m++){const _=Oe(c[m],d[m]);if(_!==0)return _}return Oe(c.length,d.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,a){const c=Oe(ht(o.latitude),ht(a.latitude));return c!==0?c:Oe(ht(o.longitude),ht(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return B0(t.arrayValue,e.arrayValue);case 10:return function(o,a){var c,d,m,_;const v=o.fields||{},x=a.fields||{},S=(c=v.value)===null||c===void 0?void 0:c.arrayValue,C=(d=x.value)===null||d===void 0?void 0:d.arrayValue,R=Oe(((m=S==null?void 0:S.values)===null||m===void 0?void 0:m.length)||0,((_=C==null?void 0:C.values)===null||_===void 0?void 0:_.length)||0);return R!==0?R:B0(S,C)}(t.mapValue,e.mapValue);case 11:return function(o,a){if(o===hh.mapValue&&a===hh.mapValue)return 0;if(o===hh.mapValue)return 1;if(a===hh.mapValue)return-1;const c=o.fields||{},d=Object.keys(c),m=a.fields||{},_=Object.keys(m);d.sort(),_.sort();for(let v=0;v<d.length&&v<_.length;++v){const x=Oe(d[v],_[v]);if(x!==0)return x;const S=Ca(c[d[v]],m[_[v]]);if(S!==0)return S}return Oe(d.length,_.length)}(t.mapValue,e.mapValue);default:throw fe()}}function z0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Oe(t,e);const n=ns(t),r=ns(e),i=Oe(n.seconds,r.seconds);return i!==0?i:Oe(n.nanos,r.nanos)}function B0(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const o=Ca(n[i],r[i]);if(o)return o}return Oe(n.length,r.length)}function Na(t){return Wp(t)}function Wp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ns(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return qs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return oe.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=Wp(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const a of r)o?o=!1:i+=",",i+=`${a}:${Wp(n.fields[a])}`;return i+"}"}(t.mapValue):fe()}function W0(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Hp(t){return!!t&&"integerValue"in t}function S_(t){return!!t&&"arrayValue"in t}function H0(t){return!!t&&"nullValue"in t}function $0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Lh(t){return!!t&&"mapValue"in t}function nL(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function iu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return no(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=iu(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=iu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function rL(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.value=e}static empty(){return new cn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Lh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=iu(n)}setAll(e){let n=Vt.emptyPath(),r={},i=[];e.forEach((a,c)=>{if(!n.isImmediateParentOf(c)){const d=this.getFieldsMap(n);this.applyChanges(d,r,i),r={},i=[],n=c.popLast()}a?r[c.lastSegment()]=iu(a):i.push(c.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());Lh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Pr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Lh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){no(n,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new cn(iu(this.value))}}function vk(t){const e=[];return no(t.fields,(n,r)=>{const i=new Vt([n]);if(Lh(r)){const o=vk(r.mapValue).fields;if(o.length===0)e.push(i);else for(const a of o)e.push(i.child(a))}else e.push(i)}),new xn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e,n,r,i,o,a,c){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=a,this.documentState=c}static newInvalidDocument(e){return new Gt(e,0,ge.min(),ge.min(),ge.min(),cn.empty(),0)}static newFoundDocument(e,n,r,i){return new Gt(e,1,n,ge.min(),r,i,0)}static newNoDocument(e,n){return new Gt(e,2,n,ge.min(),ge.min(),cn.empty(),0)}static newUnknownDocument(e,n){return new Gt(e,3,n,ge.min(),ge.min(),cn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ge.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=cn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=cn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ge.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Gt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Gt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(e,n){this.position=e,this.inclusive=n}}function q0(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],a=t.position[i];if(o.field.isKeyField()?r=oe.comparator(oe.fromName(a.referenceValue),n.key):r=Ca(a,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function K0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Pr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ou{constructor(e,n="asc"){this.field=e,this.dir=n}}function iL(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wk=class{};class yt extends wk{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new oL(e,n,r):n==="array-contains"?new uL(e,r):n==="in"?new cL(e,r):n==="not-in"?new hL(e,r):n==="array-contains-any"?new dL(e,r):new yt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new aL(e,r):new lL(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ca(n,this.value)):n!==null&&Ks(this.value)===Ks(n)&&this.matchesComparison(Ca(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return fe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class sr extends wk{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new sr(e,n)}matches(e){return xk(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function xk(t){return t.op==="and"}function Ek(t){return sL(t)&&xk(t)}function sL(t){for(const e of t.filters)if(e instanceof sr)return!1;return!0}function $p(t){if(t instanceof yt)return t.field.canonicalString()+t.op.toString()+Na(t.value);if(Ek(t))return t.filters.map(e=>$p(e)).join(",");{const e=t.filters.map(n=>$p(n)).join(",");return`${t.op}(${e})`}}function Tk(t,e){return t instanceof yt?function(r,i){return i instanceof yt&&r.op===i.op&&r.field.isEqual(i.field)&&Pr(r.value,i.value)}(t,e):t instanceof sr?function(r,i){return i instanceof sr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,a,c)=>o&&Tk(a,i.filters[c]),!0):!1}(t,e):void fe()}function kk(t){return t instanceof yt?function(n){return`${n.field.canonicalString()} ${n.op} ${Na(n.value)}`}(t):t instanceof sr?function(n){return n.op.toString()+" {"+n.getFilters().map(kk).join(" ,")+"}"}(t):"Filter"}class oL extends yt{constructor(e,n,r){super(e,n,r),this.key=oe.fromName(r.referenceValue)}matches(e){const n=oe.comparator(e.key,this.key);return this.matchesComparison(n)}}class aL extends yt{constructor(e,n){super(e,"in",n),this.keys=Ik("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class lL extends yt{constructor(e,n){super(e,"not-in",n),this.keys=Ik("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Ik(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>oe.fromName(r.referenceValue))}class uL extends yt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return S_(n)&&Mu(n.arrayValue,this.value)}}class cL extends yt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Mu(this.value.arrayValue,n)}}class hL extends yt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Mu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Mu(this.value.arrayValue,n)}}class dL extends yt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!S_(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Mu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fL{constructor(e,n=null,r=[],i=[],o=null,a=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=a,this.endAt=c,this.ue=null}}function G0(t,e=null,n=[],r=[],i=null,o=null,a=null){return new fL(t,e,n,r,i,o,a)}function b_(t){const e=_e(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>$p(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),cf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Na(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Na(r)).join(",")),e.ue=n}return e.ue}function A_(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!iL(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Tk(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!K0(t.startAt,e.startAt)&&K0(t.endAt,e.endAt)}function qp(t){return oe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(e,n=null,r=[],i=[],o=null,a="F",c=null,d=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=a,this.startAt=c,this.endAt=d,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function mL(t,e,n,r,i,o,a,c){return new Ba(t,e,n,r,i,o,a,c)}function hf(t){return new Ba(t)}function Z0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Pk(t){return t.collectionGroup!==null}function su(t){const e=_e(t);if(e.ce===null){e.ce=[];const n=new Set;for(const o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let c=new Ut(Vt.comparator);return a.filters.forEach(d=>{d.getFlattenedFilters().forEach(m=>{m.isInequality()&&(c=c.add(m.field))})}),c})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Ou(o,r))}),n.has(Vt.keyField().canonicalString())||e.ce.push(new Ou(Vt.keyField(),r))}return e.ce}function kr(t){const e=_e(t);return e.le||(e.le=pL(e,su(t))),e.le}function pL(t,e){if(t.limitType==="F")return G0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new Ou(i.field,o)});const n=t.endAt?new wd(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new wd(t.startAt.position,t.startAt.inclusive):null;return G0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Kp(t,e){const n=t.filters.concat([e]);return new Ba(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Gp(t,e,n){return new Ba(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function df(t,e){return A_(kr(t),kr(e))&&t.limitType===e.limitType}function Sk(t){return`${b_(kr(t))}|lt:${t.limitType}`}function Wo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>kk(i)).join(", ")}]`),cf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Na(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Na(i)).join(",")),`Target(${r})`}(kr(t))}; limitType=${t.limitType})`}function ff(t,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):oe.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(const o of su(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(a,c,d){const m=q0(a,c,d);return a.inclusive?m<=0:m<0}(r.startAt,su(r),i)||r.endAt&&!function(a,c,d){const m=q0(a,c,d);return a.inclusive?m>=0:m>0}(r.endAt,su(r),i))}(t,e)}function gL(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function bk(t){return(e,n)=>{let r=!1;for(const i of su(t)){const o=_L(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function _L(t,e,n){const r=t.field.isKeyField()?oe.comparator(e.key,n.key):function(o,a,c){const d=a.data.field(o),m=c.data.field(o);return d!==null&&m!==null?Ca(d,m):fe()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return fe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){no(this.inner,(n,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return _k(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yL=new st(oe.comparator);function oi(){return yL}const Ak=new st(oe.comparator);function $l(...t){let e=Ak;for(const n of t)e=e.insert(n.key,n);return e}function Ck(t){let e=Ak;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ms(){return ou()}function Nk(){return ou()}function ou(){return new Wa(t=>t.toString(),(t,e)=>t.isEqual(e))}const vL=new st(oe.comparator),wL=new Ut(oe.comparator);function Ae(...t){let e=wL;for(const n of t)e=e.add(n);return e}const xL=new Ut(Oe);function EL(){return xL}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vd(e)?"-0":e}}function Rk(t){return{integerValue:""+t}}function TL(t,e){return J2(e)?Rk(e):C_(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf{constructor(){this._=void 0}}function kL(t,e,n){return t instanceof xd?function(i,o){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&I_(o)&&(o=P_(o)),o&&(a.fields.__previous_value__=o),{mapValue:a}}(n,e):t instanceof Du?Mk(t,e):t instanceof ju?Ok(t,e):function(i,o){const a=Lk(i,o),c=Q0(a)+Q0(i.Pe);return Hp(a)&&Hp(i.Pe)?Rk(c):C_(i.serializer,c)}(t,e)}function IL(t,e,n){return t instanceof Du?Mk(t,e):t instanceof ju?Ok(t,e):n}function Lk(t,e){return t instanceof Ed?function(r){return Hp(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class xd extends mf{}class Du extends mf{constructor(e){super(),this.elements=e}}function Mk(t,e){const n=Dk(e);for(const r of t.elements)n.some(i=>Pr(i,r))||n.push(r);return{arrayValue:{values:n}}}class ju extends mf{constructor(e){super(),this.elements=e}}function Ok(t,e){let n=Dk(e);for(const r of t.elements)n=n.filter(i=>!Pr(i,r));return{arrayValue:{values:n}}}class Ed extends mf{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Q0(t){return ht(t.integerValue||t.doubleValue)}function Dk(t){return S_(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function PL(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Du&&i instanceof Du||r instanceof ju&&i instanceof ju?Aa(r.elements,i.elements,Pr):r instanceof Ed&&i instanceof Ed?Pr(r.Pe,i.Pe):r instanceof xd&&i instanceof xd}(t.transform,e.transform)}class SL{constructor(e,n){this.version=e,this.transformResults=n}}class nr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new nr}static exists(e){return new nr(void 0,e)}static updateTime(e){return new nr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Mh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class pf{}function jk(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Fk(t.key,nr.none()):new ec(t.key,t.data,nr.none());{const n=t.data,r=cn.empty();let i=new Ut(Vt.comparator);for(let o of e.fields)if(!i.has(o)){let a=n.field(o);a===null&&o.length>1&&(o=o.popLast(),a=n.field(o)),a===null?r.delete(o):r.set(o,a),i=i.add(o)}return new cs(t.key,r,new xn(i.toArray()),nr.none())}}function bL(t,e,n){t instanceof ec?function(i,o,a){const c=i.value.clone(),d=X0(i.fieldTransforms,o,a.transformResults);c.setAll(d),o.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):t instanceof cs?function(i,o,a){if(!Mh(i.precondition,o))return void o.convertToUnknownDocument(a.version);const c=X0(i.fieldTransforms,o,a.transformResults),d=o.data;d.setAll(Vk(i)),d.setAll(c),o.convertToFoundDocument(a.version,d).setHasCommittedMutations()}(t,e,n):function(i,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function au(t,e,n,r){return t instanceof ec?function(o,a,c,d){if(!Mh(o.precondition,a))return c;const m=o.value.clone(),_=J0(o.fieldTransforms,d,a);return m.setAll(_),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),null}(t,e,n,r):t instanceof cs?function(o,a,c,d){if(!Mh(o.precondition,a))return c;const m=J0(o.fieldTransforms,d,a),_=a.data;return _.setAll(Vk(o)),_.setAll(m),a.convertToFoundDocument(a.version,_).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(v=>v.field))}(t,e,n,r):function(o,a,c){return Mh(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c}(t,e,n)}function AL(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=Lk(r.transform,i||null);o!=null&&(n===null&&(n=cn.empty()),n.set(r.field,o))}return n||null}function Y0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Aa(r,i,(o,a)=>PL(o,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ec extends pf{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class cs extends pf{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function Vk(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function X0(t,e,n){const r=new Map;Ue(t.length===n.length);for(let i=0;i<n.length;i++){const o=t[i],a=o.transform,c=e.data.field(o.field);r.set(o.field,IL(a,c,n[i]))}return r}function J0(t,e,n){const r=new Map;for(const i of t){const o=i.transform,a=n.data.field(i.field);r.set(i.field,kL(o,a,e))}return r}class Fk extends pf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class CL extends pf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NL{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&bL(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=au(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=au(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Nk();return this.mutations.forEach(i=>{const o=e.get(i.key),a=o.overlayedDocument;let c=this.applyToLocalView(a,o.mutatedFields);c=n.has(i.key)?null:c;const d=jk(a,c);d!==null&&r.set(i.key,d),a.isValidDocument()||a.convertToNoDocument(ge.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ae())}isEqual(e){return this.batchId===e.batchId&&Aa(this.mutations,e.mutations,(n,r)=>Y0(n,r))&&Aa(this.baseMutations,e.baseMutations,(n,r)=>Y0(n,r))}}class N_{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ue(e.mutations.length===r.length);let i=function(){return vL}();const o=e.mutations;for(let a=0;a<o.length;a++)i=i.insert(o[a].key,r[a].version);return new N_(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RL{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LL{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gt,Le;function ML(t){switch(t){default:return fe();case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0}}function Uk(t){if(t===void 0)return si("GRPC error has no .code"),Z.UNKNOWN;switch(t){case gt.OK:return Z.OK;case gt.CANCELLED:return Z.CANCELLED;case gt.UNKNOWN:return Z.UNKNOWN;case gt.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case gt.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case gt.INTERNAL:return Z.INTERNAL;case gt.UNAVAILABLE:return Z.UNAVAILABLE;case gt.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case gt.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case gt.NOT_FOUND:return Z.NOT_FOUND;case gt.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case gt.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case gt.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case gt.ABORTED:return Z.ABORTED;case gt.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case gt.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case gt.DATA_LOSS:return Z.DATA_LOSS;default:return fe()}}(Le=gt||(gt={}))[Le.OK=0]="OK",Le[Le.CANCELLED=1]="CANCELLED",Le[Le.UNKNOWN=2]="UNKNOWN",Le[Le.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Le[Le.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Le[Le.NOT_FOUND=5]="NOT_FOUND",Le[Le.ALREADY_EXISTS=6]="ALREADY_EXISTS",Le[Le.PERMISSION_DENIED=7]="PERMISSION_DENIED",Le[Le.UNAUTHENTICATED=16]="UNAUTHENTICATED",Le[Le.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Le[Le.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Le[Le.ABORTED=10]="ABORTED",Le[Le.OUT_OF_RANGE=11]="OUT_OF_RANGE",Le[Le.UNIMPLEMENTED=12]="UNIMPLEMENTED",Le[Le.INTERNAL=13]="INTERNAL",Le[Le.UNAVAILABLE=14]="UNAVAILABLE",Le[Le.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OL(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DL=new js([4294967295,4294967295],0);function ew(t){const e=OL().encode(t),n=new uk;return n.update(e),new Uint8Array(n.digest())}function tw(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new js([n,r],0),new js([i,o],0)]}class R_{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ql(`Invalid padding: ${n}`);if(r<0)throw new ql(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ql(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ql(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=js.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(js.fromNumber(r)));return i.compare(DL)===1&&(i=new js([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=ew(e),[r,i]=tw(n);for(let o=0;o<this.hashCount;o++){const a=this.Ee(r,i,o);if(!this.de(a))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new R_(o,i,n);return r.forEach(c=>a.insert(c)),a}insert(e){if(this.Ie===0)return;const n=ew(e),[r,i]=tw(n);for(let o=0;o<this.hashCount;o++){const a=this.Ee(r,i,o);this.Ae(a)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ql extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,tc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new gf(ge.min(),i,new st(Oe),oi(),Ae())}}class tc{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new tc(r,n,Ae(),Ae(),Ae())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class zk{constructor(e,n){this.targetId=e,this.me=n}}class Bk{constructor(e,n,r=Bt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class nw{constructor(){this.fe=0,this.ge=iw(),this.pe=Bt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ae(),n=Ae(),r=Ae();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:fe()}}),new tc(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=iw()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ue(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class jL{constructor(e){this.Le=e,this.Be=new Map,this.ke=oi(),this.qe=rw(),this.Qe=new st(Oe)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:fe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const o=i.target;if(qp(o))if(r===0){const a=new oe(o.path);this.Ue(n,a,Gt.newNoDocument(a,ge.min()))}else Ue(r===1);else{const a=this.Ye(n);if(a!==r){const c=this.Ze(e),d=c?this.Xe(c,e,a):1;if(d!==0){this.je(n);const m=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,m)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let a,c;try{a=qs(r).toUint8Array()}catch(d){if(d instanceof yk)return ba("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{c=new R_(a,i,o)}catch(d){return ba(d instanceof ql?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return c.Ie===0?null:c}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(o=>{const a=this.Le.tt(),c=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.Ue(n,o,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((o,a)=>{const c=this.Je(a);if(c){if(o.current&&qp(c.target)){const d=new oe(c.target.path);this.ke.get(d)!==null||this.it(a,d)||this.Ue(a,d,Gt.newNoDocument(d,e))}o.be&&(n.set(a,o.ve()),o.Ce())}});let r=Ae();this.qe.forEach((o,a)=>{let c=!0;a.forEachWhile(d=>{const m=this.Je(d);return!m||m.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(o))}),this.ke.forEach((o,a)=>a.setReadTime(e));const i=new gf(e,n,this.Qe,this.ke,r);return this.ke=oi(),this.qe=rw(),this.Qe=new st(Oe),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new nw,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Ut(Oe),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||ie("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new nw),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function rw(){return new st(oe.comparator)}function iw(){return new st(oe.comparator)}const VL={asc:"ASCENDING",desc:"DESCENDING"},FL={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},UL={and:"AND",or:"OR"};class zL{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Zp(t,e){return t.useProto3Json||cf(e)?e:{value:e}}function Td(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Wk(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function BL(t,e){return Td(t,e.toTimestamp())}function Ir(t){return Ue(!!t),ge.fromTimestamp(function(n){const r=ns(n);return new Ce(r.seconds,r.nanos)}(t))}function L_(t,e){return Qp(t,e).canonicalString()}function Qp(t,e){const n=function(i){return new Ge(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Hk(t){const e=Ge.fromString(t);return Ue(Zk(e)),e}function Yp(t,e){return L_(t.databaseId,e.path)}function bm(t,e){const n=Hk(e);if(n.get(1)!==t.databaseId.projectId)throw new ne(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ne(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new oe(qk(n))}function $k(t,e){return L_(t.databaseId,e)}function WL(t){const e=Hk(t);return e.length===4?Ge.emptyPath():qk(e)}function Xp(t){return new Ge(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function qk(t){return Ue(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function sw(t,e,n){return{name:Yp(t,e),fields:n.value.mapValue.fields}}function HL(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:fe()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(m,_){return m.useProto3Json?(Ue(_===void 0||typeof _=="string"),Bt.fromBase64String(_||"")):(Ue(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array),Bt.fromUint8Array(_||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,c=a&&function(m){const _=m.code===void 0?Z.UNKNOWN:Uk(m.code);return new ne(_,m.message||"")}(a);n=new Bk(r,i,o,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=bm(t,r.document.name),o=Ir(r.document.updateTime),a=r.document.createTime?Ir(r.document.createTime):ge.min(),c=new cn({mapValue:{fields:r.document.fields}}),d=Gt.newFoundDocument(i,o,a,c),m=r.targetIds||[],_=r.removedTargetIds||[];n=new Oh(m,_,d.key,d)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=bm(t,r.document),o=r.readTime?Ir(r.readTime):ge.min(),a=Gt.newNoDocument(i,o),c=r.removedTargetIds||[];n=new Oh([],c,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=bm(t,r.document),o=r.removedTargetIds||[];n=new Oh([],o,i,null)}else{if(!("filter"in e))return fe();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,a=new LL(i,o),c=r.targetId;n=new zk(c,a)}}return n}function $L(t,e){let n;if(e instanceof ec)n={update:sw(t,e.key,e.value)};else if(e instanceof Fk)n={delete:Yp(t,e.key)};else if(e instanceof cs)n={update:sw(t,e.key,e.data),updateMask:eM(e.fieldMask)};else{if(!(e instanceof CL))return fe();n={verify:Yp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,a){const c=a.transform;if(c instanceof xd)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Du)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof ju)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Ed)return{fieldPath:a.field.canonicalString(),increment:c.Pe};throw fe()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:BL(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:fe()}(t,e.precondition)),n}function qL(t,e){return t&&t.length>0?(Ue(e!==void 0),t.map(n=>function(i,o){let a=i.updateTime?Ir(i.updateTime):Ir(o);return a.isEqual(ge.min())&&(a=Ir(o)),new SL(a,i.transformResults||[])}(n,e))):[]}function KL(t,e){return{documents:[$k(t,e.path)]}}function GL(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=$k(t,i);const o=function(m){if(m.length!==0)return Gk(sr.create(m,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const a=function(m){if(m.length!==0)return m.map(_=>function(x){return{field:Ho(x.field),direction:YL(x.dir)}}(_))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const c=Zp(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(m){return{before:m.inclusive,values:m.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(m){return{before:!m.inclusive,values:m.position}}(e.endAt)),{_t:n,parent:i}}function ZL(t){let e=WL(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ue(r===1);const _=n.from[0];_.allDescendants?i=_.collectionId:e=e.child(_.collectionId)}let o=[];n.where&&(o=function(v){const x=Kk(v);return x instanceof sr&&Ek(x)?x.getFilters():[x]}(n.where));let a=[];n.orderBy&&(a=function(v){return v.map(x=>function(C){return new Ou($o(C.field),function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(x))}(n.orderBy));let c=null;n.limit&&(c=function(v){let x;return x=typeof v=="object"?v.value:v,cf(x)?null:x}(n.limit));let d=null;n.startAt&&(d=function(v){const x=!!v.before,S=v.values||[];return new wd(S,x)}(n.startAt));let m=null;return n.endAt&&(m=function(v){const x=!v.before,S=v.values||[];return new wd(S,x)}(n.endAt)),mL(e,i,a,o,c,"F",d,m)}function QL(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return fe()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Kk(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=$o(n.unaryFilter.field);return yt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=$o(n.unaryFilter.field);return yt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=$o(n.unaryFilter.field);return yt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=$o(n.unaryFilter.field);return yt.create(a,"!=",{nullValue:"NULL_VALUE"});default:return fe()}}(t):t.fieldFilter!==void 0?function(n){return yt.create($o(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return fe()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return sr.create(n.compositeFilter.filters.map(r=>Kk(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return fe()}}(n.compositeFilter.op))}(t):fe()}function YL(t){return VL[t]}function XL(t){return FL[t]}function JL(t){return UL[t]}function Ho(t){return{fieldPath:t.canonicalString()}}function $o(t){return Vt.fromServerFormat(t.fieldPath)}function Gk(t){return t instanceof yt?function(n){if(n.op==="=="){if($0(n.value))return{unaryFilter:{field:Ho(n.field),op:"IS_NAN"}};if(H0(n.value))return{unaryFilter:{field:Ho(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if($0(n.value))return{unaryFilter:{field:Ho(n.field),op:"IS_NOT_NAN"}};if(H0(n.value))return{unaryFilter:{field:Ho(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ho(n.field),op:XL(n.op),value:n.value}}}(t):t instanceof sr?function(n){const r=n.getFilters().map(i=>Gk(i));return r.length===1?r[0]:{compositeFilter:{op:JL(n.op),filters:r}}}(t):fe()}function eM(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Zk(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(e,n,r,i,o=ge.min(),a=ge.min(),c=Bt.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=d}withSequenceNumber(e){return new Vi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Vi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Vi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Vi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tM{constructor(e){this.ct=e}}function nM(t){const e=ZL({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Gp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rM{constructor(){this.un=new iM}addToCollectionParentIndex(e,n){return this.un.add(n),Y.resolve()}getCollectionParents(e,n){return Y.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return Y.resolve()}deleteFieldIndex(e,n){return Y.resolve()}deleteAllFieldIndexes(e){return Y.resolve()}createTargetIndexes(e,n){return Y.resolve()}getDocumentsMatchingTarget(e,n){return Y.resolve(null)}getIndexType(e,n){return Y.resolve(0)}getFieldIndexes(e,n){return Y.resolve([])}getNextCollectionGroupToUpdate(e){return Y.resolve(null)}getMinOffset(e,n){return Y.resolve(ts.min())}getMinOffsetFromCollectionGroup(e,n){return Y.resolve(ts.min())}updateCollectionGroup(e,n,r){return Y.resolve()}updateIndexEntries(e,n){return Y.resolve()}}class iM{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ut(Ge.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ut(Ge.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Ra(0)}static kn(){return new Ra(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sM{constructor(){this.changes=new Wa(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Gt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Y.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oM{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aM{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&au(r.mutation,i,xn.empty(),Ce.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ae()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ae()){const i=Ms();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let a=$l();return o.forEach((c,d)=>{a=a.insert(c,d.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=Ms();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ae()))}populateOverlays(e,n,r){const i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((a,c)=>{n.set(a,c)})})}computeViews(e,n,r,i){let o=oi();const a=ou(),c=function(){return ou()}();return n.forEach((d,m)=>{const _=r.get(m.key);i.has(m.key)&&(_===void 0||_.mutation instanceof cs)?o=o.insert(m.key,m):_!==void 0?(a.set(m.key,_.mutation.getFieldMask()),au(_.mutation,m,_.mutation.getFieldMask(),Ce.now())):a.set(m.key,xn.empty())}),this.recalculateAndSaveOverlays(e,o).next(d=>(d.forEach((m,_)=>a.set(m,_)),n.forEach((m,_)=>{var v;return c.set(m,new oM(_,(v=a.get(m))!==null&&v!==void 0?v:null))}),c))}recalculateAndSaveOverlays(e,n){const r=ou();let i=new st((a,c)=>a-c),o=Ae();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const c of a)c.keys().forEach(d=>{const m=n.get(d);if(m===null)return;let _=r.get(d)||xn.empty();_=c.applyToLocalView(m,_),r.set(d,_);const v=(i.get(c.batchId)||Ae()).add(d);i=i.insert(c.batchId,v)})}).next(()=>{const a=[],c=i.getReverseIterator();for(;c.hasNext();){const d=c.getNext(),m=d.key,_=d.value,v=Nk();_.forEach(x=>{if(!o.has(x)){const S=jk(n.get(x),r.get(x));S!==null&&v.set(x,S),o=o.add(x)}}),a.push(this.documentOverlayCache.saveOverlays(e,m,v))}return Y.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(a){return oe.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Pk(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{const a=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):Y.resolve(Ms());let c=-1,d=o;return a.next(m=>Y.forEach(m,(_,v)=>(c<v.largestBatchId&&(c=v.largestBatchId),o.get(_)?Y.resolve():this.remoteDocumentCache.getEntry(e,_).next(x=>{d=d.insert(_,x)}))).next(()=>this.populateOverlays(e,m,o)).next(()=>this.computeViews(e,d,m,Ae())).next(_=>({batchId:c,changes:Ck(_)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new oe(n)).next(r=>{let i=$l();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const o=n.collectionGroup;let a=$l();return this.indexManager.getCollectionParents(e,o).next(c=>Y.forEach(c,d=>{const m=function(v,x){return new Ba(x,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(n,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,m,r,i).next(_=>{_.forEach((v,x)=>{a=a.insert(v,x)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(a=>{o.forEach((d,m)=>{const _=m.getKey();a.get(_)===null&&(a=a.insert(_,Gt.newInvalidDocument(_)))});let c=$l();return a.forEach((d,m)=>{const _=o.get(d);_!==void 0&&au(_.mutation,m,xn.empty(),Ce.now()),ff(n,m)&&(c=c.insert(d,m))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lM{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return Y.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Ir(i.createTime)}}(n)),Y.resolve()}getNamedQuery(e,n){return Y.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:nM(i.bundledQuery),readTime:Ir(i.readTime)}}(n)),Y.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uM{constructor(){this.overlays=new st(oe.comparator),this.Ir=new Map}getOverlay(e,n){return Y.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ms();return Y.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.ht(e,n,o)}),Y.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),Y.resolve()}getOverlaysForCollection(e,n,r){const i=Ms(),o=n.length+1,a=new oe(n.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){const d=c.getNext().value,m=d.getKey();if(!n.isPrefixOf(m.path))break;m.path.length===o&&d.largestBatchId>r&&i.set(d.getKey(),d)}return Y.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new st((m,_)=>m-_);const a=this.overlays.getIterator();for(;a.hasNext();){const m=a.getNext().value;if(m.getKey().getCollectionGroup()===n&&m.largestBatchId>r){let _=o.get(m.largestBatchId);_===null&&(_=Ms(),o=o.insert(m.largestBatchId,_)),_.set(m.getKey(),m)}}const c=Ms(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((m,_)=>c.set(m,_)),!(c.size()>=i)););return Y.resolve(c)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new RL(n,r));let o=this.Ir.get(n);o===void 0&&(o=Ae(),this.Ir.set(n,o)),this.Ir.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cM{constructor(){this.sessionToken=Bt.EMPTY_BYTE_STRING}getSessionToken(e){return Y.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Y.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M_{constructor(){this.Tr=new Ut(At.Er),this.dr=new Ut(At.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new At(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new At(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new oe(new Ge([])),r=new At(n,e),i=new At(n,e+1),o=[];return this.dr.forEachInRange([r,i],a=>{this.Vr(a),o.push(a.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new oe(new Ge([])),r=new At(n,e),i=new At(n,e+1);let o=Ae();return this.dr.forEachInRange([r,i],a=>{o=o.add(a.key)}),o}containsKey(e){const n=new At(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class At{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return oe.comparator(e.key,n.key)||Oe(e.wr,n.wr)}static Ar(e,n){return Oe(e.wr,n.wr)||oe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hM{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Ut(At.Er)}checkEmpty(e){return Y.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new NL(o,n,r,i);this.mutationQueue.push(a);for(const c of i)this.br=this.br.add(new At(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return Y.resolve(a)}lookupMutationBatch(e,n){return Y.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),o=i<0?0:i;return Y.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return Y.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Y.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new At(n,0),i=new At(n,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],a=>{const c=this.Dr(a.wr);o.push(c)}),Y.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ut(Oe);return n.forEach(i=>{const o=new At(i,0),a=new At(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,a],c=>{r=r.add(c.wr)})}),Y.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;oe.isDocumentKey(o)||(o=o.child(""));const a=new At(new oe(o),0);let c=new Ut(Oe);return this.br.forEachWhile(d=>{const m=d.key.path;return!!r.isPrefixOf(m)&&(m.length===i&&(c=c.add(d.wr)),!0)},a),Y.resolve(this.Cr(c))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ue(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return Y.forEach(n.mutations,i=>{const o=new At(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new At(n,0),i=this.br.firstAfterOrEqual(r);return Y.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Y.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dM{constructor(e){this.Mr=e,this.docs=function(){return new st(oe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,a=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Y.resolve(r?r.document.mutableCopy():Gt.newInvalidDocument(n))}getEntries(e,n){let r=oi();return n.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Gt.newInvalidDocument(i))}),Y.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=oi();const a=n.path,c=new oe(a.child("")),d=this.docs.getIteratorFrom(c);for(;d.hasNext();){const{key:m,value:{document:_}}=d.getNext();if(!a.isPrefixOf(m.path))break;m.path.length>a.length+1||Z2(G2(_),r)<=0||(i.has(_.key)||ff(n,_))&&(o=o.insert(_.key,_.mutableCopy()))}return Y.resolve(o)}getAllFromCollectionGroup(e,n,r,i){fe()}Or(e,n){return Y.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new fM(this)}getSize(e){return Y.resolve(this.size)}}class fM extends sM{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),Y.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mM{constructor(e){this.persistence=e,this.Nr=new Wa(n=>b_(n),A_),this.lastRemoteSnapshotVersion=ge.min(),this.highestTargetId=0,this.Lr=0,this.Br=new M_,this.targetCount=0,this.kr=Ra.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),Y.resolve()}getLastRemoteSnapshotVersion(e){return Y.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Y.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Y.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),Y.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Ra(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,Y.resolve()}updateTargetData(e,n){return this.Kn(n),Y.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,Y.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.Nr.forEach((a,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.Nr.delete(a),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),Y.waitFor(o).next(()=>i)}getTargetCount(e){return Y.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return Y.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),Y.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(a=>{o.push(i.markPotentiallyOrphaned(e,a))}),Y.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),Y.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return Y.resolve(r)}containsKey(e,n){return Y.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pM{constructor(e,n){this.qr={},this.overlays={},this.Qr=new k_(0),this.Kr=!1,this.Kr=!0,this.$r=new cM,this.referenceDelegate=e(this),this.Ur=new mM(this),this.indexManager=new rM,this.remoteDocumentCache=function(i){return new dM(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new tM(n),this.Gr=new lM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new uM,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new hM(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){ie("MemoryPersistence","Starting transaction:",e);const i=new gM(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,n){return Y.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class gM extends Y2{constructor(e){super(),this.currentSequenceNumber=e}}class O_{constructor(e){this.persistence=e,this.Jr=new M_,this.Yr=null}static Zr(e){return new O_(e)}get Xr(){if(this.Yr)return this.Yr;throw fe()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),Y.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),Y.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),Y.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Y.forEach(this.Xr,r=>{const i=oe.fromPath(r);return this.ei(e,i).next(o=>{o||n.removeEntry(i,ge.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return Y.or([()=>Y.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D_{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=Ae(),i=Ae();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new D_(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _M{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yM{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return iC()?8:X2(Yt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const o={result:null};return this.Yi(e,n).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.Zi(e,n,i,r).next(a=>{o.result=a})}).next(()=>{if(o.result)return;const a=new _M;return this.Xi(e,n,a).next(c=>{if(o.result=c,this.zi)return this.es(e,n,a,c.size)})}).next(()=>o.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Ol()<=Ne.DEBUG&&ie("QueryEngine","SDK will not create cache indexes for query:",Wo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Y.resolve()):(Ol()<=Ne.DEBUG&&ie("QueryEngine","Query:",Wo(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Ol()<=Ne.DEBUG&&ie("QueryEngine","The SDK decides to create cache indexes for query:",Wo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,kr(n))):Y.resolve())}Yi(e,n){if(Z0(n))return Y.resolve(null);let r=kr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Gp(n,null,"F"),r=kr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const a=Ae(...o);return this.Ji.getDocuments(e,a).next(c=>this.indexManager.getMinOffset(e,r).next(d=>{const m=this.ts(n,c);return this.ns(n,m,a,d.readTime)?this.Yi(e,Gp(n,null,"F")):this.rs(e,m,n,d)}))})))}Zi(e,n,r,i){return Z0(n)||i.isEqual(ge.min())?Y.resolve(null):this.Ji.getDocuments(e,r).next(o=>{const a=this.ts(n,o);return this.ns(n,a,r,i)?Y.resolve(null):(Ol()<=Ne.DEBUG&&ie("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Wo(n)),this.rs(e,a,n,K2(i,-1)).next(c=>c))})}ts(e,n){let r=new Ut(bk(e));return n.forEach((i,o)=>{ff(e,o)&&(r=r.add(o))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,n,r){return Ol()<=Ne.DEBUG&&ie("QueryEngine","Using full collection scan to execute query:",Wo(n)),this.Ji.getDocumentsMatchingQuery(e,n,ts.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(a=>{o=o.insert(a.key,a)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vM{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new st(Oe),this._s=new Wa(o=>b_(o),A_),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new aM(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function wM(t,e,n,r){return new vM(t,e,n,r)}async function Qk(t,e){const n=_e(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const a=[],c=[];let d=Ae();for(const m of i){a.push(m.batchId);for(const _ of m.mutations)d=d.add(_.key)}for(const m of o){c.push(m.batchId);for(const _ of m.mutations)d=d.add(_.key)}return n.localDocuments.getDocuments(r,d).next(m=>({hs:m,removedBatchIds:a,addedBatchIds:c}))})})}function xM(t,e){const n=_e(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=n.cs.newChangeBuffer({trackRemovals:!0});return function(c,d,m,_){const v=m.batch,x=v.keys();let S=Y.resolve();return x.forEach(C=>{S=S.next(()=>_.getEntry(d,C)).next(R=>{const F=m.docVersions.get(C);Ue(F!==null),R.version.compareTo(F)<0&&(v.applyToRemoteDocument(R,m),R.isValidDocument()&&(R.setReadTime(m.commitVersion),_.addEntry(R)))})}),S.next(()=>c.mutationQueue.removeMutationBatch(d,v))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let d=Ae();for(let m=0;m<c.mutationResults.length;++m)c.mutationResults[m].transformResults.length>0&&(d=d.add(c.batch.mutations[m].key));return d}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function Yk(t){const e=_e(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function EM(t,e){const n=_e(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const a=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const c=[];e.targetChanges.forEach((_,v)=>{const x=i.get(v);if(!x)return;c.push(n.Ur.removeMatchingKeys(o,_.removedDocuments,v).next(()=>n.Ur.addMatchingKeys(o,_.addedDocuments,v)));let S=x.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(v)!==null?S=S.withResumeToken(Bt.EMPTY_BYTE_STRING,ge.min()).withLastLimboFreeSnapshotVersion(ge.min()):_.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(_.resumeToken,r)),i=i.insert(v,S),function(R,F,b){return R.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=3e8?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(x,S,_)&&c.push(n.Ur.updateTargetData(o,S))});let d=oi(),m=Ae();if(e.documentUpdates.forEach(_=>{e.resolvedLimboDocuments.has(_)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(o,_))}),c.push(TM(o,a,e.documentUpdates).next(_=>{d=_.Ps,m=_.Is})),!r.isEqual(ge.min())){const _=n.Ur.getLastRemoteSnapshotVersion(o).next(v=>n.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));c.push(_)}return Y.waitFor(c).next(()=>a.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,d,m)).next(()=>d)}).then(o=>(n.os=i,o))}function TM(t,e,n){let r=Ae(),i=Ae();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let a=oi();return n.forEach((c,d)=>{const m=o.get(c);d.isFoundDocument()!==m.isFoundDocument()&&(i=i.add(c)),d.isNoDocument()&&d.version.isEqual(ge.min())?(e.removeEntry(c,d.readTime),a=a.insert(c,d)):!m.isValidDocument()||d.version.compareTo(m.version)>0||d.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(d),a=a.insert(c,d)):ie("LocalStore","Ignoring outdated watch update for ",c,". Current version:",m.version," Watch version:",d.version)}),{Ps:a,Is:i}})}function kM(t,e){const n=_e(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function IM(t,e){const n=_e(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(o=>o?(i=o,Y.resolve(i)):n.Ur.allocateTargetId(r).next(a=>(i=new Vi(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Jp(t,e,n){const r=_e(t),i=r.os.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,a=>r.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!Ju(a))throw a;ie("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function ow(t,e,n){const r=_e(t);let i=ge.min(),o=Ae();return r.persistence.runTransaction("Execute query","readwrite",a=>function(d,m,_){const v=_e(d),x=v._s.get(_);return x!==void 0?Y.resolve(v.os.get(x)):v.Ur.getTargetData(m,_)}(r,a,kr(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(a,c.targetId).next(d=>{o=d})}).next(()=>r.ss.getDocumentsMatchingQuery(a,e,n?i:ge.min(),n?o:Ae())).next(c=>(PM(r,gL(e),c),{documents:c,Ts:o})))}function PM(t,e,n){let r=t.us.get(e)||ge.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.us.set(e,r)}class aw{constructor(){this.activeTargetIds=EL()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class SM{constructor(){this.so=new aw,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new aw,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bM{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ie("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ie("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dh=null;function Am(){return dh===null?dh=function(){return 268435456+Math.round(2147483648*Math.random())}():dh++,"0x"+dh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CM{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $t="WebChannelConnection";class NM extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(n,r,i,o,a){const c=Am(),d=this.xo(n,r.toUriEncodedString());ie("RestConnection",`Sending RPC '${n}' ${c}:`,d,i);const m={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(m,o,a),this.No(n,d,m,i).then(_=>(ie("RestConnection",`Received RPC '${n}' ${c}: `,_),_),_=>{throw ba("RestConnection",`RPC '${n}' ${c} failed with error: `,_,"url: ",d,"request:",i),_})}Lo(n,r,i,o,a,c){return this.Mo(n,r,i,o,a)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+za}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,a)=>n[a]=o),i&&i.headers.forEach((o,a)=>n[a]=o)}xo(n,r){const i=AM[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const o=Am();return new Promise((a,c)=>{const d=new ck;d.setWithCredentials(!0),d.listenOnce(hk.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Rh.NO_ERROR:const _=d.getResponseJson();ie($t,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(_)),a(_);break;case Rh.TIMEOUT:ie($t,`RPC '${e}' ${o} timed out`),c(new ne(Z.DEADLINE_EXCEEDED,"Request time out"));break;case Rh.HTTP_ERROR:const v=d.getStatus();if(ie($t,`RPC '${e}' ${o} failed with status:`,v,"response text:",d.getResponseText()),v>0){let x=d.getResponseJson();Array.isArray(x)&&(x=x[0]);const S=x==null?void 0:x.error;if(S&&S.status&&S.message){const C=function(F){const b=F.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(b)>=0?b:Z.UNKNOWN}(S.status);c(new ne(C,S.message))}else c(new ne(Z.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new ne(Z.UNAVAILABLE,"Connection failed."));break;default:fe()}}finally{ie($t,`RPC '${e}' ${o} completed.`)}});const m=JSON.stringify(i);ie($t,`RPC '${e}' ${o} sending request:`,i),d.send(n,"POST",m,r,15)})}Bo(e,n,r){const i=Am(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=mk(),c=fk(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(d.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Oo(d.initMessageHeaders,n,r),d.encodeInitMessageHeaders=!0;const _=o.join("");ie($t,`Creating RPC '${e}' stream ${i}: ${_}`,d);const v=a.createWebChannel(_,d);let x=!1,S=!1;const C=new CM({Io:F=>{S?ie($t,`Not sending because RPC '${e}' stream ${i} is closed:`,F):(x||(ie($t,`Opening RPC '${e}' stream ${i} transport.`),v.open(),x=!0),ie($t,`RPC '${e}' stream ${i} sending:`,F),v.send(F))},To:()=>v.close()}),R=(F,b,T)=>{F.listen(b,P=>{try{T(P)}catch(z){setTimeout(()=>{throw z},0)}})};return R(v,Hl.EventType.OPEN,()=>{S||(ie($t,`RPC '${e}' stream ${i} transport opened.`),C.yo())}),R(v,Hl.EventType.CLOSE,()=>{S||(S=!0,ie($t,`RPC '${e}' stream ${i} transport closed`),C.So())}),R(v,Hl.EventType.ERROR,F=>{S||(S=!0,ba($t,`RPC '${e}' stream ${i} transport errored:`,F),C.So(new ne(Z.UNAVAILABLE,"The operation could not be completed")))}),R(v,Hl.EventType.MESSAGE,F=>{var b;if(!S){const T=F.data[0];Ue(!!T);const P=T,z=P.error||((b=P[0])===null||b===void 0?void 0:b.error);if(z){ie($t,`RPC '${e}' stream ${i} received error:`,z);const K=z.status;let $=function(N){const j=gt[N];if(j!==void 0)return Uk(j)}(K),A=z.message;$===void 0&&($=Z.INTERNAL,A="Unknown error status: "+K+" with message "+z.message),S=!0,C.So(new ne($,A)),v.close()}else ie($t,`RPC '${e}' stream ${i} received:`,T),C.bo(T)}}),R(c,dk.STAT_EVENT,F=>{F.stat===Bp.PROXY?ie($t,`RPC '${e}' stream ${i} detected buffering proxy`):F.stat===Bp.NOPROXY&&ie($t,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{C.wo()},0),C}}function Cm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _f(t){return new zL(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk{constructor(e,n,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&ie("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jk{constructor(e,n,r,i,o,a,c,d){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=d,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Xk(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===Z.RESOURCE_EXHAUSTED?(si(n.toString()),si("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new ne(Z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ie("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(ie("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class RM extends Jk{constructor(e,n,r,i,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,a),this.serializer=o}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=HL(this.serializer,e),r=function(o){if(!("targetChange"in o))return ge.min();const a=o.targetChange;return a.targetIds&&a.targetIds.length?ge.min():a.readTime?Ir(a.readTime):ge.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Xp(this.serializer),n.addTarget=function(o,a){let c;const d=a.target;if(c=qp(d)?{documents:KL(o,d)}:{query:GL(o,d)._t},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=Wk(o,a.resumeToken);const m=Zp(o,a.expectedCount);m!==null&&(c.expectedCount=m)}else if(a.snapshotVersion.compareTo(ge.min())>0){c.readTime=Td(o,a.snapshotVersion.toTimestamp());const m=Zp(o,a.expectedCount);m!==null&&(c.expectedCount=m)}return c}(this.serializer,e);const r=QL(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Xp(this.serializer),n.removeTarget=e,this.a_(n)}}class LM extends Jk{constructor(e,n,r,i,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,a),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Ue(!!e.streamToken),this.lastStreamToken=e.streamToken,Ue(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ue(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=qL(e.writeResults,e.commitTime),r=Ir(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Xp(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>$L(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MM extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new ne(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Mo(e,Qp(n,r),i,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ne(Z.UNKNOWN,o.toString())})}Lo(e,n,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.Lo(e,Qp(n,r),i,a,c,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ne(Z.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class OM{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(si(n),this.D_=!1):ie("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DM{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(a=>{r.enqueueAndForget(async()=>{ro(this)&&(ie("RemoteStore","Restarting streams for network reachability change."),await async function(d){const m=_e(d);m.L_.add(4),await nc(m),m.q_.set("Unknown"),m.L_.delete(4),await yf(m)}(this))})}),this.q_=new OM(r,i)}}async function yf(t){if(ro(t))for(const e of t.B_)await e(!0)}async function nc(t){for(const e of t.B_)await e(!1)}function eI(t,e){const n=_e(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),U_(n)?F_(n):Ha(n).r_()&&V_(n,e))}function j_(t,e){const n=_e(t),r=Ha(n);n.N_.delete(e),r.r_()&&tI(n,e),n.N_.size===0&&(r.r_()?r.o_():ro(n)&&n.q_.set("Unknown"))}function V_(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ge.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ha(t).A_(e)}function tI(t,e){t.Q_.xe(e),Ha(t).R_(e)}function F_(t){t.Q_=new jL({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ha(t).start(),t.q_.v_()}function U_(t){return ro(t)&&!Ha(t).n_()&&t.N_.size>0}function ro(t){return _e(t).L_.size===0}function nI(t){t.Q_=void 0}async function jM(t){t.q_.set("Online")}async function VM(t){t.N_.forEach((e,n)=>{V_(t,e)})}async function FM(t,e){nI(t),U_(t)?(t.q_.M_(e),F_(t)):t.q_.set("Unknown")}async function UM(t,e,n){if(t.q_.set("Online"),e instanceof Bk&&e.state===2&&e.cause)try{await async function(i,o){const a=o.cause;for(const c of o.targetIds)i.N_.has(c)&&(await i.remoteSyncer.rejectListen(c,a),i.N_.delete(c),i.Q_.removeTarget(c))}(t,e)}catch(r){ie("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await kd(t,r)}else if(e instanceof Oh?t.Q_.Ke(e):e instanceof zk?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ge.min()))try{const r=await Yk(t.localStore);n.compareTo(r)>=0&&await function(o,a){const c=o.Q_.rt(a);return c.targetChanges.forEach((d,m)=>{if(d.resumeToken.approximateByteSize()>0){const _=o.N_.get(m);_&&o.N_.set(m,_.withResumeToken(d.resumeToken,a))}}),c.targetMismatches.forEach((d,m)=>{const _=o.N_.get(d);if(!_)return;o.N_.set(d,_.withResumeToken(Bt.EMPTY_BYTE_STRING,_.snapshotVersion)),tI(o,d);const v=new Vi(_.target,d,m,_.sequenceNumber);V_(o,v)}),o.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){ie("RemoteStore","Failed to raise snapshot:",r),await kd(t,r)}}async function kd(t,e,n){if(!Ju(e))throw e;t.L_.add(1),await nc(t),t.q_.set("Offline"),n||(n=()=>Yk(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ie("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await yf(t)})}function rI(t,e){return e().catch(n=>kd(t,n,e))}async function vf(t){const e=_e(t),n=rs(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;zM(e);)try{const i=await kM(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,BM(e,i)}catch(i){await kd(e,i)}iI(e)&&sI(e)}function zM(t){return ro(t)&&t.O_.length<10}function BM(t,e){t.O_.push(e);const n=rs(t);n.r_()&&n.V_&&n.m_(e.mutations)}function iI(t){return ro(t)&&!rs(t).n_()&&t.O_.length>0}function sI(t){rs(t).start()}async function WM(t){rs(t).p_()}async function HM(t){const e=rs(t);for(const n of t.O_)e.m_(n.mutations)}async function $M(t,e,n){const r=t.O_.shift(),i=N_.from(r,e,n);await rI(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await vf(t)}async function qM(t,e){e&&rs(t).V_&&await async function(r,i){if(function(a){return ML(a)&&a!==Z.ABORTED}(i.code)){const o=r.O_.shift();rs(r).s_(),await rI(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await vf(r)}}(t,e),iI(t)&&sI(t)}async function uw(t,e){const n=_e(t);n.asyncQueue.verifyOperationInProgress(),ie("RemoteStore","RemoteStore received new credentials");const r=ro(n);n.L_.add(3),await nc(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await yf(n)}async function KM(t,e){const n=_e(t);e?(n.L_.delete(2),await yf(n)):e||(n.L_.add(2),await nc(n),n.q_.set("Unknown"))}function Ha(t){return t.K_||(t.K_=function(n,r,i){const o=_e(n);return o.w_(),new RM(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Eo:jM.bind(null,t),Ro:VM.bind(null,t),mo:FM.bind(null,t),d_:UM.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),U_(t)?F_(t):t.q_.set("Unknown")):(await t.K_.stop(),nI(t))})),t.K_}function rs(t){return t.U_||(t.U_=function(n,r,i){const o=_e(n);return o.w_(),new LM(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:WM.bind(null,t),mo:qM.bind(null,t),f_:HM.bind(null,t),g_:$M.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await vf(t)):(await t.U_.stop(),t.O_.length>0&&(ie("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z_{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Yr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const a=Date.now()+r,c=new z_(e,n,a,i,o);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ne(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function B_(t,e){if(si("AsyncQueue",`${e}: ${t}`),Ju(t))return new ne(Z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(e){this.comparator=e?(n,r)=>e(n,r)||oe.comparator(n.key,r.key):(n,r)=>oe.comparator(n.key,r.key),this.keyedMap=$l(),this.sortedSet=new st(this.comparator)}static emptySet(e){return new pa(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof pa)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new pa;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cw{constructor(){this.W_=new st(oe.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):fe():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class La{constructor(e,n,r,i,o,a,c,d,m){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=d,this.hasCachedResults=m}static fromInitialDocuments(e,n,r,i,o){const a=[];return n.forEach(c=>{a.push({type:0,doc:c})}),new La(e,n,pa.emptySet(n),a,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&df(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GM{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class ZM{constructor(){this.queries=hw(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=_e(n),o=i.queries;i.queries=hw(),o.forEach((a,c)=>{for(const d of c.j_)d.onError(r)})})(this,new ne(Z.ABORTED,"Firestore shutting down"))}}function hw(){return new Wa(t=>Sk(t),df)}async function W_(t,e){const n=_e(t);let r=3;const i=e.query;let o=n.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new GM,r=e.J_()?0:1);try{switch(r){case 0:o.z_=await n.onListen(i,!0);break;case 1:o.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(a){const c=B_(a,`Initialization of query '${Wo(e.query)}' failed`);return void e.onError(c)}n.queries.set(i,o),o.j_.push(e),e.Z_(n.onlineState),o.z_&&e.X_(o.z_)&&$_(n)}async function H_(t,e){const n=_e(t),r=e.query;let i=3;const o=n.queries.get(r);if(o){const a=o.j_.indexOf(e);a>=0&&(o.j_.splice(a,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function QM(t,e){const n=_e(t);let r=!1;for(const i of e){const o=i.query,a=n.queries.get(o);if(a){for(const c of a.j_)c.X_(i)&&(r=!0);a.z_=i}}r&&$_(n)}function YM(t,e,n){const r=_e(t),i=r.queries.get(e);if(i)for(const o of i.j_)o.onError(n);r.queries.delete(e)}function $_(t){t.Y_.forEach(e=>{e.next()})}var eg,dw;(dw=eg||(eg={})).ea="default",dw.Cache="cache";class q_{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new La(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=La.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==eg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(e){this.key=e}}class aI{constructor(e){this.key=e}}class XM{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ae(),this.mutatedKeys=Ae(),this.Aa=bk(e),this.Ra=new pa(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new cw,i=n?n.Ra:this.Ra;let o=n?n.mutatedKeys:this.mutatedKeys,a=i,c=!1;const d=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,m=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((_,v)=>{const x=i.get(_),S=ff(this.query,v)?v:null,C=!!x&&this.mutatedKeys.has(x.key),R=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let F=!1;x&&S?x.data.isEqual(S.data)?C!==R&&(r.track({type:3,doc:S}),F=!0):this.ga(x,S)||(r.track({type:2,doc:S}),F=!0,(d&&this.Aa(S,d)>0||m&&this.Aa(S,m)<0)&&(c=!0)):!x&&S?(r.track({type:0,doc:S}),F=!0):x&&!S&&(r.track({type:1,doc:x}),F=!0,(d||m)&&(c=!0)),F&&(S?(a=a.add(S),o=R?o.add(_):o.delete(_)):(a=a.delete(_),o=o.delete(_)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const _=this.query.limitType==="F"?a.last():a.first();a=a.delete(_.key),o=o.delete(_.key),r.track({type:1,doc:_})}return{Ra:a,fa:r,ns:c,mutatedKeys:o}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((_,v)=>function(S,C){const R=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return fe()}};return R(S)-R(C)}(_.type,v.type)||this.Aa(_.doc,v.doc)),this.pa(r),i=i!=null&&i;const c=n&&!i?this.ya():[],d=this.da.size===0&&this.current&&!i?1:0,m=d!==this.Ea;return this.Ea=d,a.length!==0||m?{snapshot:new La(this.query,e.Ra,o,a,e.mutatedKeys,d===0,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new cw,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ae(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new aI(r))}),this.da.forEach(r=>{e.has(r)||n.push(new oI(r))}),n}ba(e){this.Ta=e.Ts,this.da=Ae();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return La.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class JM{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class eO{constructor(e){this.key=e,this.va=!1}}class tO{constructor(e,n,r,i,o,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new Wa(c=>Sk(c),df),this.Ma=new Map,this.xa=new Set,this.Oa=new st(oe.comparator),this.Na=new Map,this.La=new M_,this.Ba={},this.ka=new Map,this.qa=Ra.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function nO(t,e,n=!0){const r=fI(t);let i;const o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=await lI(r,e,n,!0),i}async function rO(t,e){const n=fI(t);await lI(n,e,!0,!1)}async function lI(t,e,n,r){const i=await IM(t.localStore,kr(e)),o=i.targetId,a=t.sharedClientState.addLocalQueryTarget(o,n);let c;return r&&(c=await iO(t,e,o,a==="current",i.resumeToken)),t.isPrimaryClient&&n&&eI(t.remoteStore,i),c}async function iO(t,e,n,r,i){t.Ka=(v,x,S)=>async function(R,F,b,T){let P=F.view.ma(b);P.ns&&(P=await ow(R.localStore,F.query,!1).then(({documents:A})=>F.view.ma(A,P)));const z=T&&T.targetChanges.get(F.targetId),K=T&&T.targetMismatches.get(F.targetId)!=null,$=F.view.applyChanges(P,R.isPrimaryClient,z,K);return mw(R,F.targetId,$.wa),$.snapshot}(t,v,x,S);const o=await ow(t.localStore,e,!0),a=new XM(e,o.Ts),c=a.ma(o.documents),d=tc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),m=a.applyChanges(c,t.isPrimaryClient,d);mw(t,n,m.wa);const _=new JM(e,n,a);return t.Fa.set(e,_),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),m.snapshot}async function sO(t,e,n){const r=_e(t),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(a=>!df(a,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Jp(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&j_(r.remoteStore,i.targetId),tg(r,i.targetId)}).catch(Xu)):(tg(r,i.targetId),await Jp(r.localStore,i.targetId,!0))}async function oO(t,e){const n=_e(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),j_(n.remoteStore,r.targetId))}async function aO(t,e,n){const r=mO(t);try{const i=await function(a,c){const d=_e(a),m=Ce.now(),_=c.reduce((S,C)=>S.add(C.key),Ae());let v,x;return d.persistence.runTransaction("Locally write mutations","readwrite",S=>{let C=oi(),R=Ae();return d.cs.getEntries(S,_).next(F=>{C=F,C.forEach((b,T)=>{T.isValidDocument()||(R=R.add(b))})}).next(()=>d.localDocuments.getOverlayedDocuments(S,C)).next(F=>{v=F;const b=[];for(const T of c){const P=AL(T,v.get(T.key).overlayedDocument);P!=null&&b.push(new cs(T.key,P,vk(P.value.mapValue),nr.exists(!0)))}return d.mutationQueue.addMutationBatch(S,m,b,c)}).next(F=>{x=F;const b=F.applyToLocalDocumentSet(v,R);return d.documentOverlayCache.saveOverlays(S,F.batchId,b)})}).then(()=>({batchId:x.batchId,changes:Ck(v)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,c,d){let m=a.Ba[a.currentUser.toKey()];m||(m=new st(Oe)),m=m.insert(c,d),a.Ba[a.currentUser.toKey()]=m}(r,i.batchId,n),await rc(r,i.changes),await vf(r.remoteStore)}catch(i){const o=B_(i,"Failed to persist write");n.reject(o)}}async function uI(t,e){const n=_e(t);try{const r=await EM(n.localStore,e);e.targetChanges.forEach((i,o)=>{const a=n.Na.get(o);a&&(Ue(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?a.va=!0:i.modifiedDocuments.size>0?Ue(a.va):i.removedDocuments.size>0&&(Ue(a.va),a.va=!1))}),await rc(n,r,e)}catch(r){await Xu(r)}}function fw(t,e,n){const r=_e(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((o,a)=>{const c=a.view.Z_(e);c.snapshot&&i.push(c.snapshot)}),function(a,c){const d=_e(a);d.onlineState=c;let m=!1;d.queries.forEach((_,v)=>{for(const x of v.j_)x.Z_(c)&&(m=!0)}),m&&$_(d)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function lO(t,e,n){const r=_e(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),o=i&&i.key;if(o){let a=new st(oe.comparator);a=a.insert(o,Gt.newNoDocument(o,ge.min()));const c=Ae().add(o),d=new gf(ge.min(),new Map,new st(Oe),a,c);await uI(r,d),r.Oa=r.Oa.remove(o),r.Na.delete(e),K_(r)}else await Jp(r.localStore,e,!1).then(()=>tg(r,e,n)).catch(Xu)}async function uO(t,e){const n=_e(t),r=e.batch.batchId;try{const i=await xM(n.localStore,e);hI(n,r,null),cI(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await rc(n,i)}catch(i){await Xu(i)}}async function cO(t,e,n){const r=_e(t);try{const i=await function(a,c){const d=_e(a);return d.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let _;return d.mutationQueue.lookupMutationBatch(m,c).next(v=>(Ue(v!==null),_=v.keys(),d.mutationQueue.removeMutationBatch(m,v))).next(()=>d.mutationQueue.performConsistencyCheck(m)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(m,_,c)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,_)).next(()=>d.localDocuments.getDocuments(m,_))})}(r.localStore,e);hI(r,e,n),cI(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await rc(r,i)}catch(i){await Xu(i)}}function cI(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function hI(t,e,n){const r=_e(t);let i=r.Ba[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function tg(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||dI(t,r)})}function dI(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(j_(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),K_(t))}function mw(t,e,n){for(const r of n)r instanceof oI?(t.La.addReference(r.key,e),hO(t,r)):r instanceof aI?(ie("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||dI(t,r.key)):fe()}function hO(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(ie("SyncEngine","New document in limbo: "+n),t.xa.add(r),K_(t))}function K_(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new oe(Ge.fromString(e)),r=t.qa.next();t.Na.set(r,new eO(n)),t.Oa=t.Oa.insert(n,r),eI(t.remoteStore,new Vi(kr(hf(n.path)),r,"TargetPurposeLimboResolution",k_.oe))}}async function rc(t,e,n){const r=_e(t),i=[],o=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((c,d)=>{a.push(r.Ka(d,e,n).then(m=>{var _;if((m||n)&&r.isPrimaryClient){const v=m?!m.fromCache:(_=n==null?void 0:n.targetChanges.get(d.targetId))===null||_===void 0?void 0:_.current;r.sharedClientState.updateQueryState(d.targetId,v?"current":"not-current")}if(m){i.push(m);const v=D_.Wi(d.targetId,m);o.push(v)}}))}),await Promise.all(a),r.Ca.d_(i),await async function(d,m){const _=_e(d);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>Y.forEach(m,x=>Y.forEach(x.$i,S=>_.persistence.referenceDelegate.addReference(v,x.targetId,S)).next(()=>Y.forEach(x.Ui,S=>_.persistence.referenceDelegate.removeReference(v,x.targetId,S)))))}catch(v){if(!Ju(v))throw v;ie("LocalStore","Failed to update sequence numbers: "+v)}for(const v of m){const x=v.targetId;if(!v.fromCache){const S=_.os.get(x),C=S.snapshotVersion,R=S.withLastLimboFreeSnapshotVersion(C);_.os=_.os.insert(x,R)}}}(r.localStore,o))}async function dO(t,e){const n=_e(t);if(!n.currentUser.isEqual(e)){ie("SyncEngine","User change. New user:",e.toKey());const r=await Qk(n.localStore,e);n.currentUser=e,function(o,a){o.ka.forEach(c=>{c.forEach(d=>{d.reject(new ne(Z.CANCELLED,a))})}),o.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await rc(n,r.hs)}}function fO(t,e){const n=_e(t),r=n.Na.get(e);if(r&&r.va)return Ae().add(r.key);{let i=Ae();const o=n.Ma.get(e);if(!o)return i;for(const a of o){const c=n.Fa.get(a);i=i.unionWith(c.view.Va)}return i}}function fI(t){const e=_e(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=uI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=fO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=lO.bind(null,e),e.Ca.d_=QM.bind(null,e.eventManager),e.Ca.$a=YM.bind(null,e.eventManager),e}function mO(t){const e=_e(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=uO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=cO.bind(null,e),e}class Id{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=_f(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return wM(this.persistence,new yM,e.initialUser,this.serializer)}Ga(e){return new pM(O_.Zr,this.serializer)}Wa(e){return new SM}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Id.provider={build:()=>new Id};class ng{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>fw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=dO.bind(null,this.syncEngine),await KM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new ZM}()}createDatastore(e){const n=_f(e.databaseInfo.databaseId),r=function(o){return new NM(o)}(e.databaseInfo);return function(o,a,c,d){return new MM(o,a,c,d)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,o,a,c){return new DM(r,i,o,a,c)}(this.localStore,this.datastore,e.asyncQueue,n=>fw(this.syncEngine,n,0),function(){return lw.D()?new lw:new bM}())}createSyncEngine(e,n){return function(i,o,a,c,d,m,_){const v=new tO(i,o,a,c,d,m);return _&&(v.Qa=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const o=_e(i);ie("RemoteStore","RemoteStore shutting down."),o.L_.add(5),await nc(o),o.k_.shutdown(),o.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}ng.provider={build:()=>new ng};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):si("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pO{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=qt.UNAUTHENTICATED,this.clientId=gk.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async a=>{ie("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(ie("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Yr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=B_(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Nm(t,e){t.asyncQueue.verifyOperationInProgress(),ie("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Qk(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function pw(t,e){t.asyncQueue.verifyOperationInProgress();const n=await gO(t);ie("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>uw(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>uw(e.remoteStore,i)),t._onlineComponents=e}async function gO(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ie("FirestoreClient","Using user provided OfflineComponentProvider");try{await Nm(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===Z.FAILED_PRECONDITION||i.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;ba("Error using user provided cache. Falling back to memory cache: "+n),await Nm(t,new Id)}}else ie("FirestoreClient","Using default OfflineComponentProvider"),await Nm(t,new Id);return t._offlineComponents}async function mI(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ie("FirestoreClient","Using user provided OnlineComponentProvider"),await pw(t,t._uninitializedComponentsProvider._online)):(ie("FirestoreClient","Using default OnlineComponentProvider"),await pw(t,new ng))),t._onlineComponents}function _O(t){return mI(t).then(e=>e.syncEngine)}async function Pd(t){const e=await mI(t),n=e.eventManager;return n.onListen=nO.bind(null,e.syncEngine),n.onUnlisten=sO.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=rO.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=oO.bind(null,e.syncEngine),n}function yO(t,e,n={}){const r=new Yr;return t.asyncQueue.enqueueAndForget(async()=>function(o,a,c,d,m){const _=new G_({next:x=>{_.Za(),a.enqueueAndForget(()=>H_(o,v));const S=x.docs.has(c);!S&&x.fromCache?m.reject(new ne(Z.UNAVAILABLE,"Failed to get document because the client is offline.")):S&&x.fromCache&&d&&d.source==="server"?m.reject(new ne(Z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(x)},error:x=>m.reject(x)}),v=new q_(hf(c.path),_,{includeMetadataChanges:!0,_a:!0});return W_(o,v)}(await Pd(t),t.asyncQueue,e,n,r)),r.promise}function vO(t,e,n={}){const r=new Yr;return t.asyncQueue.enqueueAndForget(async()=>function(o,a,c,d,m){const _=new G_({next:x=>{_.Za(),a.enqueueAndForget(()=>H_(o,v)),x.fromCache&&d.source==="server"?m.reject(new ne(Z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(x)},error:x=>m.reject(x)}),v=new q_(c,_,{includeMetadataChanges:!0,_a:!0});return W_(o,v)}(await Pd(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gw=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gI(t,e,n){if(!n)throw new ne(Z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function wO(t,e,n,r){if(e===!0&&r===!0)throw new ne(Z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function _w(t){if(!oe.isDocumentKey(t))throw new ne(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function yw(t){if(oe.isDocumentKey(t))throw new ne(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function wf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":fe()}function kn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ne(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=wf(t);throw new ne(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vw{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ne(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ne(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}wO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=pI((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new ne(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new ne(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new ne(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class xf{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vw({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ne(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ne(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vw(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new V2;switch(r.type){case"firstParty":return new B2(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ne(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=gw.get(n);r&&(ie("ComponentProvider","Removing Datastore"),gw.delete(n),r.terminate())}(this),Promise.resolve()}}function xO(t,e,n,r={}){var i;const o=(t=kn(t,xf))._getSettings(),a=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==a&&ba("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:a,ssl:!1})),r.mockUserToken){let c,d;if(typeof r.mockUserToken=="string")c=r.mockUserToken,d=qt.MOCK_USER;else{c=TT(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new ne(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new qt(m)}t._authCredentials=new F2(new pk(c,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new hs(this.firestore,e,this._query)}}class Zt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Yi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Zt(this.firestore,e,this._key)}}class Yi extends hs{constructor(e,n,r){super(e,n,hf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Zt(this.firestore,null,new oe(e))}withConverter(e){return new Yi(this.firestore,e,this._path)}}function io(t,e,...n){if(t=ze(t),gI("collection","path",e),t instanceof xf){const r=Ge.fromString(e,...n);return yw(r),new Yi(t,null,r)}{if(!(t instanceof Zt||t instanceof Yi))throw new ne(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ge.fromString(e,...n));return yw(r),new Yi(t.firestore,null,r)}}function Hn(t,e,...n){if(t=ze(t),arguments.length===1&&(e=gk.newId()),gI("doc","path",e),t instanceof xf){const r=Ge.fromString(e,...n);return _w(r),new Zt(t,null,new oe(r))}{if(!(t instanceof Zt||t instanceof Yi))throw new ne(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ge.fromString(e,...n));return _w(r),new Zt(t.firestore,t instanceof Yi?t.converter:null,new oe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Xk(this,"async_queue_retry"),this.Vu=()=>{const r=Cm();r&&ie("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Cm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Cm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Yr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ju(e))throw e;ie("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(a){let c=a.message||"";return a.stack&&(c=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),c}(r);throw si("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=z_.createAndSchedule(this,e,n,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&fe()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function xw(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(t,["next","error","complete"])}class is extends xf{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new ww,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ww(e),this._firestoreClient=void 0,await e}}}function EO(t,e){const n=typeof t=="object"?t:sf(),r=typeof t=="string"?t:"(default)",i=Gu(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=h_("firestore");o&&xO(i,...o)}return i}function Ef(t){if(t._terminated)throw new ne(Z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||TO(t),t._firestoreClient}function TO(t){var e,n,r;const i=t._freezeSettings(),o=function(c,d,m,_){return new tL(c,d,m,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,pI(_.experimentalLongPollingOptions),_.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new pO(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(c){const d=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(d),_online:d}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ma(Bt.fromBase64String(e))}catch(n){throw new ne(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ma(Bt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ne(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Vt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z_{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q_{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ne(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ne(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Oe(this._lat,e._lat)||Oe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kO=/^__.*__$/;class IO{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new cs(e,this.data,this.fieldMask,n,this.fieldTransforms):new ec(e,this.data,n,this.fieldTransforms)}}class _I{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new cs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function yI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fe()}}class X_{constructor(e,n,r,i,o,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new X_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Sd(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(yI(this.Cu)&&kO.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class PO{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||_f(e)}Qu(e,n,r,i=!1){return new X_({Cu:e,methodName:n,qu:r,path:Vt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function kf(t){const e=t._freezeSettings(),n=_f(t._databaseId);return new PO(t._databaseId,!!e.ignoreUndefinedProperties,n)}function vI(t,e,n,r,i,o={}){const a=t.Qu(o.merge||o.mergeFields?2:0,e,n,i);J_("Data must be an object, but it was:",a,r);const c=wI(r,a);let d,m;if(o.merge)d=new xn(a.fieldMask),m=a.fieldTransforms;else if(o.mergeFields){const _=[];for(const v of o.mergeFields){const x=rg(e,v,n);if(!a.contains(x))throw new ne(Z.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);EI(_,x)||_.push(x)}d=new xn(_),m=a.fieldTransforms.filter(v=>d.covers(v.field))}else d=null,m=a.fieldTransforms;return new IO(new cn(c),d,m)}class If extends Z_{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof If}}function SO(t,e,n,r){const i=t.Qu(1,e,n);J_("Data must be an object, but it was:",i,r);const o=[],a=cn.empty();no(r,(d,m)=>{const _=ey(e,d,n);m=ze(m);const v=i.Nu(_);if(m instanceof If)o.push(_);else{const x=ic(m,v);x!=null&&(o.push(_),a.set(_,x))}});const c=new xn(o);return new _I(a,c,i.fieldTransforms)}function bO(t,e,n,r,i,o){const a=t.Qu(1,e,n),c=[rg(e,r,n)],d=[i];if(o.length%2!=0)throw new ne(Z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<o.length;x+=2)c.push(rg(e,o[x])),d.push(o[x+1]);const m=[],_=cn.empty();for(let x=c.length-1;x>=0;--x)if(!EI(m,c[x])){const S=c[x];let C=d[x];C=ze(C);const R=a.Nu(S);if(C instanceof If)m.push(S);else{const F=ic(C,R);F!=null&&(m.push(S),_.set(S,F))}}const v=new xn(m);return new _I(_,v,a.fieldTransforms)}function AO(t,e,n,r=!1){return ic(n,t.Qu(r?4:3,e))}function ic(t,e){if(xI(t=ze(t)))return J_("Unsupported field value:",e,t),wI(t,e);if(t instanceof Z_)return function(r,i){if(!yI(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const o=[];let a=0;for(const c of r){let d=ic(c,i.Lu(a));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),a++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=ze(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return TL(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=Ce.fromDate(r);return{timestampValue:Td(i.serializer,o)}}if(r instanceof Ce){const o=new Ce(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Td(i.serializer,o)}}if(r instanceof Q_)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ma)return{bytesValue:Wk(i.serializer,r._byteString)};if(r instanceof Zt){const o=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(o))throw i.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:L_(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Y_)return function(a,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(d=>{if(typeof d!="number")throw c.Bu("VectorValues must only contain numeric values.");return C_(c.serializer,d)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${wf(r)}`)}(t,e)}function wI(t,e){const n={};return _k(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):no(t,(r,i)=>{const o=ic(i,e.Mu(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function xI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ce||t instanceof Q_||t instanceof Ma||t instanceof Zt||t instanceof Z_||t instanceof Y_)}function J_(t,e,n){if(!xI(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=wf(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function rg(t,e,n){if((e=ze(e))instanceof Tf)return e._internalPath;if(typeof e=="string")return ey(t,e);throw Sd("Field path arguments must be of type string or ",t,!1,void 0,n)}const CO=new RegExp("[~\\*/\\[\\]]");function ey(t,e,n){if(e.search(CO)>=0)throw Sd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Tf(...e.split("."))._internalPath}catch{throw Sd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Sd(t,e,n,r,i){const o=r&&!r.isEmpty(),a=i!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let d="";return(o||a)&&(d+=" (found",o&&(d+=` in field ${r}`),a&&(d+=` in document ${i}`),d+=")"),new ne(Z.INVALID_ARGUMENT,c+t+d)}function EI(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Zt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new NO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Pf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class NO extends TI{data(){return super.data()}}function Pf(t,e){return typeof e=="string"?ey(t,e):e instanceof Tf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kI(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ne(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ty{}class II extends ty{}function Gs(t,e,...n){let r=[];e instanceof ty&&r.push(e),r=r.concat(n),function(o){const a=o.filter(d=>d instanceof ny).length,c=o.filter(d=>d instanceof Sf).length;if(a>1||a>0&&c>0)throw new ne(Z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Sf extends II{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Sf(e,n,r)}_apply(e){const n=this._parse(e);return PI(e._query,n),new hs(e.firestore,e.converter,Kp(e._query,n))}_parse(e){const n=kf(e.firestore);return function(o,a,c,d,m,_,v){let x;if(m.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new ne(Z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){Tw(v,_);const S=[];for(const C of v)S.push(Ew(d,o,C));x={arrayValue:{values:S}}}else x=Ew(d,o,v)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||Tw(v,_),x=AO(c,a,v,_==="in"||_==="not-in");return yt.create(m,_,x)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Wr(t,e,n){const r=e,i=Pf("where",t);return Sf._create(i,r,n)}class ny extends ty{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new ny(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:sr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,o){let a=i;const c=o.getFlattenedFilters();for(const d of c)PI(a,d),a=Kp(a,d)}(e._query,n),new hs(e.firestore,e.converter,Kp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class ry extends II{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new ry(e,n)}_apply(e){const n=function(i,o,a){if(i.startAt!==null)throw new ne(Z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new ne(Z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ou(o,a)}(e._query,this._field,this._direction);return new hs(e.firestore,e.converter,function(i,o){const a=i.explicitOrderBy.concat([o]);return new Ba(i.path,i.collectionGroup,a,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function Oa(t,e="asc"){const n=e,r=Pf("orderBy",t);return ry._create(r,n)}function Ew(t,e,n){if(typeof(n=ze(n))=="string"){if(n==="")throw new ne(Z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Pk(e)&&n.indexOf("/")!==-1)throw new ne(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ge.fromString(n));if(!oe.isDocumentKey(r))throw new ne(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return W0(t,new oe(r))}if(n instanceof Zt)return W0(t,n._key);throw new ne(Z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${wf(n)}.`)}function Tw(t,e){if(!Array.isArray(t)||t.length===0)throw new ne(Z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function PI(t,e){const n=function(i,o){for(const a of i)for(const c of a.getFlattenedFilters())if(o.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ne(Z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ne(Z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class RO{convertValue(e,n="none"){switch(Ks(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ht(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(qs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw fe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return no(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;const o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(a=>ht(a.doubleValue));return new Y_(o)}convertGeoPoint(e){return new Q_(ht(e.latitude),ht(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=P_(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ru(e));default:return null}}convertTimestamp(e){const n=ns(e);return new Ce(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ge.fromString(e);Ue(Zk(r));const i=new Lu(r.get(1),r.get(3)),o=new oe(r.popFirst(5));return i.isEqual(n)||si(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SI(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class bI extends TI{constructor(e,n,r,i,o,a){super(e,n,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Dh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Pf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Dh extends bI{data(e={}){return super.data(e)}}class AI{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Kl(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Dh(this._firestore,this._userDataWriter,r.key,r,new Kl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ne(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(c=>{const d=new Dh(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Kl(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:d,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{const d=new Dh(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Kl(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let m=-1,_=-1;return c.type!==0&&(m=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(a=a.add(c.doc),_=a.indexOf(c.doc.key)),{type:LO(c.type),doc:d,oldIndex:m,newIndex:_}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function LO(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return fe()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function so(t){t=kn(t,Zt);const e=kn(t.firestore,is);return yO(Ef(e),t._key).then(n=>CI(e,t,n))}class iy extends RO{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ma(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Zt(this.firestore,null,n)}}function sy(t){t=kn(t,hs);const e=kn(t.firestore,is),n=Ef(e),r=new iy(e);return kI(t._query),vO(n,t._query).then(i=>new AI(e,r,t,i))}function sc(t,e,n){t=kn(t,Zt);const r=kn(t.firestore,is),i=SI(t.converter,e);return oy(r,[vI(kf(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,nr.none())])}function bf(t,e,n,...r){t=kn(t,Zt);const i=kn(t.firestore,is),o=kf(i);let a;return a=typeof(e=ze(e))=="string"||e instanceof Tf?bO(o,"updateDoc",t._key,e,n,r):SO(o,"updateDoc",t._key,e),oy(i,[a.toMutation(t._key,nr.exists(!0))])}function MO(t,e){const n=kn(t.firestore,is),r=Hn(t),i=SI(t.converter,e);return oy(n,[vI(kf(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,nr.exists(!1))]).then(()=>r)}function Af(t,...e){var n,r,i;t=ze(t);let o={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||xw(e[a])||(o=e[a],a++);const c={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(xw(e[a])){const v=e[a];e[a]=(n=v.next)===null||n===void 0?void 0:n.bind(v),e[a+1]=(r=v.error)===null||r===void 0?void 0:r.bind(v),e[a+2]=(i=v.complete)===null||i===void 0?void 0:i.bind(v)}let d,m,_;if(t instanceof Zt)m=kn(t.firestore,is),_=hf(t._key.path),d={next:v=>{e[a]&&e[a](CI(m,t,v))},error:e[a+1],complete:e[a+2]};else{const v=kn(t,hs);m=kn(v.firestore,is),_=v._query;const x=new iy(m);d={next:S=>{e[a]&&e[a](new AI(m,x,v,S))},error:e[a+1],complete:e[a+2]},kI(t._query)}return function(x,S,C,R){const F=new G_(R),b=new q_(S,F,C);return x.asyncQueue.enqueueAndForget(async()=>W_(await Pd(x),b)),()=>{F.Za(),x.asyncQueue.enqueueAndForget(async()=>H_(await Pd(x),b))}}(Ef(m),_,c,d)}function oy(t,e){return function(r,i){const o=new Yr;return r.asyncQueue.enqueueAndForget(async()=>aO(await _O(r),i,o)),o.promise}(Ef(t),e)}function CI(t,e,n){const r=n.docs.get(e._key),i=new iy(t);return new bI(t,i,e._key,r,new Kl(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){za=i})(Js),es(new ni("firestore",(r,{instanceIdentifier:i,options:o})=>{const a=r.getProvider("app").getImmediate(),c=new is(new U2(r.getProvider("auth-internal")),new H2(r.getProvider("app-check-internal")),function(m,_){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new ne(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Lu(m.options.projectId,_)}(a,i),a);return o=Object.assign({useFetchStreams:n},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),zn(V0,"4.7.3",e),zn(V0,"4.7.3","esm2017")})();var OO="firebase",DO="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zn(OO,DO,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NI="firebasestorage.googleapis.com",RI="storageBucket",jO=2*60*1e3,VO=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut extends ar{constructor(e,n,r=0){super(Rm(e),`Firebase Storage: ${n} (${Rm(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ut.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Rm(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var lt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(lt||(lt={}));function Rm(t){return"storage/"+t}function ay(){const t="An unknown error occurred, please check the error payload for server response.";return new ut(lt.UNKNOWN,t)}function FO(t){return new ut(lt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function UO(t){return new ut(lt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function zO(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ut(lt.UNAUTHENTICATED,t)}function BO(){return new ut(lt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function WO(t){return new ut(lt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function HO(){return new ut(lt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function $O(){return new ut(lt.CANCELED,"User canceled the upload/download.")}function qO(t){return new ut(lt.INVALID_URL,"Invalid URL '"+t+"'.")}function KO(t){return new ut(lt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function GO(){return new ut(lt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+RI+"' property when initializing the app?")}function ZO(){return new ut(lt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function QO(){return new ut(lt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function YO(t){return new ut(lt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function ig(t){return new ut(lt.INVALID_ARGUMENT,t)}function LI(){return new ut(lt.APP_DELETED,"The Firebase app was deleted.")}function XO(t){return new ut(lt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function lu(t,e){return new ut(lt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Dl(t){throw new ut(lt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=En.makeFromUrl(e,n)}catch{return new En(e,"")}if(r.path==="")return r;throw KO(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function o(z){z.path.charAt(z.path.length-1)==="/"&&(z.path_=z.path_.slice(0,-1))}const a="(/(.*))?$",c=new RegExp("^gs://"+i+a,"i"),d={bucket:1,path:3};function m(z){z.path_=decodeURIComponent(z.path)}const _="v[A-Za-z0-9_]+",v=n.replace(/[.]/g,"\\."),x="(/([^?#]*).*)?$",S=new RegExp(`^https?://${v}/${_}/b/${i}/o${x}`,"i"),C={bucket:1,path:3},R=n===NI?"(?:storage.googleapis.com|storage.cloud.google.com)":n,F="([^?#]*)",b=new RegExp(`^https?://${R}/${i}/${F}`,"i"),P=[{regex:c,indices:d,postModify:o},{regex:S,indices:C,postModify:m},{regex:b,indices:{bucket:1,path:2},postModify:m}];for(let z=0;z<P.length;z++){const K=P[z],$=K.regex.exec(e);if($){const A=$[K.indices.bucket];let k=$[K.indices.path];k||(k=""),r=new En(A,k),K.postModify(r);break}}if(r==null)throw qO(e);return r}}class JO{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eD(t,e,n){let r=1,i=null,o=null,a=!1,c=0;function d(){return c===2}let m=!1;function _(...F){m||(m=!0,e.apply(null,F))}function v(F){i=setTimeout(()=>{i=null,t(S,d())},F)}function x(){o&&clearTimeout(o)}function S(F,...b){if(m){x();return}if(F){x(),_.call(null,F,...b);return}if(d()||a){x(),_.call(null,F,...b);return}r<64&&(r*=2);let P;c===1?(c=2,P=0):P=(r+Math.random())*1e3,v(P)}let C=!1;function R(F){C||(C=!0,x(),!m&&(i!==null?(F||(c=2),clearTimeout(i),v(0)):F||(c=1)))}return v(0),o=setTimeout(()=>{a=!0,R(!0)},n),R}function tD(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nD(t){return t!==void 0}function rD(t){return typeof t=="object"&&!Array.isArray(t)}function ly(t){return typeof t=="string"||t instanceof String}function kw(t){return uy()&&t instanceof Blob}function uy(){return typeof Blob<"u"}function Iw(t,e,n,r){if(r<e)throw ig(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw ig(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cf(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function MI(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var Vs;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Vs||(Vs={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iD(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||i||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(e,n,r,i,o,a,c,d,m,_,v,x=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=a,this.callback_=c,this.errorCallback_=d,this.timeout_=m,this.progressCallback_=_,this.connectionFactory_=v,this.retry=x,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((S,C)=>{this.resolve_=S,this.reject_=C,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new fh(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const a=c=>{const d=c.loaded,m=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,m)};this.progressCallback_!==null&&o.addUploadProgressListener(a),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(a),this.pendingConnection_=null;const c=o.getErrorCode()===Vs.NO_ERROR,d=o.getStatus();if(!c||iD(d,this.additionalRetryCodes_)&&this.retry){const _=o.getErrorCode()===Vs.ABORT;r(!1,new fh(!1,null,_));return}const m=this.successCodes_.indexOf(d)!==-1;r(!0,new fh(m,o))})},n=(r,i)=>{const o=this.resolve_,a=this.reject_,c=i.connection;if(i.wasSuccessCode)try{const d=this.callback_(c,c.getResponse());nD(d)?o(d):o()}catch(d){a(d)}else if(c!==null){const d=ay();d.serverResponse=c.getErrorText(),this.errorCallback_?a(this.errorCallback_(c,d)):a(d)}else if(i.canceled){const d=this.appDelete_?LI():$O();a(d)}else{const d=HO();a(d)}};this.canceled_?n(!1,new fh(!1,null,!0)):this.backoffId_=eD(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&tD(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class fh{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function oD(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function aD(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function lD(t,e){e&&(t["X-Firebase-GMPID"]=e)}function uD(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function cD(t,e,n,r,i,o,a=!0){const c=MI(t.urlParams),d=t.url+c,m=Object.assign({},t.headers);return lD(m,e),oD(m,n),aD(m,o),uD(m,r),new sD(d,t.method,m,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hD(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function dD(...t){const e=hD();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(uy())return new Blob(t);throw new ut(lt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function fD(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mD(t){if(typeof atob>"u")throw YO("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Lm{constructor(e,n){this.data=e,this.contentType=n||null}}function pD(t,e){switch(t){case yr.RAW:return new Lm(OI(e));case yr.BASE64:case yr.BASE64URL:return new Lm(DI(t,e));case yr.DATA_URL:return new Lm(_D(e),yD(e))}throw ay()}function OI(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const o=r,a=t.charCodeAt(++n);r=65536|(o&1023)<<10|a&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function gD(t){let e;try{e=decodeURIComponent(t)}catch{throw lu(yr.DATA_URL,"Malformed data URL.")}return OI(e)}function DI(t,e){switch(t){case yr.BASE64:{const i=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(i||o)throw lu(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case yr.BASE64URL:{const i=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(i||o)throw lu(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=mD(e)}catch(i){throw i.message.includes("polyfill")?i:lu(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class jI{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw lu(yr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=vD(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function _D(t){const e=new jI(t);return e.base64?DI(yr.BASE64,e.rest):gD(e.rest)}function yD(t){return new jI(t).contentType}function vD(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(e,n){let r=0,i="";kw(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(kw(this.data_)){const r=this.data_,i=fD(r,e,n);return i===null?null:new Mi(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Mi(r,!0)}}static getBlob(...e){if(uy()){const n=e.map(r=>r instanceof Mi?r.data_:r);return new Mi(dD.apply(null,n))}else{const n=e.map(a=>ly(a)?pD(yr.RAW,a).data:a.data_);let r=0;n.forEach(a=>{r+=a.byteLength});const i=new Uint8Array(r);let o=0;return n.forEach(a=>{for(let c=0;c<a.length;c++)i[o++]=a[c]}),new Mi(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VI(t){let e;try{e=JSON.parse(t)}catch{return null}return rD(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wD(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function xD(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function FI(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ED(t,e){return e}class tn{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||ED}}let mh=null;function TD(t){return!ly(t)||t.length<2?t:FI(t)}function UI(){if(mh)return mh;const t=[];t.push(new tn("bucket")),t.push(new tn("generation")),t.push(new tn("metageneration")),t.push(new tn("name","fullPath",!0));function e(o,a){return TD(a)}const n=new tn("name");n.xform=e,t.push(n);function r(o,a){return a!==void 0?Number(a):a}const i=new tn("size");return i.xform=r,t.push(i),t.push(new tn("timeCreated")),t.push(new tn("updated")),t.push(new tn("md5Hash",null,!0)),t.push(new tn("cacheControl",null,!0)),t.push(new tn("contentDisposition",null,!0)),t.push(new tn("contentEncoding",null,!0)),t.push(new tn("contentLanguage",null,!0)),t.push(new tn("contentType",null,!0)),t.push(new tn("metadata","customMetadata",!0)),mh=t,mh}function kD(t,e){function n(){const r=t.bucket,i=t.fullPath,o=new En(r,i);return e._makeStorageReference(o)}Object.defineProperty(t,"ref",{get:n})}function ID(t,e,n){const r={};r.type="file";const i=n.length;for(let o=0;o<i;o++){const a=n[o];r[a.local]=a.xform(r,e[a.server])}return kD(r,t),r}function zI(t,e,n){const r=VI(e);return r===null?null:ID(t,r,n)}function PD(t,e,n,r){const i=VI(e);if(i===null||!ly(i.downloadTokens))return null;const o=i.downloadTokens;if(o.length===0)return null;const a=encodeURIComponent;return o.split(",").map(m=>{const _=t.bucket,v=t.fullPath,x="/b/"+a(_)+"/o/"+a(v),S=Cf(x,n,r),C=MI({alt:"media",token:m});return S+C})[0]}function SD(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}class cy{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BI(t){if(!t)throw ay()}function bD(t,e){function n(r,i){const o=zI(t,i,e);return BI(o!==null),o}return n}function AD(t,e){function n(r,i){const o=zI(t,i,e);return BI(o!==null),PD(o,i,t.host,t._protocol)}return n}function WI(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=BO():i=zO():n.getStatus()===402?i=UO(t.bucket):n.getStatus()===403?i=WO(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function HI(t){const e=WI(t);function n(r,i){let o=e(r,i);return r.getStatus()===404&&(o=FO(t.path)),o.serverResponse=i.serverResponse,o}return n}function CD(t,e,n){const r=e.fullServerUrl(),i=Cf(r,t.host,t._protocol),o="GET",a=t.maxOperationRetryTime,c=new cy(i,o,AD(t,n),a);return c.errorHandler=HI(e),c}function ND(t,e){const n=e.fullServerUrl(),r=Cf(n,t.host,t._protocol),i="DELETE",o=t.maxOperationRetryTime;function a(d,m){}const c=new cy(r,i,a,o);return c.successCodes=[200,204],c.errorHandler=HI(e),c}function RD(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function LD(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=RD(null,e)),r}function MD(t,e,n,r,i){const o=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function c(){let P="";for(let z=0;z<2;z++)P=P+Math.random().toString().slice(2);return P}const d=c();a["Content-Type"]="multipart/related; boundary="+d;const m=LD(e,r,i),_=SD(m,n),v="--"+d+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+_+`\r
--`+d+`\r
Content-Type: `+m.contentType+`\r
\r
`,x=`\r
--`+d+"--",S=Mi.getBlob(v,r,x);if(S===null)throw ZO();const C={name:m.fullPath},R=Cf(o,t.host,t._protocol),F="POST",b=t.maxUploadRetryTime,T=new cy(R,F,bD(t,n),b);return T.urlParams=C,T.headers=a,T.body=S.uploadData(),T.errorHandler=WI(e),T}class OD{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Vs.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Vs.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Vs.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw Dl("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Dl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Dl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Dl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Dl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class DD extends OD{initXhr(){this.xhr_.responseType="text"}}function hy(){return new DD}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(e,n){this._service=e,n instanceof En?this._location=n:this._location=En.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Zs(e,n)}get root(){const e=new En(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return FI(this._location.path)}get storage(){return this._service}get parent(){const e=wD(this._location.path);if(e===null)return null;const n=new En(this._location.bucket,e);return new Zs(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw XO(e)}}function jD(t,e,n){t._throwIfRoot("uploadBytes");const r=MD(t.storage,t._location,UI(),new Mi(e,!0),n);return t.storage.makeRequestWithTokens(r,hy).then(i=>({metadata:i,ref:t}))}function VD(t){t._throwIfRoot("getDownloadURL");const e=CD(t.storage,t._location,UI());return t.storage.makeRequestWithTokens(e,hy).then(n=>{if(n===null)throw QO();return n})}function FD(t){t._throwIfRoot("deleteObject");const e=ND(t.storage,t._location);return t.storage.makeRequestWithTokens(e,hy)}function UD(t,e){const n=xD(t._location.path,e),r=new En(t._location.bucket,n);return new Zs(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zD(t){return/^[A-Za-z]+:\/\//.test(t)}function BD(t,e){return new Zs(t,e)}function $I(t,e){if(t instanceof dy){const n=t;if(n._bucket==null)throw GO();const r=new Zs(n,n._bucket);return e!=null?$I(r,e):r}else return e!==void 0?UD(t,e):t}function WD(t,e){if(e&&zD(e)){if(t instanceof dy)return BD(t,e);throw ig("To use ref(service, url), the first argument must be a Storage instance.")}else return $I(t,e)}function Pw(t,e){const n=e==null?void 0:e[RI];return n==null?null:En.makeFromBucketSpec(n,t)}function HD(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:TT(i,t.app.options.projectId))}class dy{constructor(e,n,r,i,o){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=NI,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=jO,this._maxUploadRetryTime=VO,this._requests=new Set,i!=null?this._bucket=En.makeFromBucketSpec(i,this._host):this._bucket=Pw(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=En.makeFromBucketSpec(this._url,e):this._bucket=Pw(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Iw("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Iw("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Zs(this,e)}_makeRequest(e,n,r,i,o=!0){if(this._deleted)return new JO(LI());{const a=cD(e,this._appId,r,i,n,this._firebaseVersion,o);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const Sw="@firebase/storage",bw="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qI="storage";function $D(t,e,n){return t=ze(t),jD(t,e,n)}function qD(t){return t=ze(t),VD(t)}function KD(t){return t=ze(t),FD(t)}function KI(t,e){return t=ze(t),WD(t,e)}function GD(t=sf(),e){t=ze(t);const r=Gu(t,qI).getImmediate({identifier:e}),i=h_("storage");return i&&ZD(r,...i),r}function ZD(t,e,n,r={}){HD(t,e,n,r)}function QD(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new dy(n,r,i,e,Js)}function YD(){es(new ni(qI,QD,"PUBLIC").setMultipleInstances(!0)),zn(Sw,bw,""),zn(Sw,bw,"esm2017")}YD();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XD="type.googleapis.com/google.protobuf.Int64Value",JD="type.googleapis.com/google.protobuf.UInt64Value";function GI(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function sg(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>sg(e));if(typeof t=="function"||typeof t=="object")return GI(t,e=>sg(e));throw new Error("Data cannot be encoded in JSON: "+t)}function bd(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case XD:case JD:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>bd(e)):typeof t=="function"||typeof t=="object"?GI(t,e=>bd(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fy="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aw={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ga extends ar{constructor(e,n,r){super(`${fy}/${e}`,n||""),this.details=r}}function ej(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function tj(t,e){let n=ej(t),r=n,i;try{const o=e&&e.error;if(o){const a=o.status;if(typeof a=="string"){if(!Aw[a])return new ga("internal","internal");n=Aw[a],r=a}const c=o.message;typeof c=="string"&&(r=c),i=o.details,i!==void 0&&(i=bd(i))}}catch{}return n==="ok"?null:new ga(n,r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nj{constructor(e,n,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||e.get().then(i=>this.auth=i,()=>{}),this.messaging||n.get().then(i=>this.messaging=i,()=>{}),this.appCheck||r.get().then(i=>this.appCheck=i,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),i=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:i}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const og="us-central1";function rj(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new ga("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class ij{constructor(e,n,r,i,o=og,a){this.app=e,this.fetchImpl=a,this.emulatorOrigin=null,this.contextProvider=new nj(n,r,i),this.cancelAllRequests=new Promise(c=>{this.deleteService=()=>Promise.resolve(c())});try{const c=new URL(o);this.customDomain=c.origin+(c.pathname==="/"?"":c.pathname),this.region=og}catch{this.customDomain=null,this.region=o}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function sj(t,e,n){t.emulatorOrigin=`http://${e}:${n}`}function oj(t,e,n){return r=>lj(t,e,r,{})}async function aj(t,e,n,r){n["Content-Type"]="application/json";let i;try{i=await r(t,{method:"POST",body:JSON.stringify(e),headers:n})}catch{return{status:0,json:null}}let o=null;try{o=await i.json()}catch{}return{status:i.status,json:o}}function lj(t,e,n,r){const i=t._url(e);return uj(t,i,n,r)}async function uj(t,e,n,r){n=sg(n);const i={data:n},o={},a=await t.contextProvider.getContext(r.limitedUseAppCheckTokens);a.authToken&&(o.Authorization="Bearer "+a.authToken),a.messagingToken&&(o["Firebase-Instance-ID-Token"]=a.messagingToken),a.appCheckToken!==null&&(o["X-Firebase-AppCheck"]=a.appCheckToken);const c=r.timeout||7e4,d=rj(c),m=await Promise.race([aj(e,i,o,t.fetchImpl),d.promise,t.cancelAllRequests]);if(d.cancel(),!m)throw new ga("cancelled","Firebase Functions instance was deleted.");const _=tj(m.status,m.json);if(_)throw _;if(!m.json)throw new ga("internal","Response is not valid JSON object.");let v=m.json.data;if(typeof v>"u"&&(v=m.json.result),typeof v>"u")throw new ga("internal","Response is missing data field.");return{data:bd(v)}}const Cw="@firebase/functions",Nw="0.11.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cj="auth-internal",hj="app-check-internal",dj="messaging-internal";function fj(t,e){const n=(r,{instanceIdentifier:i})=>{const o=r.getProvider("app").getImmediate(),a=r.getProvider(cj),c=r.getProvider(dj),d=r.getProvider(hj);return new ij(o,a,c,d,i,t)};es(new ni(fy,n,"PUBLIC").setMultipleInstances(!0)),zn(Cw,Nw,e),zn(Cw,Nw,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mj(t=sf(),e=og){const r=Gu(ze(t),fy).getImmediate({identifier:e}),i=h_("functions");return i&&pj(r,...i),r}function pj(t,e,n){sj(ze(t),e,n)}function gj(t,e,n){return oj(ze(t),e)}fj(fetch.bind(self));const _j={apiKey:"AIzaSyBxJLJHCT0bSeOPUE0Makcf6xKTz_1Qf0k",authDomain:"absensi-1c615.firebaseapp.com",projectId:"absensi-1c615",storageBucket:"absensi-1c615.firebasestorage.app",messagingSenderId:"485062649654",appId:"1:485062649654:web:d80251aa6476a041453597",measurementId:"G-8L4HYT8TYP"},Nf=PT(_j),qo=D2(Nf),Mt=EO(Nf),ZI=GD(Nf),yj=mj(Nf,"asia-southeast2"),Nt={lat:-6.1383935,lng:106.7618308,radius:100},QI={Host:7,Operator:7,Backoffice:8,"Digital Marketing":8,OB:8},ag=["Host","Operator","Backoffice","Digital Marketing","OB"],YI={ADMIN:"admin",EMPLOYEE:"employee"},xe={WORKING:"working",COMPLETED:"completed",PK_BATTLE:"pk_battle",EARLY_LEAVE:"early_leave",HOLIDAY:"holiday",SICK:"sick",LEAVE:"leave",ABSENT:"absent"},Si={working:"Sedang Kerja",completed:"Selesai",pk_battle:"PK Battle",early_leave:"Pulang Cepat",holiday:"Libur",sick:"Sakit",leave:"Izin",absent:"Tidak Hadir"},Rw={START_DAY:21,END_DAY:20},Mm={MAX_PAID_SICK_DAYS:1,MAX_UNPAID_DEDUCTIONS:3},vj=["Host","Operator"],Om={THEME:"nex-attendance-theme"},XI=O.createContext(null),br=()=>{const t=O.useContext(XI);if(!t)throw new Error("useAuth must be used within AuthProvider");return t},wj=({children:t})=>{const[e,n]=O.useState(null),[r,i]=O.useState(null),[o,a]=O.useState(!0),[c,d]=O.useState(null),m=async F=>{try{const b=await so(Hn(Mt,"user",F));if(b.exists()){const T={id:b.id,...b.data()};return i(T),T}return null}catch(b){return console.error("Error fetching user profile:",b),null}};O.useEffect(()=>{const F=IR(qo,async b=>{b?(n(b),await m(b.uid)):(n(null),i(null)),a(!1)});return()=>F()},[]);const _=async(F,b)=>{try{d(null),a(!0);const T=await wR(qo,F,b),P=await m(T.user.uid);if(!P)throw await Pm(qo),new Error("Akun tidak ditemukan dalam sistem");if(!P.isActive)throw await Pm(qo),new Error("Akun Anda telah dinonaktifkan");return P}catch(T){let P="Email atau password salah";throw T.code==="auth/user-not-found"?P="Email tidak terdaftar":T.code==="auth/wrong-password"?P="Password salah":T.code==="auth/too-many-requests"?P="Terlalu banyak percobaan. Coba lagi nanti.":T.message&&(P=T.message),d(P),new Error(P)}finally{a(!1)}},v=async()=>{try{await Pm(qo),n(null),i(null)}catch(F){throw console.error("Logout error:",F),F}},x=async(F,b)=>{try{if(!e)throw new Error("Tidak ada user yang login");const T=to.credential(e.email,F);return await _R(e,T),await xR(e,b),!0}catch(T){let P="Gagal mengubah password";throw T.code==="auth/wrong-password"?P="Password lama salah":T.code==="auth/weak-password"&&(P="Password baru terlalu lemah (minimal 6 karakter)"),new Error(P)}},S=(r==null?void 0:r.role)===YI.ADMIN,R={user:e,userProfile:r,loading:o,error:c,login:_,logout:v,changePassword:x,isAdmin:S,refreshProfile:async()=>{e&&await m(e.uid)}};return f.jsx(XI.Provider,{value:R,children:t})},JI=O.createContext(null),xj=()=>{const t=O.useContext(JI);if(!t)throw new Error("useTheme must be used within ThemeProvider");return t},Ej=({children:t})=>{const[e,n]=O.useState(()=>{const o=localStorage.getItem(Om.THEME);return o?o==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches});O.useEffect(()=>{e?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem(Om.THEME,e?"dark":"light")},[e]),O.useEffect(()=>{const o=window.matchMedia("(prefers-color-scheme: dark)"),a=c=>{localStorage.getItem(Om.THEME)||n(c.matches)};return o.addEventListener("change",a),()=>o.removeEventListener("change",a)},[]);const i={isDark:e,toggleTheme:()=>{n(o=>!o)},setTheme:n};return f.jsx(JI.Provider,{value:i,children:t})},Tj={sm:"w-4 h-4 border-2",md:"w-8 h-8 border-3",lg:"w-12 h-12 border-4",xl:"w-16 h-16 border-4"},oo=({size:t="md",className:e="",text:n="",fullScreen:r=!1})=>{const i=f.jsxs("div",{className:`flex flex-col items-center justify-center gap-3 ${e}`,children:[f.jsx("div",{className:`
          ${Tj[t]}
          rounded-full
          border-primary-200 dark:border-primary-900
          border-t-primary-600 dark:border-t-primary-400
          animate-spin
        `}),n&&f.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 animate-pulse",children:n})]});return r?f.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-white/80 dark:bg-slate-900/80 backdrop-blur-sm",children:i}):i},kj=({className:t=""})=>f.jsx("div",{className:`bg-white dark:bg-slate-800 rounded-2xl p-5 ${t}`,children:f.jsxs("div",{className:"space-y-4",children:[f.jsx("div",{className:"skeleton h-4 w-3/4 rounded"}),f.jsx("div",{className:"skeleton h-4 w-1/2 rounded"}),f.jsx("div",{className:"skeleton h-20 w-full rounded-lg"})]})}),Ij=({columns:t=5})=>f.jsx("tr",{className:"border-t border-slate-200 dark:border-slate-700",children:Array.from({length:t}).map((e,n)=>f.jsx("td",{className:"px-4 py-3",children:f.jsx("div",{className:"skeleton h-4 w-full rounded"})},n))});/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pj=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),e1=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Sj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bj=O.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:o,iconNode:a,...c},d)=>O.createElement("svg",{ref:d,...Sj,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:e1("lucide",i),...c},[...a.map(([m,_])=>O.createElement(m,_)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=(t,e)=>{const n=O.forwardRef(({className:r,...i},o)=>O.createElement(bj,{ref:o,iconNode:e,className:e1(`lucide-${Pj(t)}`,r),...i}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lw=ye("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aj=ye("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ad=ye("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t1=ye("CalendarOff",[["path",{d:"M4.2 4.2A2 2 0 0 0 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 1.82-1.18",key:"16swn3"}],["path",{d:"M21 15.5V6a2 2 0 0 0-2-2H9.5",key:"yhw86o"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M3 10h7",key:"1wap6i"}],["path",{d:"M21 10h-5.5",key:"quycpq"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qs=ye("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cj=ye("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nj=ye("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rj=ye("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cd=ye("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oc=ye("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lj=ye("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mj=ye("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pn=ye("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const my=ye("Coffee",[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n1=ye("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oj=ye("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dj=ye("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ac=ye("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r1=ye("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jj=ye("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const py=ye("KeyRound",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vj=ye("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fj=ye("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jh=ye("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uj=ye("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gy=ye("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i1=ye("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s1=ye("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zj=ye("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bj=ye("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wj=ye("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hj=ye("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lg=ye("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $j=ye("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qj=ye("Swords",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kj=ye("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gj=ye("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zj=ye("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o1=ye("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qj=ye("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a1=ye("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uu=ye("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yj=ye("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l1=ye("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Xj=t=>t?t.split(" ").map(e=>e.charAt(0)).join("").toUpperCase().slice(0,2):"?",Jj=t=>{const e=["bg-red-500","bg-orange-500","bg-amber-500","bg-yellow-500","bg-lime-500","bg-green-500","bg-emerald-500","bg-teal-500","bg-cyan-500","bg-sky-500","bg-blue-500","bg-indigo-500","bg-violet-500","bg-purple-500","bg-fuchsia-500","bg-pink-500","bg-rose-500"];if(!t)return e[0];let n=0;for(let r=0;r<t.length;r++)n=t.charCodeAt(r)+((n<<5)-n);return e[Math.abs(n)%e.length]},Mw={xs:"w-6 h-6 text-xs",sm:"w-8 h-8 text-xs",md:"w-10 h-10 text-sm",lg:"w-12 h-12 text-base",xl:"w-16 h-16 text-lg","2xl":"w-20 h-20 text-xl"},Rf=({src:t,name:e,size:n="md",className:r="",showStatus:i=!1,status:o="offline",...a})=>{const c=Xj(e),d=Jj(e),m={online:"bg-green-500",busy:"bg-red-500",away:"bg-yellow-500",offline:"bg-slate-400"},_={xs:"w-1.5 h-1.5",sm:"w-2 h-2",md:"w-2.5 h-2.5",lg:"w-3 h-3",xl:"w-4 h-4","2xl":"w-5 h-5"};return f.jsxs("div",{className:`relative inline-block ${r}`,...a,children:[t?f.jsx("img",{src:t,alt:e||"Avatar",className:`
            ${Mw[n]} 
            rounded-full object-cover 
            ring-2 ring-white dark:ring-slate-800
          `,onError:v=>{v.target.style.display="none",v.target.nextSibling.style.display="flex"}}):null,f.jsx("div",{className:`
          ${Mw[n]} 
          ${d}
          rounded-full 
          flex items-center justify-center 
          text-white font-semibold
          ring-2 ring-white dark:ring-slate-800
          ${t?"hidden":"flex"}
        `,children:c}),i&&f.jsx("span",{className:`
            absolute bottom-0 right-0 
            ${_[n]} 
            ${m[o]}
            rounded-full 
            ring-2 ring-white dark:ring-slate-800
          `})]})},Nd=({isCollapsed:t,setIsCollapsed:e,isMobile:n=!1,onClose:r})=>{const{userProfile:i,logout:o,isAdmin:a}=br(),{isDark:c,toggleTheme:d}=xj(),m=tf(),x=a?[{icon:Vj,label:"Dashboard",path:"/admin/dashboard"},{icon:Mj,label:"Rekapitulasi",path:"/admin/recap"},{icon:uu,label:"Karyawan",path:"/admin/users"},{icon:Qs,label:"Revisi Absen",path:"/admin/manual-attendance"},{icon:Ad,label:"Pengumuman",path:"/admin/announcements"},{icon:ac,label:"Laporan Gaji",path:"/admin/reports"}]:[{icon:Pn,label:"Absensi",path:"/employee/attendance"},{icon:Qs,label:"Riwayat",path:"/employee/history"},{icon:Ad,label:"Pengumuman",path:"/employee/announcements"},{icon:py,label:"Ubah Password",path:"/employee/change-password"}],S=async()=>{try{await o(),m("/login")}catch(R){console.error("Logout error:",R)}},C=({item:R})=>f.jsxs(UA,{to:R.path,onClick:n?r:void 0,className:({isActive:F})=>`
        flex items-center gap-3 px-3 py-2.5 rounded-xl
        transition-all duration-200
        ${F?"bg-primary-600 text-white shadow-lg shadow-primary-500/30":"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800 hover:text-slate-900 dark:hover:text-slate-200"}
        ${t&&!n?"justify-center":""}
      `,children:[f.jsx(R.icon,{className:"w-5 h-5 flex-shrink-0"}),(!t||n)&&f.jsx("span",{className:"font-medium truncate",children:R.label})]});return f.jsxs("aside",{className:`
        ${n?"fixed inset-y-0 left-0 z-40 w-64":`relative ${t?"w-20":"w-64"}`}
        flex flex-col
        bg-white dark:bg-slate-900
        border-r border-slate-200 dark:border-slate-800
        transition-all duration-300 ease-in-out
      `,children:[f.jsxs("div",{className:`flex items-center ${t&&!n?"justify-center":"justify-between"} p-4 border-b border-slate-200 dark:border-slate-800`,children:[(!t||n)&&f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("img",{src:"/logo.jpg",alt:"NEX Media",className:"w-10 h-10 rounded-lg object-cover",onError:R=>{R.target.style.display="none"}}),f.jsxs("div",{children:[f.jsx("h1",{className:"font-bold text-slate-900 dark:text-white",children:"NEX"}),f.jsx("p",{className:"text-xs text-slate-500",children:"Attendance"})]})]}),!n&&f.jsx("button",{onClick:()=>e(!t),className:"p-1.5 rounded-lg text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors",children:t?f.jsx(Rj,{className:"w-5 h-5"}):f.jsx(Nj,{className:"w-5 h-5"})})]}),f.jsx("nav",{className:"flex-1 p-3 space-y-1.5 overflow-y-auto",children:x.map(R=>f.jsx(C,{item:R},R.path))}),f.jsxs("div",{className:"p-3 border-t border-slate-200 dark:border-slate-800 space-y-2",children:[f.jsxs("button",{onClick:d,className:`
            flex items-center gap-3 w-full px-3 py-2.5 rounded-xl
            text-slate-600 dark:text-slate-400 
            hover:bg-slate-100 dark:hover:bg-slate-800
            transition-colors
            ${t&&!n?"justify-center":""}
          `,children:[c?f.jsx($j,{className:"w-5 h-5"}):f.jsx(Bj,{className:"w-5 h-5"}),(!t||n)&&f.jsx("span",{className:"font-medium",children:c?"Mode Terang":"Mode Gelap"})]}),f.jsxs("div",{className:`flex items-center gap-3 px-3 py-2 ${t&&!n?"justify-center":""}`,children:[f.jsx(Rf,{src:i==null?void 0:i.photoURL,name:i==null?void 0:i.name,size:"sm"}),(!t||n)&&f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-white truncate",children:i==null?void 0:i.name}),f.jsx("p",{className:"text-xs text-slate-500 truncate",children:(i==null?void 0:i.position)||(a?"Admin":"Employee")})]})]}),f.jsxs("button",{onClick:S,className:`
            flex items-center gap-3 w-full px-3 py-2.5 rounded-xl
            text-red-600 dark:text-red-400 
            hover:bg-red-50 dark:hover:bg-red-900/20
            transition-colors
            ${t&&!n?"justify-center":""}
          `,children:[f.jsx(gy,{className:"w-5 h-5"}),(!t||n)&&f.jsx("span",{className:"font-medium",children:"Logout"})]})]})]})},u1=({onMenuClick:t,title:e})=>{const{userProfile:n,isAdmin:r}=br(),[i,o]=O.useState(!1);return f.jsxs("header",{className:"sticky top-0 z-30 flex items-center justify-between h-16 px-4 lg:px-6 bg-white/80 dark:bg-slate-900/80 backdrop-blur-lg border-b border-slate-200 dark:border-slate-800",children:[f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx("button",{onClick:t,className:"lg:hidden p-2 rounded-lg text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors",children:f.jsx(zj,{className:"w-6 h-6"})}),f.jsxs("div",{children:[f.jsx("h1",{className:"text-xl font-bold text-slate-900 dark:text-white",children:e}),f.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 hidden sm:block",children:new Date().toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})]}),f.jsxs("div",{className:"flex items-center gap-3",children:[r&&f.jsx("div",{className:"hidden md:flex items-center",children:i?f.jsxs("div",{className:"relative animate-fade-in",children:[f.jsx("input",{type:"text",placeholder:"Cari karyawan...",className:"w-64 px-4 py-2 pl-10 rounded-xl border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500",autoFocus:!0}),f.jsx(lg,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),f.jsx("button",{onClick:()=>o(!1),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600",children:f.jsx(l1,{className:"w-4 h-4"})})]}):f.jsx("button",{onClick:()=>o(!0),className:"p-2 rounded-lg text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors",children:f.jsx(lg,{className:"w-5 h-5"})})}),f.jsxs("button",{className:"relative p-2 rounded-lg text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors",children:[f.jsx(Ad,{className:"w-5 h-5"}),f.jsx("span",{className:"absolute top-1.5 right-1.5 w-2 h-2 bg-red-500 rounded-full"})]}),f.jsxs("div",{className:"flex items-center gap-3 pl-3 border-l border-slate-200 dark:border-slate-700",children:[f.jsx(Rf,{src:n==null?void 0:n.photoURL,name:n==null?void 0:n.name,size:"sm",showStatus:!0,status:"online"}),f.jsxs("div",{className:"hidden sm:block",children:[f.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-white",children:n==null?void 0:n.name}),f.jsx("p",{className:"text-xs text-slate-500",children:r?"Administrator":n==null?void 0:n.position})]})]})]})]})},e4={"/admin/dashboard":"Dashboard","/admin/recap":"Rekapitulasi Absensi","/admin/users":"Manajemen Karyawan","/admin/manual-attendance":"Revisi Absensi","/admin/announcements":"Pengumuman","/admin/reports":"Laporan Gaji"},t4=()=>{const[t,e]=O.useState(!1),[n,r]=O.useState(!1),i=ls(),o=e4[i.pathname]||"Dashboard";return f.jsxs("div",{className:"flex h-screen bg-slate-50 dark:bg-dark-bg overflow-hidden",children:[f.jsx("div",{className:"hidden lg:block",children:f.jsx(Nd,{isCollapsed:t,setIsCollapsed:e})}),n&&f.jsx("div",{className:"fixed inset-0 z-30 bg-black/50 lg:hidden",onClick:()=>r(!1)}),f.jsx("div",{className:`
        lg:hidden fixed inset-y-0 left-0 z-40
        transform transition-transform duration-300 ease-in-out
        ${n?"translate-x-0":"-translate-x-full"}
      `,children:f.jsx(Nd,{isMobile:!0,onClose:()=>r(!1)})}),f.jsxs("div",{className:"flex-1 flex flex-col min-w-0 overflow-hidden",children:[f.jsx(u1,{onMenuClick:()=>r(!0),title:o}),f.jsx("main",{className:"flex-1 overflow-y-auto p-4 lg:p-6",children:f.jsx("div",{className:"max-w-7xl mx-auto",children:f.jsx(pT,{})})})]})]})},n4={"/employee/attendance":"Absensi","/employee/history":"Riwayat Absensi","/employee/announcements":"Pengumuman","/employee/change-password":"Ubah Password"},r4=()=>{const[t,e]=O.useState(!1),[n,r]=O.useState(!1),i=ls(),o=n4[i.pathname]||"Absensi";return f.jsxs("div",{className:"flex h-screen bg-slate-50 dark:bg-dark-bg overflow-hidden",children:[f.jsx("div",{className:"hidden lg:block",children:f.jsx(Nd,{isCollapsed:t,setIsCollapsed:e})}),n&&f.jsx("div",{className:"fixed inset-0 z-30 bg-black/50 lg:hidden",onClick:()=>r(!1)}),f.jsx("div",{className:`
        lg:hidden fixed inset-y-0 left-0 z-40
        transform transition-transform duration-300 ease-in-out
        ${n?"translate-x-0":"-translate-x-full"}
      `,children:f.jsx(Nd,{isMobile:!0,onClose:()=>r(!1)})}),f.jsxs("div",{className:"flex-1 flex flex-col min-w-0 overflow-hidden",children:[f.jsx(u1,{onMenuClick:()=>r(!0),title:o}),f.jsx("main",{className:"flex-1 overflow-y-auto p-4 lg:p-6",children:f.jsx("div",{className:"max-w-4xl mx-auto",children:f.jsx(pT,{})})})]})]})},i4={primary:"bg-primary-600 text-white hover:bg-primary-700 focus:ring-primary-500 shadow-lg shadow-primary-500/25",secondary:"bg-slate-200 text-slate-800 hover:bg-slate-300 dark:bg-slate-700 dark:text-slate-200 dark:hover:bg-slate-600 focus:ring-slate-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500 shadow-lg shadow-red-500/25",success:"bg-green-600 text-white hover:bg-green-700 focus:ring-green-500 shadow-lg shadow-green-500/25",warning:"bg-amber-500 text-white hover:bg-amber-600 focus:ring-amber-500 shadow-lg shadow-amber-500/25",ghost:"bg-transparent hover:bg-slate-100 dark:hover:bg-slate-800 text-slate-700 dark:text-slate-300",outline:"border-2 border-primary-600 text-primary-600 hover:bg-primary-50 dark:hover:bg-primary-900/20 focus:ring-primary-500"},s4={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2.5 text-sm",lg:"px-6 py-3 text-base",xl:"px-8 py-4 text-lg",icon:"p-2.5"},Ke=O.forwardRef(({children:t,variant:e="primary",size:n="md",isLoading:r=!1,disabled:i=!1,fullWidth:o=!1,leftIcon:a,rightIcon:c,className:d="",...m},_)=>f.jsx("button",{ref:_,disabled:i||r,className:`
        inline-flex items-center justify-center gap-2 rounded-xl font-semibold
        transition-all duration-200 ease-out
        focus:outline-none focus:ring-2 focus:ring-offset-2
        disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none
        active:scale-[0.98]
        ${i4[e]}
        ${s4[n]}
        ${o?"w-full":""}
        ${d}
      `,...m,children:r?f.jsxs(f.Fragment,{children:[f.jsx(Fj,{className:"w-4 h-4 animate-spin"}),f.jsx("span",{children:"Loading..."})]}):f.jsxs(f.Fragment,{children:[a&&f.jsx("span",{className:"flex-shrink-0",children:a}),t,c&&f.jsx("span",{className:"flex-shrink-0",children:c})]})}));Ke.displayName="Button";const Et=O.forwardRef(({label:t,error:e,helperText:n,leftIcon:r,rightIcon:i,type:o="text",className:a="",containerClassName:c="",...d},m)=>{const[_,v]=O.useState(!1),x=o==="password",S=x?_?"text":"password":o;return f.jsxs("div",{className:`space-y-1.5 ${c}`,children:[t&&f.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:t}),f.jsxs("div",{className:"relative",children:[r&&f.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 dark:text-slate-500",children:r}),f.jsx("input",{ref:m,type:S,className:`
            w-full px-4 py-2.5 rounded-xl
            border border-slate-300 dark:border-slate-600
            bg-white dark:bg-slate-800
            text-slate-900 dark:text-slate-100
            placeholder-slate-400 dark:placeholder-slate-500
            focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent
            transition-all duration-200
            disabled:opacity-50 disabled:cursor-not-allowed disabled:bg-slate-100 dark:disabled:bg-slate-900
            ${e?"border-red-500 focus:ring-red-500":""}
            ${r?"pl-10":""}
            ${i||x?"pr-10":""}
            ${a}
          `,...d}),x&&f.jsx("button",{type:"button",onClick:()=>v(!_),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600 dark:text-slate-500 dark:hover:text-slate-300",children:_?f.jsx(Oj,{className:"w-5 h-5"}):f.jsx(Dj,{className:"w-5 h-5"})}),i&&!x&&f.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 dark:text-slate-500",children:i})]}),e&&f.jsx("p",{className:"text-sm text-red-500 dark:text-red-400",children:e}),n&&!e&&f.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:n})]})});Et.displayName="Input";const Ee=({children:t,className:e="",padding:n="md",hover:r=!1,glass:i=!1,gradient:o=!1,...a})=>{const c={none:"",sm:"p-3",md:"p-5",lg:"p-6",xl:"p-8"};return f.jsx("div",{className:`
        rounded-2xl border border-slate-200 dark:border-slate-700
        ${i?"bg-white/70 dark:bg-slate-800/70 backdrop-blur-lg":o?"bg-gradient-to-br from-white to-slate-50 dark:from-slate-800 dark:to-slate-900":"bg-white dark:bg-slate-800"}
        ${c[n]}
        ${r?"transition-all duration-300 hover:shadow-xl hover:-translate-y-1 hover:border-primary-300 dark:hover:border-primary-700":"shadow-sm"}
        ${e}
      `,...a,children:t})};Ee.Header=({children:t,className:e="",...n})=>f.jsx("div",{className:`flex items-center justify-between pb-4 border-b border-slate-200 dark:border-slate-700 ${e}`,...n,children:t});Ee.Title=({children:t,className:e="",...n})=>f.jsx("h3",{className:`text-lg font-semibold text-slate-900 dark:text-slate-100 ${e}`,...n,children:t});Ee.Body=({children:t,className:e="",...n})=>f.jsx("div",{className:`${e}`,...n,children:t});Ee.Footer=({children:t,className:e="",...n})=>f.jsx("div",{className:`pt-4 border-t border-slate-200 dark:border-slate-700 ${e}`,...n,children:t});const o4=()=>{const[t,e]=O.useState(""),[n,r]=O.useState(""),[i,o]=O.useState(""),[a,c]=O.useState(!1),{login:d}=br(),m=tf(),_=async v=>{if(v.preventDefault(),!t||!n){o("Email dan password wajib diisi");return}try{o(""),c(!0),(await d(t,n)).role==="admin"?m("/admin/dashboard"):m("/employee/attendance")}catch(x){o(x.message)}finally{c(!1)}};return f.jsxs("div",{className:"min-h-screen flex relative overflow-hidden bg-gradient-to-br from-primary-900 via-primary-800 to-slate-900",children:[f.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[f.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-primary-500/20 rounded-full blur-3xl animate-pulse"}),f.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-indigo-500/20 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}}),f.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-purple-500/10 rounded-full blur-3xl animate-pulse",style:{animationDelay:"2s"}})]}),f.jsx("div",{className:"hidden lg:flex lg:w-1/2 items-center justify-center p-12 relative z-10",children:f.jsxs("div",{className:"max-w-md text-center text-white",children:[f.jsx("img",{src:"/logo.jpg",alt:"NEX Media Indonesia",className:"w-32 h-32 mx-auto rounded-2xl shadow-2xl mb-8",onError:v=>{v.target.style.display="none"}}),f.jsxs("h1",{className:"text-4xl font-bold mb-4",children:["NEX ",f.jsx("span",{className:"text-primary-300",children:"Attendance"})]}),f.jsx("p",{className:"text-lg text-slate-300 mb-8",children:"Sistem Absensi & Payroll Modern untuk NEX Media Indonesia"}),f.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[f.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl p-4",children:[f.jsx("p",{className:"text-3xl font-bold",children:"24/7"}),f.jsx("p",{className:"text-sm text-slate-300",children:"Akses Kapanpun"})]}),f.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl p-4",children:[f.jsx("p",{className:"text-3xl font-bold",children:"GPS"}),f.jsx("p",{className:"text-sm text-slate-300",children:"Validasi Lokasi"})]}),f.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl p-4",children:[f.jsx("p",{className:"text-3xl font-bold",children:"Live"}),f.jsx("p",{className:"text-sm text-slate-300",children:"Real-time"})]})]})]})}),f.jsx("div",{className:"flex-1 flex items-center justify-center p-6 relative z-10",children:f.jsxs(Ee,{className:"w-full max-w-md",padding:"xl",children:[f.jsxs("div",{className:"lg:hidden text-center mb-8",children:[f.jsx("img",{src:"/logo.jpg",alt:"NEX Media Indonesia",className:"w-20 h-20 mx-auto rounded-xl shadow-lg mb-4",onError:v=>{v.target.style.display="none"}}),f.jsxs("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:["NEX ",f.jsx("span",{className:"text-primary-600",children:"Attendance"})]})]}),f.jsxs("div",{className:"text-center mb-8",children:[f.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Selamat Datang! "}),f.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Masuk ke akun Anda untuk melanjutkan"})]}),f.jsxs("form",{onSubmit:_,className:"space-y-5",children:[i&&f.jsx("div",{className:"p-4 rounded-xl bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800",children:f.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:i})}),f.jsx(Et,{label:"Email",type:"email",placeholder:"nama@email.com",value:t,onChange:v=>e(v.target.value),leftIcon:f.jsx(i1,{className:"w-5 h-5"}),disabled:a}),f.jsx(Et,{label:"Password",type:"password",placeholder:"Masukkan password",value:n,onChange:v=>r(v.target.value),leftIcon:f.jsx(jh,{className:"w-5 h-5"}),disabled:a}),f.jsx(Ke,{type:"submit",fullWidth:!0,size:"lg",isLoading:a,rightIcon:f.jsx(Aj,{className:"w-5 h-5"}),children:"Masuk"})]}),f.jsx("div",{className:"mt-6 text-center",children:f.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Lupa password? Hubungi Admin untuk reset."})}),f.jsx("div",{className:"mt-8 pt-6 border-t border-slate-200 dark:border-slate-700 text-center",children:f.jsx("p",{className:"text-xs text-slate-400",children:" 2024 NEX Media Indonesia. All rights reserved."})})]})})]})},zo=({title:t,value:e,icon:n,trend:r,trendValue:i,color:o="primary",className:a=""})=>{const c={primary:"from-primary-500 to-primary-700",green:"from-green-500 to-emerald-700",blue:"from-blue-500 to-indigo-700",red:"from-red-500 to-rose-700",yellow:"from-amber-400 to-orange-600",purple:"from-purple-500 to-violet-700",gray:"from-slate-400 to-slate-600"};return f.jsxs("div",{className:`relative overflow-hidden rounded-2xl bg-gradient-to-br ${c[o]} p-5 text-white shadow-lg ${a}`,children:[f.jsx("div",{className:"absolute top-0 right-0 -mt-4 -mr-4 w-24 h-24 bg-white/10 rounded-full blur-2xl"}),f.jsx("div",{className:"absolute bottom-0 left-0 -mb-4 -ml-4 w-20 h-20 bg-white/10 rounded-full blur-xl"}),f.jsxs("div",{className:"relative z-10",children:[f.jsxs("div",{className:"flex items-start justify-between",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-sm font-medium text-white/80",children:t}),f.jsx("p",{className:"mt-2 text-3xl font-bold",children:e})]}),n&&f.jsx("div",{className:"p-3 bg-white/20 rounded-xl",children:f.jsx(n,{className:"w-6 h-6"})})]}),r&&f.jsxs("div",{className:"mt-4 flex items-center gap-1 text-sm",children:[r==="up"?f.jsx(Zj,{className:"w-4 h-4 text-green-300"}):f.jsx(Gj,{className:"w-4 h-4 text-red-300"}),f.jsx("span",{className:r==="up"?"text-green-300":"text-red-300",children:i}),f.jsx("span",{className:"text-white/60",children:"dari kemarin"})]})]})]})},Ow={working:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400 ring-green-500/20",completed:"bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-300 ring-slate-500/20",pk_battle:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400 ring-blue-500/20",early_leave:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400 ring-yellow-500/20",holiday:"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400 ring-purple-500/20",sick:"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-400 ring-orange-500/20",leave:"bg-cyan-100 text-cyan-800 dark:bg-cyan-900/30 dark:text-cyan-400 ring-cyan-500/20",absent:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400 ring-red-500/20"},_y=({status:t,size:e="md",className:n=""})=>{const r=Si[t]||t,i=Ow[t]||Ow.completed,o={sm:"px-2 py-0.5 text-xs",md:"px-2.5 py-1 text-xs",lg:"px-3 py-1.5 text-sm"};return f.jsx("span",{className:`
        inline-flex items-center font-medium rounded-full ring-1 ring-inset
        ${i}
        ${o[e]}
        ${n}
      `,children:r})},a4=({status:t,size:e="md",className:n=""})=>{const r={working:"bg-green-500",pk_battle:"bg-blue-500",absent:"bg-red-500",not_checked_in:"bg-red-500",completed:"bg-slate-400",done:"bg-slate-400"},i={sm:"w-2 h-2",md:"w-3 h-3",lg:"w-4 h-4"},o=r[t]||r.completed,a=["working","pk_battle"].includes(t);return f.jsxs("div",{className:`relative ${n}`,children:[a&&f.jsx("span",{className:`
            absolute inset-0 ${i[e]} ${o} rounded-full
            animate-ping opacity-75
          `}),f.jsx("span",{className:`
          relative block ${i[e]} ${o} rounded-full
          ${a?"animate-pulse-dot":""}
        `})]})},c1=({position:t,className:e=""})=>{const n={Host:"bg-pink-100 text-pink-800 dark:bg-pink-900/30 dark:text-pink-400",Operator:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900/30 dark:text-indigo-400",Backoffice:"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-400","Digital Marketing":"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-400",OB:"bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-300"};return f.jsx("span",{className:`
        inline-flex items-center px-2 py-0.5 text-xs font-medium rounded-md
        ${n[t]||n.OB}
        ${e}
      `,children:t})},h1=6048e5,l4=864e5,yy=6e4,d1=36e5,Dw=Symbol.for("constructDateFrom");function or(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&Dw in t?t[Dw](e):t instanceof Date?new t.constructor(e):new Date(e)}function Lt(t,e){return or(e||t,t)}function u4(t,e,n){const r=Lt(t,n==null?void 0:n.in);if(isNaN(e))return or(t,NaN);const i=r.getDate(),o=or(t,r.getTime());o.setMonth(r.getMonth()+e+1,0);const a=o.getDate();return i>=a?o:(r.setFullYear(o.getFullYear(),o.getMonth(),i),r)}let c4={};function Lf(){return c4}function Vu(t,e){var c,d,m,_;const n=Lf(),r=(e==null?void 0:e.weekStartsOn)??((d=(c=e==null?void 0:e.locale)==null?void 0:c.options)==null?void 0:d.weekStartsOn)??n.weekStartsOn??((_=(m=n.locale)==null?void 0:m.options)==null?void 0:_.weekStartsOn)??0,i=Lt(t,e==null?void 0:e.in),o=i.getDay(),a=(o<r?7:0)+o-r;return i.setDate(i.getDate()-a),i.setHours(0,0,0,0),i}function Rd(t,e){return Vu(t,{...e,weekStartsOn:1})}function f1(t,e){const n=Lt(t,e==null?void 0:e.in),r=n.getFullYear(),i=or(n,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const o=Rd(i),a=or(n,0);a.setFullYear(r,0,4),a.setHours(0,0,0,0);const c=Rd(a);return n.getTime()>=o.getTime()?r+1:n.getTime()>=c.getTime()?r:r-1}function jw(t){const e=Lt(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function h4(t,...e){const n=or.bind(null,e.find(r=>typeof r=="object"));return e.map(n)}function ug(t,e){const n=Lt(t,e==null?void 0:e.in);return n.setHours(0,0,0,0),n}function d4(t,e,n){const[r,i]=h4(n==null?void 0:n.in,t,e),o=ug(r),a=ug(i),c=+o-jw(o),d=+a-jw(a);return Math.round((c-d)/l4)}function f4(t,e){const n=f1(t,e),r=or(t,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),Rd(r)}function m4(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function p4(t){return!(!m4(t)&&typeof t!="number"||isNaN(+Lt(t)))}function g4(t){return e=>{const r=(t?Math[t]:Math.trunc)(e);return r===0?0:r}}function _4(t,e){return+Lt(t)-+Lt(e)}function m1(t,e,n){const r=_4(t,e)/yy;return g4(n==null?void 0:n.roundingMethod)(r)}function y4(t,e){const n=Lt(t,e==null?void 0:e.in);return n.setHours(23,59,59,999),n}function v4(t,e){const n=Lt(t,e==null?void 0:e.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const w4={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},x4=(t,e,n)=>{let r;const i=w4[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function _a(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const E4={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},T4={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},k4={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},I4={date:_a({formats:E4,defaultWidth:"full"}),time:_a({formats:T4,defaultWidth:"full"}),dateTime:_a({formats:k4,defaultWidth:"full"})},P4={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},S4=(t,e,n,r)=>P4[t];function gr(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const a=t.defaultFormattingWidth||t.defaultWidth,c=n!=null&&n.width?String(n.width):a;i=t.formattingValues[c]||t.formattingValues[a]}else{const a=t.defaultWidth,c=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[c]||t.values[a]}const o=t.argumentCallback?t.argumentCallback(e):e;return i[o]}}const b4={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},A4={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},C4={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},N4={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},R4={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},L4={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},M4=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},O4={ordinalNumber:M4,era:gr({values:b4,defaultWidth:"wide"}),quarter:gr({values:A4,defaultWidth:"wide",argumentCallback:t=>t-1}),month:gr({values:C4,defaultWidth:"wide"}),day:gr({values:N4,defaultWidth:"wide"}),dayPeriod:gr({values:R4,defaultWidth:"wide",formattingValues:L4,defaultFormattingWidth:"wide"})};function _r(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],o=e.match(i);if(!o)return null;const a=o[0],c=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],d=Array.isArray(c)?j4(c,v=>v.test(a)):D4(c,v=>v.test(a));let m;m=t.valueCallback?t.valueCallback(d):d,m=n.valueCallback?n.valueCallback(m):m;const _=e.slice(a.length);return{value:m,rest:_}}}function D4(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function j4(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function p1(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],o=e.match(t.parsePattern);if(!o)return null;let a=t.valueCallback?t.valueCallback(o[0]):o[0];a=n.valueCallback?n.valueCallback(a):a;const c=e.slice(i.length);return{value:a,rest:c}}}const V4=/^(\d+)(th|st|nd|rd)?/i,F4=/\d+/i,U4={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},z4={any:[/^b/i,/^(a|c)/i]},B4={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},W4={any:[/1/i,/2/i,/3/i,/4/i]},H4={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},$4={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},q4={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},K4={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},G4={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Z4={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Q4={ordinalNumber:p1({matchPattern:V4,parsePattern:F4,valueCallback:t=>parseInt(t,10)}),era:_r({matchPatterns:U4,defaultMatchWidth:"wide",parsePatterns:z4,defaultParseWidth:"any"}),quarter:_r({matchPatterns:B4,defaultMatchWidth:"wide",parsePatterns:W4,defaultParseWidth:"any",valueCallback:t=>t+1}),month:_r({matchPatterns:H4,defaultMatchWidth:"wide",parsePatterns:$4,defaultParseWidth:"any"}),day:_r({matchPatterns:q4,defaultMatchWidth:"wide",parsePatterns:K4,defaultParseWidth:"any"}),dayPeriod:_r({matchPatterns:G4,defaultMatchWidth:"any",parsePatterns:Z4,defaultParseWidth:"any"})},Y4={code:"en-US",formatDistance:x4,formatLong:I4,formatRelative:S4,localize:O4,match:Q4,options:{weekStartsOn:0,firstWeekContainsDate:1}};function X4(t,e){const n=Lt(t,e==null?void 0:e.in);return d4(n,v4(n))+1}function J4(t,e){const n=Lt(t,e==null?void 0:e.in),r=+Rd(n)-+f4(n);return Math.round(r/h1)+1}function g1(t,e){var _,v,x,S;const n=Lt(t,e==null?void 0:e.in),r=n.getFullYear(),i=Lf(),o=(e==null?void 0:e.firstWeekContainsDate)??((v=(_=e==null?void 0:e.locale)==null?void 0:_.options)==null?void 0:v.firstWeekContainsDate)??i.firstWeekContainsDate??((S=(x=i.locale)==null?void 0:x.options)==null?void 0:S.firstWeekContainsDate)??1,a=or((e==null?void 0:e.in)||t,0);a.setFullYear(r+1,0,o),a.setHours(0,0,0,0);const c=Vu(a,e),d=or((e==null?void 0:e.in)||t,0);d.setFullYear(r,0,o),d.setHours(0,0,0,0);const m=Vu(d,e);return+n>=+c?r+1:+n>=+m?r:r-1}function eV(t,e){var c,d,m,_;const n=Lf(),r=(e==null?void 0:e.firstWeekContainsDate)??((d=(c=e==null?void 0:e.locale)==null?void 0:c.options)==null?void 0:d.firstWeekContainsDate)??n.firstWeekContainsDate??((_=(m=n.locale)==null?void 0:m.options)==null?void 0:_.firstWeekContainsDate)??1,i=g1(t,e),o=or((e==null?void 0:e.in)||t,0);return o.setFullYear(i,0,r),o.setHours(0,0,0,0),Vu(o,e)}function tV(t,e){const n=Lt(t,e==null?void 0:e.in),r=+Vu(n,e)-+eV(n,e);return Math.round(r/h1)+1}function Ve(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const ki={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return Ve(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):Ve(n+1,2)},d(t,e){return Ve(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return Ve(t.getHours()%12||12,e.length)},H(t,e){return Ve(t.getHours(),e.length)},m(t,e){return Ve(t.getMinutes(),e.length)},s(t,e){return Ve(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return Ve(i,e.length)}},Bo={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Vw={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return ki.y(t,e)},Y:function(t,e,n,r){const i=g1(t,r),o=i>0?i:1-i;if(e==="YY"){const a=o%100;return Ve(a,2)}return e==="Yo"?n.ordinalNumber(o,{unit:"year"}):Ve(o,e.length)},R:function(t,e){const n=f1(t);return Ve(n,e.length)},u:function(t,e){const n=t.getFullYear();return Ve(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Ve(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Ve(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return ki.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return Ve(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const i=tV(t,r);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):Ve(i,e.length)},I:function(t,e,n){const r=J4(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):Ve(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):ki.d(t,e)},D:function(t,e,n){const r=X4(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Ve(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const i=t.getDay(),o=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(o);case"ee":return Ve(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const i=t.getDay(),o=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(o);case"cc":return Ve(o,e.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return Ve(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let i;switch(r===12?i=Bo.noon:r===0?i=Bo.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let i;switch(r>=17?i=Bo.evening:r>=12?i=Bo.afternoon:r>=4?i=Bo.morning:i=Bo.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return ki.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):ki.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Ve(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):Ve(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):ki.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):ki.s(t,e)},S:function(t,e){return ki.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return Uw(r);case"XXXX":case"XX":return As(r);case"XXXXX":case"XXX":default:return As(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return Uw(r);case"xxxx":case"xx":return As(r);case"xxxxx":case"xxx":default:return As(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Fw(r,":");case"OOOO":default:return"GMT"+As(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Fw(r,":");case"zzzz":default:return"GMT"+As(r,":")}},t:function(t,e,n){const r=Math.trunc(+t/1e3);return Ve(r,e.length)},T:function(t,e,n){return Ve(+t,e.length)}};function Fw(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Math.trunc(r/60),o=r%60;return o===0?n+String(i):n+String(i)+e+Ve(o,2)}function Uw(t,e){return t%60===0?(t>0?"-":"+")+Ve(Math.abs(t)/60,2):As(t,e)}function As(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Ve(Math.trunc(r/60),2),o=Ve(r%60,2);return n+i+e+o}const zw=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},_1=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},nV=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return zw(t,e);let o;switch(r){case"P":o=e.dateTime({width:"short"});break;case"PP":o=e.dateTime({width:"medium"});break;case"PPP":o=e.dateTime({width:"long"});break;case"PPPP":default:o=e.dateTime({width:"full"});break}return o.replace("{{date}}",zw(r,e)).replace("{{time}}",_1(i,e))},rV={p:_1,P:nV},iV=/^D+$/,sV=/^Y+$/,oV=["D","DD","YY","YYYY"];function aV(t){return iV.test(t)}function lV(t){return sV.test(t)}function uV(t,e,n){const r=cV(t,e,n);if(console.warn(r),oV.includes(t))throw new RangeError(r)}function cV(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const hV=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,dV=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,fV=/^'([^]*?)'?$/,mV=/''/g,pV=/[a-zA-Z]/;function Fu(t,e,n){var _,v,x,S,C,R,F,b;const r=Lf(),i=(n==null?void 0:n.locale)??r.locale??Y4,o=(n==null?void 0:n.firstWeekContainsDate)??((v=(_=n==null?void 0:n.locale)==null?void 0:_.options)==null?void 0:v.firstWeekContainsDate)??r.firstWeekContainsDate??((S=(x=r.locale)==null?void 0:x.options)==null?void 0:S.firstWeekContainsDate)??1,a=(n==null?void 0:n.weekStartsOn)??((R=(C=n==null?void 0:n.locale)==null?void 0:C.options)==null?void 0:R.weekStartsOn)??r.weekStartsOn??((b=(F=r.locale)==null?void 0:F.options)==null?void 0:b.weekStartsOn)??0,c=Lt(t,n==null?void 0:n.in);if(!p4(c))throw new RangeError("Invalid time value");let d=e.match(dV).map(T=>{const P=T[0];if(P==="p"||P==="P"){const z=rV[P];return z(T,i.formatLong)}return T}).join("").match(hV).map(T=>{if(T==="''")return{isToken:!1,value:"'"};const P=T[0];if(P==="'")return{isToken:!1,value:gV(T)};if(Vw[P])return{isToken:!0,value:T};if(P.match(pV))throw new RangeError("Format string contains an unescaped latin alphabet character `"+P+"`");return{isToken:!1,value:T}});i.localize.preprocessor&&(d=i.localize.preprocessor(c,d));const m={firstWeekContainsDate:o,weekStartsOn:a,locale:i};return d.map(T=>{if(!T.isToken)return T.value;const P=T.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&lV(P)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&aV(P))&&uV(P,e,String(t));const z=Vw[P[0]];return z(c,P,i.localize,m)}).join("")}function gV(t){const e=t.match(fV);return e?e[1].replace(mV,"'"):t}function _V(t,e){const n=()=>or(e==null?void 0:e.in,NaN),i=xV(t);let o;if(i.date){const m=EV(i.date,2);o=TV(m.restDateString,m.year)}if(!o||isNaN(+o))return n();const a=+o;let c=0,d;if(i.time&&(c=kV(i.time),isNaN(c)))return n();if(i.timezone){if(d=IV(i.timezone),isNaN(d))return n()}else{const m=new Date(a+c),_=Lt(0,e==null?void 0:e.in);return _.setFullYear(m.getUTCFullYear(),m.getUTCMonth(),m.getUTCDate()),_.setHours(m.getUTCHours(),m.getUTCMinutes(),m.getUTCSeconds(),m.getUTCMilliseconds()),_}return Lt(a+c+d,e==null?void 0:e.in)}const ph={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},yV=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,vV=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,wV=/^([+-])(\d{2})(?::?(\d{2}))?$/;function xV(t){const e={},n=t.split(ph.dateTimeDelimiter);let r;if(n.length>2)return e;if(/:/.test(n[0])?r=n[0]:(e.date=n[0],r=n[1],ph.timeZoneDelimiter.test(e.date)&&(e.date=t.split(ph.timeZoneDelimiter)[0],r=t.substr(e.date.length,t.length))),r){const i=ph.timezone.exec(r);i?(e.time=r.replace(i[1],""),e.timezone=i[1]):e.time=r}return e}function EV(t,e){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=t.match(n);if(!r)return{year:NaN,restDateString:""};const i=r[1]?parseInt(r[1]):null,o=r[2]?parseInt(r[2]):null;return{year:o===null?i:o*100,restDateString:t.slice((r[1]||r[2]).length)}}function TV(t,e){if(e===null)return new Date(NaN);const n=t.match(yV);if(!n)return new Date(NaN);const r=!!n[4],i=jl(n[1]),o=jl(n[2])-1,a=jl(n[3]),c=jl(n[4]),d=jl(n[5])-1;if(r)return CV(e,c,d)?PV(e,c,d):new Date(NaN);{const m=new Date(0);return!bV(e,o,a)||!AV(e,i)?new Date(NaN):(m.setUTCFullYear(e,o,Math.max(i,a)),m)}}function jl(t){return t?parseInt(t):1}function kV(t){const e=t.match(vV);if(!e)return NaN;const n=Dm(e[1]),r=Dm(e[2]),i=Dm(e[3]);return NV(n,r,i)?n*d1+r*yy+i*1e3:NaN}function Dm(t){return t&&parseFloat(t.replace(",","."))||0}function IV(t){if(t==="Z")return 0;const e=t.match(wV);if(!e)return 0;const n=e[1]==="+"?-1:1,r=parseInt(e[2]),i=e[3]&&parseInt(e[3])||0;return RV(r,i)?n*(r*d1+i*yy):NaN}function PV(t,e,n){const r=new Date(0);r.setUTCFullYear(t,0,4);const i=r.getUTCDay()||7,o=(e-1)*7+n+1-i;return r.setUTCDate(r.getUTCDate()+o),r}const SV=[31,null,31,30,31,30,31,31,30,31,30,31];function y1(t){return t%400===0||t%4===0&&t%100!==0}function bV(t,e,n){return e>=0&&e<=11&&n>=1&&n<=(SV[e]||(y1(t)?29:28))}function AV(t,e){return e>=1&&e<=(y1(t)?366:365)}function CV(t,e,n){return e>=1&&e<=53&&n>=0&&n<=6}function NV(t,e,n){return t===24?e===0&&n===0:n>=0&&n<60&&e>=0&&e<60&&t>=0&&t<25}function RV(t,e){return e>=0&&e<=59}function Bw(t,e,n){const r=Lt(t,n==null?void 0:n.in);return r.setDate(e),r}function LV(t,e,n){return u4(t,-1,n)}const MV={lessThanXSeconds:{one:"kurang dari 1 detik",other:"kurang dari {{count}} detik"},xSeconds:{one:"1 detik",other:"{{count}} detik"},halfAMinute:"setengah menit",lessThanXMinutes:{one:"kurang dari 1 menit",other:"kurang dari {{count}} menit"},xMinutes:{one:"1 menit",other:"{{count}} menit"},aboutXHours:{one:"sekitar 1 jam",other:"sekitar {{count}} jam"},xHours:{one:"1 jam",other:"{{count}} jam"},xDays:{one:"1 hari",other:"{{count}} hari"},aboutXWeeks:{one:"sekitar 1 minggu",other:"sekitar {{count}} minggu"},xWeeks:{one:"1 minggu",other:"{{count}} minggu"},aboutXMonths:{one:"sekitar 1 bulan",other:"sekitar {{count}} bulan"},xMonths:{one:"1 bulan",other:"{{count}} bulan"},aboutXYears:{one:"sekitar 1 tahun",other:"sekitar {{count}} tahun"},xYears:{one:"1 tahun",other:"{{count}} tahun"},overXYears:{one:"lebih dari 1 tahun",other:"lebih dari {{count}} tahun"},almostXYears:{one:"hampir 1 tahun",other:"hampir {{count}} tahun"}},OV=(t,e,n)=>{let r;const i=MV[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"dalam waktu "+r:r+" yang lalu":r},DV={full:"EEEE, d MMMM yyyy",long:"d MMMM yyyy",medium:"d MMM yyyy",short:"d/M/yyyy"},jV={full:"HH.mm.ss",long:"HH.mm.ss",medium:"HH.mm",short:"HH.mm"},VV={full:"{{date}} 'pukul' {{time}}",long:"{{date}} 'pukul' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},FV={date:_a({formats:DV,defaultWidth:"full"}),time:_a({formats:jV,defaultWidth:"full"}),dateTime:_a({formats:VV,defaultWidth:"full"})},UV={lastWeek:"eeee 'lalu pukul' p",yesterday:"'Kemarin pukul' p",today:"'Hari ini pukul' p",tomorrow:"'Besok pukul' p",nextWeek:"eeee 'pukul' p",other:"P"},zV=(t,e,n,r)=>UV[t],BV={narrow:["SM","M"],abbreviated:["SM","M"],wide:["Sebelum Masehi","Masehi"]},WV={narrow:["1","2","3","4"],abbreviated:["K1","K2","K3","K4"],wide:["Kuartal ke-1","Kuartal ke-2","Kuartal ke-3","Kuartal ke-4"]},HV={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","Mei","Jun","Jul","Agt","Sep","Okt","Nov","Des"],wide:["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"]},$V={narrow:["M","S","S","R","K","J","S"],short:["Min","Sen","Sel","Rab","Kam","Jum","Sab"],abbreviated:["Min","Sen","Sel","Rab","Kam","Jum","Sab"],wide:["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"]},qV={narrow:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"},abbreviated:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"},wide:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"}},KV={narrow:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"},abbreviated:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"},wide:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"}},GV=(t,e)=>"ke-"+Number(t),ZV={ordinalNumber:GV,era:gr({values:BV,defaultWidth:"wide"}),quarter:gr({values:WV,defaultWidth:"wide",argumentCallback:t=>t-1}),month:gr({values:HV,defaultWidth:"wide"}),day:gr({values:$V,defaultWidth:"wide"}),dayPeriod:gr({values:qV,defaultWidth:"wide",formattingValues:KV,defaultFormattingWidth:"wide"})},QV=/^ke-(\d+)?/i,YV=/\d+/i,XV={narrow:/^(sm|m)/i,abbreviated:/^(s\.?\s?m\.?|s\.?\s?e\.?\s?u\.?|m\.?|e\.?\s?u\.?)/i,wide:/^(sebelum masehi|sebelum era umum|masehi|era umum)/i},JV={any:[/^s/i,/^(m|e)/i]},e3={narrow:/^[1234]/i,abbreviated:/^K-?\s[1234]/i,wide:/^Kuartal ke-?\s?[1234]/i},t3={any:[/1/i,/2/i,/3/i,/4/i]},n3={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|mei|jun|jul|agt|sep|okt|nov|des)/i,wide:/^(januari|februari|maret|april|mei|juni|juli|agustus|september|oktober|november|desember)/i},r3={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^ma/i,/^ap/i,/^me/i,/^jun/i,/^jul/i,/^ag/i,/^s/i,/^o/i,/^n/i,/^d/i]},i3={narrow:/^[srkjm]/i,short:/^(min|sen|sel|rab|kam|jum|sab)/i,abbreviated:/^(min|sen|sel|rab|kam|jum|sab)/i,wide:/^(minggu|senin|selasa|rabu|kamis|jumat|sabtu)/i},s3={narrow:[/^m/i,/^s/i,/^s/i,/^r/i,/^k/i,/^j/i,/^s/i],any:[/^m/i,/^sen/i,/^sel/i,/^r/i,/^k/i,/^j/i,/^sa/i]},o3={narrow:/^(a|p|tengah m|tengah h|(di(\swaktu)?) (pagi|siang|sore|malam))/i,any:/^([ap]\.?\s?m\.?|tengah malam|tengah hari|(di(\swaktu)?) (pagi|siang|sore|malam))/i},a3={any:{am:/^a/i,pm:/^pm/i,midnight:/^tengah m/i,noon:/^tengah h/i,morning:/pagi/i,afternoon:/siang/i,evening:/sore/i,night:/malam/i}},l3={ordinalNumber:p1({matchPattern:QV,parsePattern:YV,valueCallback:t=>parseInt(t,10)}),era:_r({matchPatterns:XV,defaultMatchWidth:"wide",parsePatterns:JV,defaultParseWidth:"any"}),quarter:_r({matchPatterns:e3,defaultMatchWidth:"wide",parsePatterns:t3,defaultParseWidth:"any",valueCallback:t=>t+1}),month:_r({matchPatterns:n3,defaultMatchWidth:"wide",parsePatterns:r3,defaultParseWidth:"any"}),day:_r({matchPatterns:i3,defaultMatchWidth:"wide",parsePatterns:s3,defaultParseWidth:"any"}),dayPeriod:_r({matchPatterns:o3,defaultMatchWidth:"any",parsePatterns:a3,defaultParseWidth:"any"})},cg={code:"id",formatDistance:OV,formatLong:FV,formatRelative:zV,localize:ZV,match:l3,options:{weekStartsOn:1,firstWeekContainsDate:1}},Ld=t=>Fu(t,"yyyy-MM-dd"),Mf=t=>{if(!t)return"-";const e=typeof t=="string"?_V(t):t;return Fu(e,"d MMMM yyyy",{locale:cg})},vr=t=>{if(!t)return"-";const e=t.toDate?t.toDate():new Date(t);return Fu(e,"HH:mm")},vn=t=>{if(!t||t<=0)return"0 menit";const e=Math.floor(t/60),n=t%60;return e===0?`${n} menit`:n===0?`${e} jam`:`${e} jam ${n} menit`},Ww=t=>!t||t<=0?"-":`-${vn(t)}`,v1=(t,e)=>{if(!t||!e)return 0;const n=t.toDate?t.toDate():new Date(t),r=e.toDate?e.toDate():new Date(e);return m1(r,n)},Of=(t=new Date)=>{t.getFullYear(),t.getMonth();let e=Bw(LV(t),Rw.START_DAY);e=ug(e);let n=Bw(t,Rw.END_DAY);return n=y4(n),{startDate:e,endDate:n}},ao=()=>Ld(new Date),w1=(t=new Date)=>{const{startDate:e,endDate:n}=Of(t);return`${Fu(e,"d MMM",{locale:cg})} - ${Fu(n,"d MMM yyyy",{locale:cg})}`},Md=t=>{if(!t)return 0;const e=t.toDate?t.toDate():new Date(t);return m1(new Date,e)},u3=t=>{const e=Math.floor(t/60),n=t%60;return`${e.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}:${0 .toString().padStart(2,"0")}`},c3=({employee:t,attendance:e,onClick:n})=>{const[r,i]=O.useState(0),a=e?e.status==="pk_battle"?"pk_battle":e.status==="working"?"working":e.checkOut?"done":"not_checked_in":"not_checked_in";O.useEffect(()=>{if(a==="working"&&(e!=null&&e.checkIn)){const d=()=>{i(Md(e.checkIn))};d();const m=setInterval(d,6e4);return()=>clearInterval(m)}},[a,e==null?void 0:e.checkIn]);const c={working:"Sedang Kerja",pk_battle:"PK Battle",done:"Sudah Pulang",not_checked_in:"Belum Hadir"};return f.jsxs("div",{onClick:n,className:"relative bg-white dark:bg-slate-800 rounded-2xl p-4 border border-slate-200 dark:border-slate-700 shadow-sm hover:shadow-lg hover:border-primary-300 dark:hover:border-primary-600 transition-all duration-300 cursor-pointer group",children:[f.jsx("div",{className:"absolute top-3 right-3",children:f.jsx(a4,{status:a,size:"md"})}),f.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[f.jsx(Rf,{src:t.photoURL,name:t.name,size:"lg"}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white truncate group-hover:text-primary-600 dark:group-hover:text-primary-400 transition-colors",children:t.name}),f.jsx(c1,{position:t.position})]})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsxs("div",{className:"flex items-center justify-between text-sm",children:[f.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:"Status"}),f.jsx("span",{className:`font-medium ${a==="working"?"text-green-600 dark:text-green-400":a==="pk_battle"?"text-blue-600 dark:text-blue-400":a==="done"?"text-slate-600 dark:text-slate-400":"text-red-600 dark:text-red-400"}`,children:c[a]})]}),(e==null?void 0:e.checkIn)&&f.jsxs("div",{className:"flex items-center justify-between text-sm",children:[f.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:"Jam Masuk"}),f.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:vr(e.checkIn)})]}),a==="working"&&f.jsx("div",{className:"mt-3 p-2 bg-green-50 dark:bg-green-900/20 rounded-lg",children:f.jsxs("div",{className:"flex items-center justify-center gap-2",children:[f.jsx(Pn,{className:"w-4 h-4 text-green-600 dark:text-green-400"}),f.jsx("span",{className:"text-lg font-mono font-bold text-green-600 dark:text-green-400",children:u3(r)})]})}),(e==null?void 0:e.checkOut)&&f.jsxs("div",{className:"flex items-center justify-between text-sm",children:[f.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:"Jam Pulang"}),f.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:vr(e.checkOut)})]})]})]})},h3=({employees:t=[],attendances:e=[],isLoading:n=!1,onEmployeeClick:r})=>{const i=e.reduce((o,a)=>(o[a.userId]=a,o),{});return n?f.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:Array.from({length:8}).map((o,a)=>f.jsx(kj,{},a))}):t.length===0?f.jsx("div",{className:"text-center py-12",children:f.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Tidak ada data karyawan"})}):f.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:t.map(o=>f.jsx(c3,{employee:o,attendance:i[o.id],onClick:()=>r==null?void 0:r(o)},o.id))})};function x1(t,e){const n=O.useRef(e);O.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}function E1(t,e,n){e.center!==n.center&&t.setLatLng(e.center),e.radius!=null&&e.radius!==n.radius&&t.setRadius(e.radius)}const d3=1;function f3(t){return Object.freeze({__version:d3,map:t})}function T1(t,e){return Object.freeze({...t,...e})}const k1=O.createContext(null),I1=k1.Provider;function Df(){const t=O.useContext(k1);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function m3(t){function e(n,r){const{instance:i,context:o}=t(n).current;return O.useImperativeHandle(r,()=>i),n.children==null?null:Vh.createElement(I1,{value:o},n.children)}return O.forwardRef(e)}function p3(t){function e(n,r){const[i,o]=O.useState(!1),{instance:a}=t(n,o).current;O.useImperativeHandle(r,()=>a),O.useEffect(function(){i&&a.update()},[a,i,n.children]);const c=a._contentNode;return c?iT.createPortal(n.children,c):null}return O.forwardRef(e)}function g3(t){function e(n,r){const{instance:i}=t(n).current;return O.useImperativeHandle(r,()=>i),null}return O.forwardRef(e)}function vy(t,e){const n=O.useRef();O.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function jf(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}function _3(t,e){return function(r,i){const o=Df(),a=t(jf(r,o),o);return x1(o.map,r.attribution),vy(a.current,r.eventHandlers),e(a.current,o,r,i),a}}var hg={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,r){r(e)})(uP,function(n){var r="1.9.4";function i(s){var l,h,p,y;for(h=1,p=arguments.length;h<p;h++){y=arguments[h];for(l in y)s[l]=y[l]}return s}var o=Object.create||function(){function s(){}return function(l){return s.prototype=l,new s}}();function a(s,l){var h=Array.prototype.slice;if(s.bind)return s.bind.apply(s,h.call(arguments,1));var p=h.call(arguments,2);return function(){return s.apply(l,p.length?p.concat(h.call(arguments)):arguments)}}var c=0;function d(s){return"_leaflet_id"in s||(s._leaflet_id=++c),s._leaflet_id}function m(s,l,h){var p,y,E,V;return V=function(){p=!1,y&&(E.apply(h,y),y=!1)},E=function(){p?y=arguments:(s.apply(h,arguments),setTimeout(V,l),p=!0)},E}function _(s,l,h){var p=l[1],y=l[0],E=p-y;return s===p&&h?s:((s-y)%E+E)%E+y}function v(){return!1}function x(s,l){if(l===!1)return s;var h=Math.pow(10,l===void 0?6:l);return Math.round(s*h)/h}function S(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function C(s){return S(s).split(/\s+/)}function R(s,l){Object.prototype.hasOwnProperty.call(s,"options")||(s.options=s.options?o(s.options):{});for(var h in l)s.options[h]=l[h];return s.options}function F(s,l,h){var p=[];for(var y in s)p.push(encodeURIComponent(h?y.toUpperCase():y)+"="+encodeURIComponent(s[y]));return(!l||l.indexOf("?")===-1?"?":"&")+p.join("&")}var b=/\{ *([\w_ -]+) *\}/g;function T(s,l){return s.replace(b,function(h,p){var y=l[p];if(y===void 0)throw new Error("No value provided for variable "+h);return typeof y=="function"&&(y=y(l)),y})}var P=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function z(s,l){for(var h=0;h<s.length;h++)if(s[h]===l)return h;return-1}var K="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function $(s){return window["webkit"+s]||window["moz"+s]||window["ms"+s]}var A=0;function k(s){var l=+new Date,h=Math.max(0,16-(l-A));return A=l+h,window.setTimeout(s,h)}var N=window.requestAnimationFrame||$("RequestAnimationFrame")||k,j=window.cancelAnimationFrame||$("CancelAnimationFrame")||$("CancelRequestAnimationFrame")||function(s){window.clearTimeout(s)};function U(s,l,h){if(h&&N===k)s.call(l);else return N.call(window,a(s,l))}function M(s){s&&j.call(window,s)}var D={__proto__:null,extend:i,create:o,bind:a,get lastId(){return c},stamp:d,throttle:m,wrapNum:_,falseFn:v,formatNum:x,trim:S,splitWords:C,setOptions:R,getParamString:F,template:T,isArray:P,indexOf:z,emptyImageUrl:K,requestFn:N,cancelFn:j,requestAnimFrame:U,cancelAnimFrame:M};function me(){}me.extend=function(s){var l=function(){R(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},h=l.__super__=this.prototype,p=o(h);p.constructor=l,l.prototype=p;for(var y in this)Object.prototype.hasOwnProperty.call(this,y)&&y!=="prototype"&&y!=="__super__"&&(l[y]=this[y]);return s.statics&&i(l,s.statics),s.includes&&(kt(s.includes),i.apply(null,[p].concat(s.includes))),i(p,s),delete p.statics,delete p.includes,p.options&&(p.options=h.options?o(h.options):{},i(p.options,s.options)),p._initHooks=[],p.callInitHooks=function(){if(!this._initHooksCalled){h.callInitHooks&&h.callInitHooks.call(this),this._initHooksCalled=!0;for(var E=0,V=p._initHooks.length;E<V;E++)p._initHooks[E].call(this)}},l},me.include=function(s){var l=this.prototype.options;return i(this.prototype,s),s.options&&(this.prototype.options=l,this.mergeOptions(s.options)),this},me.mergeOptions=function(s){return i(this.prototype.options,s),this},me.addInitHook=function(s){var l=Array.prototype.slice.call(arguments,1),h=typeof s=="function"?s:function(){this[s].apply(this,l)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(h),this};function kt(s){if(!(typeof L>"u"||!L||!L.Mixin)){s=P(s)?s:[s];for(var l=0;l<s.length;l++)s[l]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var vt={on:function(s,l,h){if(typeof s=="object")for(var p in s)this._on(p,s[p],l);else{s=C(s);for(var y=0,E=s.length;y<E;y++)this._on(s[y],l,h)}return this},off:function(s,l,h){if(!arguments.length)delete this._events;else if(typeof s=="object")for(var p in s)this._off(p,s[p],l);else{s=C(s);for(var y=arguments.length===1,E=0,V=s.length;E<V;E++)y?this._off(s[E]):this._off(s[E],l,h)}return this},_on:function(s,l,h,p){if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}if(this._listens(s,l,h)===!1){h===this&&(h=void 0);var y={fn:l,ctx:h};p&&(y.once=!0),this._events=this._events||{},this._events[s]=this._events[s]||[],this._events[s].push(y)}},_off:function(s,l,h){var p,y,E;if(this._events&&(p=this._events[s],!!p)){if(arguments.length===1){if(this._firingCount)for(y=0,E=p.length;y<E;y++)p[y].fn=v;delete this._events[s];return}if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}var V=this._listens(s,l,h);if(V!==!1){var W=p[V];this._firingCount&&(W.fn=v,this._events[s]=p=p.slice()),p.splice(V,1)}}},fire:function(s,l,h){if(!this.listens(s,h))return this;var p=i({},l,{type:s,target:this,sourceTarget:l&&l.sourceTarget||this});if(this._events){var y=this._events[s];if(y){this._firingCount=this._firingCount+1||1;for(var E=0,V=y.length;E<V;E++){var W=y[E],H=W.fn;W.once&&this.off(s,H,W.ctx),H.call(W.ctx||this,p)}this._firingCount--}}return h&&this._propagateEvent(p),this},listens:function(s,l,h,p){typeof s!="string"&&console.warn('"string" type argument expected');var y=l;typeof l!="function"&&(p=!!l,y=void 0,h=void 0);var E=this._events&&this._events[s];if(E&&E.length&&this._listens(s,y,h)!==!1)return!0;if(p){for(var V in this._eventParents)if(this._eventParents[V].listens(s,l,h,p))return!0}return!1},_listens:function(s,l,h){if(!this._events)return!1;var p=this._events[s]||[];if(!l)return!!p.length;h===this&&(h=void 0);for(var y=0,E=p.length;y<E;y++)if(p[y].fn===l&&p[y].ctx===h)return y;return!1},once:function(s,l,h){if(typeof s=="object")for(var p in s)this._on(p,s[p],l,!0);else{s=C(s);for(var y=0,E=s.length;y<E;y++)this._on(s[y],l,h,!0)}return this},addEventParent:function(s){return this._eventParents=this._eventParents||{},this._eventParents[d(s)]=s,this},removeEventParent:function(s){return this._eventParents&&delete this._eventParents[d(s)],this},_propagateEvent:function(s){for(var l in this._eventParents)this._eventParents[l].fire(s.type,i({layer:s.target,propagatedFrom:s.target},s),!0)}};vt.addEventListener=vt.on,vt.removeEventListener=vt.clearAllEventListeners=vt.off,vt.addOneTimeEventListener=vt.once,vt.fireEvent=vt.fire,vt.hasEventListeners=vt.listens;var Xt=me.extend(vt);function G(s,l,h){this.x=h?Math.round(s):s,this.y=h?Math.round(l):l}var ue=Math.trunc||function(s){return s>0?Math.floor(s):Math.ceil(s)};G.prototype={clone:function(){return new G(this.x,this.y)},add:function(s){return this.clone()._add(J(s))},_add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.clone()._subtract(J(s))},_subtract:function(s){return this.x-=s.x,this.y-=s.y,this},divideBy:function(s){return this.clone()._divideBy(s)},_divideBy:function(s){return this.x/=s,this.y/=s,this},multiplyBy:function(s){return this.clone()._multiplyBy(s)},_multiplyBy:function(s){return this.x*=s,this.y*=s,this},scaleBy:function(s){return new G(this.x*s.x,this.y*s.y)},unscaleBy:function(s){return new G(this.x/s.x,this.y/s.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ue(this.x),this.y=ue(this.y),this},distanceTo:function(s){s=J(s);var l=s.x-this.x,h=s.y-this.y;return Math.sqrt(l*l+h*h)},equals:function(s){return s=J(s),s.x===this.x&&s.y===this.y},contains:function(s){return s=J(s),Math.abs(s.x)<=Math.abs(this.x)&&Math.abs(s.y)<=Math.abs(this.y)},toString:function(){return"Point("+x(this.x)+", "+x(this.y)+")"}};function J(s,l,h){return s instanceof G?s:P(s)?new G(s[0],s[1]):s==null?s:typeof s=="object"&&"x"in s&&"y"in s?new G(s.x,s.y):new G(s,l,h)}function he(s,l){if(s)for(var h=l?[s,l]:s,p=0,y=h.length;p<y;p++)this.extend(h[p])}he.prototype={extend:function(s){var l,h;if(!s)return this;if(s instanceof G||typeof s[0]=="number"||"x"in s)l=h=J(s);else if(s=we(s),l=s.min,h=s.max,!l||!h)return this;return!this.min&&!this.max?(this.min=l.clone(),this.max=h.clone()):(this.min.x=Math.min(l.x,this.min.x),this.max.x=Math.max(h.x,this.max.x),this.min.y=Math.min(l.y,this.min.y),this.max.y=Math.max(h.y,this.max.y)),this},getCenter:function(s){return J((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,s)},getBottomLeft:function(){return J(this.min.x,this.max.y)},getTopRight:function(){return J(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(s){var l,h;return typeof s[0]=="number"||s instanceof G?s=J(s):s=we(s),s instanceof he?(l=s.min,h=s.max):l=h=s,l.x>=this.min.x&&h.x<=this.max.x&&l.y>=this.min.y&&h.y<=this.max.y},intersects:function(s){s=we(s);var l=this.min,h=this.max,p=s.min,y=s.max,E=y.x>=l.x&&p.x<=h.x,V=y.y>=l.y&&p.y<=h.y;return E&&V},overlaps:function(s){s=we(s);var l=this.min,h=this.max,p=s.min,y=s.max,E=y.x>l.x&&p.x<h.x,V=y.y>l.y&&p.y<h.y;return E&&V},isValid:function(){return!!(this.min&&this.max)},pad:function(s){var l=this.min,h=this.max,p=Math.abs(l.x-h.x)*s,y=Math.abs(l.y-h.y)*s;return we(J(l.x-p,l.y-y),J(h.x+p,h.y+y))},equals:function(s){return s?(s=we(s),this.min.equals(s.getTopLeft())&&this.max.equals(s.getBottomRight())):!1}};function we(s,l){return!s||s instanceof he?s:new he(s,l)}function Se(s,l){if(s)for(var h=l?[s,l]:s,p=0,y=h.length;p<y;p++)this.extend(h[p])}Se.prototype={extend:function(s){var l=this._southWest,h=this._northEast,p,y;if(s instanceof Te)p=s,y=s;else if(s instanceof Se){if(p=s._southWest,y=s._northEast,!p||!y)return this}else return s?this.extend(pe(s)||De(s)):this;return!l&&!h?(this._southWest=new Te(p.lat,p.lng),this._northEast=new Te(y.lat,y.lng)):(l.lat=Math.min(p.lat,l.lat),l.lng=Math.min(p.lng,l.lng),h.lat=Math.max(y.lat,h.lat),h.lng=Math.max(y.lng,h.lng)),this},pad:function(s){var l=this._southWest,h=this._northEast,p=Math.abs(l.lat-h.lat)*s,y=Math.abs(l.lng-h.lng)*s;return new Se(new Te(l.lat-p,l.lng-y),new Te(h.lat+p,h.lng+y))},getCenter:function(){return new Te((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Te(this.getNorth(),this.getWest())},getSouthEast:function(){return new Te(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(s){typeof s[0]=="number"||s instanceof Te||"lat"in s?s=pe(s):s=De(s);var l=this._southWest,h=this._northEast,p,y;return s instanceof Se?(p=s.getSouthWest(),y=s.getNorthEast()):p=y=s,p.lat>=l.lat&&y.lat<=h.lat&&p.lng>=l.lng&&y.lng<=h.lng},intersects:function(s){s=De(s);var l=this._southWest,h=this._northEast,p=s.getSouthWest(),y=s.getNorthEast(),E=y.lat>=l.lat&&p.lat<=h.lat,V=y.lng>=l.lng&&p.lng<=h.lng;return E&&V},overlaps:function(s){s=De(s);var l=this._southWest,h=this._northEast,p=s.getSouthWest(),y=s.getNorthEast(),E=y.lat>l.lat&&p.lat<h.lat,V=y.lng>l.lng&&p.lng<h.lng;return E&&V},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(s,l){return s?(s=De(s),this._southWest.equals(s.getSouthWest(),l)&&this._northEast.equals(s.getNorthEast(),l)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function De(s,l){return s instanceof Se?s:new Se(s,l)}function Te(s,l,h){if(isNaN(s)||isNaN(l))throw new Error("Invalid LatLng object: ("+s+", "+l+")");this.lat=+s,this.lng=+l,h!==void 0&&(this.alt=+h)}Te.prototype={equals:function(s,l){if(!s)return!1;s=pe(s);var h=Math.max(Math.abs(this.lat-s.lat),Math.abs(this.lng-s.lng));return h<=(l===void 0?1e-9:l)},toString:function(s){return"LatLng("+x(this.lat,s)+", "+x(this.lng,s)+")"},distanceTo:function(s){return lr.distance(this,pe(s))},wrap:function(){return lr.wrapLatLng(this)},toBounds:function(s){var l=180*s/40075017,h=l/Math.cos(Math.PI/180*this.lat);return De([this.lat-l,this.lng-h],[this.lat+l,this.lng+h])},clone:function(){return new Te(this.lat,this.lng,this.alt)}};function pe(s,l,h){return s instanceof Te?s:P(s)&&typeof s[0]!="object"?s.length===3?new Te(s[0],s[1],s[2]):s.length===2?new Te(s[0],s[1]):null:s==null?s:typeof s=="object"&&"lat"in s?new Te(s.lat,"lng"in s?s.lng:s.lon,s.alt):l===void 0?null:new Te(s,l,h)}var wt={latLngToPoint:function(s,l){var h=this.projection.project(s),p=this.scale(l);return this.transformation._transform(h,p)},pointToLatLng:function(s,l){var h=this.scale(l),p=this.transformation.untransform(s,h);return this.projection.unproject(p)},project:function(s){return this.projection.project(s)},unproject:function(s){return this.projection.unproject(s)},scale:function(s){return 256*Math.pow(2,s)},zoom:function(s){return Math.log(s/256)/Math.LN2},getProjectedBounds:function(s){if(this.infinite)return null;var l=this.projection.bounds,h=this.scale(s),p=this.transformation.transform(l.min,h),y=this.transformation.transform(l.max,h);return new he(p,y)},infinite:!1,wrapLatLng:function(s){var l=this.wrapLng?_(s.lng,this.wrapLng,!0):s.lng,h=this.wrapLat?_(s.lat,this.wrapLat,!0):s.lat,p=s.alt;return new Te(h,l,p)},wrapLatLngBounds:function(s){var l=s.getCenter(),h=this.wrapLatLng(l),p=l.lat-h.lat,y=l.lng-h.lng;if(p===0&&y===0)return s;var E=s.getSouthWest(),V=s.getNorthEast(),W=new Te(E.lat-p,E.lng-y),H=new Te(V.lat-p,V.lng-y);return new Se(W,H)}},lr=i({},wt,{wrapLng:[-180,180],R:6371e3,distance:function(s,l){var h=Math.PI/180,p=s.lat*h,y=l.lat*h,E=Math.sin((l.lat-s.lat)*h/2),V=Math.sin((l.lng-s.lng)*h/2),W=E*E+Math.cos(p)*Math.cos(y)*V*V,H=2*Math.atan2(Math.sqrt(W),Math.sqrt(1-W));return this.R*H}}),uc=6378137,hi={R:uc,MAX_LATITUDE:85.0511287798,project:function(s){var l=Math.PI/180,h=this.MAX_LATITUDE,p=Math.max(Math.min(h,s.lat),-h),y=Math.sin(p*l);return new G(this.R*s.lng*l,this.R*Math.log((1+y)/(1-y))/2)},unproject:function(s){var l=180/Math.PI;return new Te((2*Math.atan(Math.exp(s.y/this.R))-Math.PI/2)*l,s.x*l/this.R)},bounds:function(){var s=uc*Math.PI;return new he([-s,-s],[s,s])}()};function di(s,l,h,p){if(P(s)){this._a=s[0],this._b=s[1],this._c=s[2],this._d=s[3];return}this._a=s,this._b=l,this._c=h,this._d=p}di.prototype={transform:function(s,l){return this._transform(s.clone(),l)},_transform:function(s,l){return l=l||1,s.x=l*(this._a*s.x+this._b),s.y=l*(this._c*s.y+this._d),s},untransform:function(s,l){return l=l||1,new G((s.x/l-this._b)/this._a,(s.y/l-this._d)/this._c)}};function Ar(s,l,h,p){return new di(s,l,h,p)}var ds=i({},lr,{code:"EPSG:3857",projection:hi,transformation:function(){var s=.5/(Math.PI*hi.R);return Ar(s,.5,-s,.5)}()}),$a=i({},ds,{code:"EPSG:900913"});function lo(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function qa(s,l){var h="",p,y,E,V,W,H;for(p=0,E=s.length;p<E;p++){for(W=s[p],y=0,V=W.length;y<V;y++)H=W[y],h+=(y?"L":"M")+H.x+" "+H.y;h+=l?se.svg?"z":"x":""}return h||"M0 0"}var Ka=document.documentElement.style,uo="ActiveXObject"in window,cc=uo&&!document.addEventListener,co="msLaunchUri"in navigator&&!("documentMode"in document),ho=An("webkit"),hc=An("android"),fo=An("android 2")||An("android 3"),Ga=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),dc=hc&&An("Google")&&Ga<537&&!("AudioNode"in window),ft=!!window.opera,It=!co&&An("chrome"),fs=An("gecko")&&!ho&&!ft&&!uo,fc=!It&&An("safari"),Za=An("phantom"),mc="OTransition"in Ka,ms=navigator.platform.indexOf("Win")===0,Qa=uo&&"transition"in Ka,mo="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!fo,po="MozPerspective"in Ka,Ff=!window.L_DISABLE_3D&&(Qa||mo||po)&&!mc&&!Za,ps=typeof orientation<"u"||An("mobile"),Ya=ps&&ho,pc=ps&&mo,Xa=!window.PointerEvent&&window.MSPointerEvent,fi=!!(window.PointerEvent||Xa),go="ontouchstart"in window||!!window.TouchEvent,Ja=!window.L_NO_TOUCH&&(go||fi),Cr=ps&&ft,gc=ps&&fs,_o=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,_c=function(){var s=!1;try{var l=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveEventSupport",v,l),window.removeEventListener("testPassiveEventSupport",v,l)}catch{}return s}(),gs=function(){return!!document.createElement("canvas").getContext}(),yo=!!(document.createElementNS&&lo("svg").createSVGRect),Ot=!!yo&&function(){var s=document.createElement("div");return s.innerHTML="<svg/>",(s.firstChild&&s.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),yc=!yo&&function(){try{var s=document.createElement("div");s.innerHTML='<v:shape adj="1"/>';var l=s.firstChild;return l.style.behavior="url(#default#VML)",l&&typeof l.adj=="object"}catch{return!1}}(),_s=navigator.platform.indexOf("Mac")===0,ys=navigator.platform.indexOf("Linux")===0;function An(s){return navigator.userAgent.toLowerCase().indexOf(s)>=0}var se={ie:uo,ielt9:cc,edge:co,webkit:ho,android:hc,android23:fo,androidStock:dc,opera:ft,chrome:It,gecko:fs,safari:fc,phantom:Za,opera12:mc,win:ms,ie3d:Qa,webkit3d:mo,gecko3d:po,any3d:Ff,mobile:ps,mobileWebkit:Ya,mobileWebkit3d:pc,msPointer:Xa,pointer:fi,touch:Ja,touchNative:go,mobileOpera:Cr,mobileGecko:gc,retina:_o,passiveEvents:_c,canvas:gs,svg:yo,vml:yc,inlineSvg:Ot,mac:_s,linux:ys},Nr=se.msPointer?"MSPointerDown":"pointerdown",vc=se.msPointer?"MSPointerMove":"pointermove",wc=se.msPointer?"MSPointerUp":"pointerup",vs=se.msPointer?"MSPointerCancel":"pointercancel",vo={touchstart:Nr,touchmove:vc,touchend:wc,touchcancel:vs},wo={touchstart:Eo,touchmove:xo,touchend:xo,touchcancel:xo},$n={},qn=!1;function xc(s,l,h){return l==="touchstart"&&Tc(),wo[l]?(h=wo[l].bind(this,h),s.addEventListener(vo[l],h,!1),h):(console.warn("wrong event specified:",l),v)}function Ec(s,l,h){if(!vo[l]){console.warn("wrong event specified:",l);return}s.removeEventListener(vo[l],h,!1)}function el(s){$n[s.pointerId]=s}function tl(s){$n[s.pointerId]&&($n[s.pointerId]=s)}function nl(s){delete $n[s.pointerId]}function Tc(){qn||(document.addEventListener(Nr,el,!0),document.addEventListener(vc,tl,!0),document.addEventListener(wc,nl,!0),document.addEventListener(vs,nl,!0),qn=!0)}function xo(s,l){if(l.pointerType!==(l.MSPOINTER_TYPE_MOUSE||"mouse")){l.touches=[];for(var h in $n)l.touches.push($n[h]);l.changedTouches=[l],s(l)}}function Eo(s,l){l.MSPOINTER_TYPE_TOUCH&&l.pointerType===l.MSPOINTER_TYPE_TOUCH&&Je(l),xo(s,l)}function kc(s){var l={},h,p;for(p in s)h=s[p],l[p]=h&&h.bind?h.bind(s):h;return s=l,l.type="dblclick",l.detail=2,l.isTrusted=!1,l._simulated=!0,l}var rl=200;function ws(s,l){s.addEventListener("dblclick",l);var h=0,p;function y(E){if(E.detail!==1){p=E.detail;return}if(!(E.pointerType==="mouse"||E.sourceCapabilities&&!E.sourceCapabilities.firesTouchEvents)){var V=pl(E);if(!(V.some(function(H){return H instanceof HTMLLabelElement&&H.attributes.for})&&!V.some(function(H){return H instanceof HTMLInputElement||H instanceof HTMLSelectElement}))){var W=Date.now();W-h<=rl?(p++,p===2&&l(kc(E))):p=1,h=W}}}return s.addEventListener("click",y),{dblclick:l,simDblclick:y}}function Rr(s,l){s.removeEventListener("dblclick",l.dblclick),s.removeEventListener("click",l.simDblclick)}var xs=Mr(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Es=Mr(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),il=Es==="webkitTransition"||Es==="OTransition"?Es+"End":"transitionend";function sl(s){return typeof s=="string"?document.getElementById(s):s}function mi(s,l){var h=s.style[l]||s.currentStyle&&s.currentStyle[l];if((!h||h==="auto")&&document.defaultView){var p=document.defaultView.getComputedStyle(s,null);h=p?p[l]:null}return h==="auto"?null:h}function be(s,l,h){var p=document.createElement(s);return p.className=l||"",h&&h.appendChild(p),p}function He(s){var l=s.parentNode;l&&l.removeChild(s)}function Ts(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function Lr(s){var l=s.parentNode;l&&l.lastChild!==s&&l.appendChild(s)}function pi(s){var l=s.parentNode;l&&l.firstChild!==s&&l.insertBefore(s,l.firstChild)}function ol(s,l){if(s.classList!==void 0)return s.classList.contains(l);var h=Cn(s);return h.length>0&&new RegExp("(^|\\s)"+l+"(\\s|$)").test(h)}function ve(s,l){if(s.classList!==void 0)for(var h=C(l),p=0,y=h.length;p<y;p++)s.classList.add(h[p]);else if(!ol(s,l)){var E=Cn(s);al(s,(E?E+" ":"")+l)}}function Qe(s,l){s.classList!==void 0?s.classList.remove(l):al(s,S((" "+Cn(s)+" ").replace(" "+l+" "," ")))}function al(s,l){s.className.baseVal===void 0?s.className=l:s.className.baseVal=l}function Cn(s){return s.correspondingElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function ot(s,l){"opacity"in s.style?s.style.opacity=l:"filter"in s.style&&To(s,l)}function To(s,l){var h=!1,p="DXImageTransform.Microsoft.Alpha";try{h=s.filters.item(p)}catch{if(l===1)return}l=Math.round(l*100),h?(h.Enabled=l!==100,h.Opacity=l):s.style.filter+=" progid:"+p+"(opacity="+l+")"}function Mr(s){for(var l=document.documentElement.style,h=0;h<s.length;h++)if(s[h]in l)return s[h];return!1}function ur(s,l,h){var p=l||new G(0,0);s.style[xs]=(se.ie3d?"translate("+p.x+"px,"+p.y+"px)":"translate3d("+p.x+"px,"+p.y+"px,0)")+(h?" scale("+h+")":"")}function de(s,l){s._leaflet_pos=l,se.any3d?ur(s,l):(s.style.left=l.x+"px",s.style.top=l.y+"px")}function Nn(s){return s._leaflet_pos||new G(0,0)}var Kn,Gn,ll;if("onselectstart"in document)Kn=function(){ae(window,"selectstart",Je)},Gn=function(){Be(window,"selectstart",Je)};else{var gi=Mr(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Kn=function(){if(gi){var s=document.documentElement.style;ll=s[gi],s[gi]="none"}},Gn=function(){gi&&(document.documentElement.style[gi]=ll,ll=void 0)}}function ul(){ae(window,"dragstart",Je)}function cl(){Be(window,"dragstart",Je)}var ko,hl;function Or(s){for(;s.tabIndex===-1;)s=s.parentNode;s.style&&(pn(),ko=s,hl=s.style.outlineStyle,s.style.outlineStyle="none",ae(window,"keydown",pn))}function pn(){ko&&(ko.style.outlineStyle=hl,ko=void 0,hl=void 0,Be(window,"keydown",pn))}function dl(s){do s=s.parentNode;while((!s.offsetWidth||!s.offsetHeight)&&s!==document.body);return s}function Io(s){var l=s.getBoundingClientRect();return{x:l.width/s.offsetWidth||1,y:l.height/s.offsetHeight||1,boundingClientRect:l}}var Ic={__proto__:null,TRANSFORM:xs,TRANSITION:Es,TRANSITION_END:il,get:sl,getStyle:mi,create:be,remove:He,empty:Ts,toFront:Lr,toBack:pi,hasClass:ol,addClass:ve,removeClass:Qe,setClass:al,getClass:Cn,setOpacity:ot,testProp:Mr,setTransform:ur,setPosition:de,getPosition:Nn,get disableTextSelection(){return Kn},get enableTextSelection(){return Gn},disableImageDrag:ul,enableImageDrag:cl,preventOutline:Or,restoreOutline:pn,getSizedParentNode:dl,getScale:Io};function ae(s,l,h,p){if(l&&typeof l=="object")for(var y in l)fl(s,y,l[y],h);else{l=C(l);for(var E=0,V=l.length;E<V;E++)fl(s,l[E],h,p)}return this}var Rn="_leaflet_events";function Be(s,l,h,p){if(arguments.length===1)Pc(s),delete s[Rn];else if(l&&typeof l=="object")for(var y in l)ml(s,y,l[y],h);else if(l=C(l),arguments.length===2)Pc(s,function(W){return z(l,W)!==-1});else for(var E=0,V=l.length;E<V;E++)ml(s,l[E],h,p);return this}function Pc(s,l){for(var h in s[Rn]){var p=h.split(/\d/)[0];(!l||l(p))&&ml(s,p,null,null,h)}}var Ln={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function fl(s,l,h,p){var y=l+d(h)+(p?"_"+d(p):"");if(s[Rn]&&s[Rn][y])return this;var E=function(W){return h.call(p||s,W||window.event)},V=E;!se.touchNative&&se.pointer&&l.indexOf("touch")===0?E=xc(s,l,E):se.touch&&l==="dblclick"?E=ws(s,E):"addEventListener"in s?l==="touchstart"||l==="touchmove"||l==="wheel"||l==="mousewheel"?s.addEventListener(Ln[l]||l,E,se.passiveEvents?{passive:!1}:!1):l==="mouseenter"||l==="mouseleave"?(E=function(W){W=W||window.event,gl(s,W)&&V(W)},s.addEventListener(Ln[l],E,!1)):s.addEventListener(l,V,!1):s.attachEvent("on"+l,E),s[Rn]=s[Rn]||{},s[Rn][y]=E}function ml(s,l,h,p,y){y=y||l+d(h)+(p?"_"+d(p):"");var E=s[Rn]&&s[Rn][y];if(!E)return this;!se.touchNative&&se.pointer&&l.indexOf("touch")===0?Ec(s,l,E):se.touch&&l==="dblclick"?Rr(s,E):"removeEventListener"in s?s.removeEventListener(Ln[l]||l,E,!1):s.detachEvent("on"+l,E),s[Rn][y]=null}function Mn(s){return s.stopPropagation?s.stopPropagation():s.originalEvent?s.originalEvent._stopped=!0:s.cancelBubble=!0,this}function _i(s){return fl(s,"wheel",Mn),this}function yi(s){return ae(s,"mousedown touchstart dblclick contextmenu",Mn),s._leaflet_disable_click=!0,this}function Je(s){return s.preventDefault?s.preventDefault():s.returnValue=!1,this}function gn(s){return Je(s),Mn(s),this}function pl(s){if(s.composedPath)return s.composedPath();for(var l=[],h=s.target;h;)l.push(h),h=h.parentNode;return l}function Po(s,l){if(!l)return new G(s.clientX,s.clientY);var h=Io(l),p=h.boundingClientRect;return new G((s.clientX-p.left)/h.x-l.clientLeft,(s.clientY-p.top)/h.y-l.clientTop)}var Ye=se.linux&&se.chrome?window.devicePixelRatio:se.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Sc(s){return se.edge?s.wheelDeltaY/2:s.deltaY&&s.deltaMode===0?-s.deltaY/Ye:s.deltaY&&s.deltaMode===1?-s.deltaY*20:s.deltaY&&s.deltaMode===2?-s.deltaY*60:s.deltaX||s.deltaZ?0:s.wheelDelta?(s.wheelDeltaY||s.wheelDelta)/2:s.detail&&Math.abs(s.detail)<32765?-s.detail*20:s.detail?s.detail/-32765*60:0}function gl(s,l){var h=l.relatedTarget;if(!h)return!0;try{for(;h&&h!==s;)h=h.parentNode}catch{return!1}return h!==s}var bc={__proto__:null,on:ae,off:Be,stopPropagation:Mn,disableScrollPropagation:_i,disableClickPropagation:yi,preventDefault:Je,stop:gn,getPropagationPath:pl,getMousePosition:Po,getWheelDelta:Sc,isExternalTarget:gl,addListener:ae,removeListener:Be},_l=Xt.extend({run:function(s,l,h,p){this.stop(),this._el=s,this._inProgress=!0,this._duration=h||.25,this._easeOutPower=1/Math.max(p||.5,.2),this._startPos=Nn(s),this._offset=l.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=U(this._animate,this),this._step()},_step:function(s){var l=+new Date-this._startTime,h=this._duration*1e3;l<h?this._runFrame(this._easeOut(l/h),s):(this._runFrame(1),this._complete())},_runFrame:function(s,l){var h=this._startPos.add(this._offset.multiplyBy(s));l&&h._round(),de(this._el,h),this.fire("step")},_complete:function(){M(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(s){return 1-Math.pow(1-s,this._easeOutPower)}}),Ie=Xt.extend({options:{crs:ds,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(s,l){l=R(this,l),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(s),this._initLayout(),this._onResize=a(this._onResize,this),this._initEvents(),l.maxBounds&&this.setMaxBounds(l.maxBounds),l.zoom!==void 0&&(this._zoom=this._limitZoom(l.zoom)),l.center&&l.zoom!==void 0&&this.setView(pe(l.center),l.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Es&&se.any3d&&!se.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ae(this._proxy,il,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(s,l,h){if(l=l===void 0?this._zoom:this._limitZoom(l),s=this._limitCenter(pe(s),l,this.options.maxBounds),h=h||{},this._stop(),this._loaded&&!h.reset&&h!==!0){h.animate!==void 0&&(h.zoom=i({animate:h.animate},h.zoom),h.pan=i({animate:h.animate,duration:h.duration},h.pan));var p=this._zoom!==l?this._tryAnimatedZoom&&this._tryAnimatedZoom(s,l,h.zoom):this._tryAnimatedPan(s,h.pan);if(p)return clearTimeout(this._sizeTimer),this}return this._resetView(s,l,h.pan&&h.pan.noMoveStart),this},setZoom:function(s,l){return this._loaded?this.setView(this.getCenter(),s,{zoom:l}):(this._zoom=s,this)},zoomIn:function(s,l){return s=s||(se.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+s,l)},zoomOut:function(s,l){return s=s||(se.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-s,l)},setZoomAround:function(s,l,h){var p=this.getZoomScale(l),y=this.getSize().divideBy(2),E=s instanceof G?s:this.latLngToContainerPoint(s),V=E.subtract(y).multiplyBy(1-1/p),W=this.containerPointToLatLng(y.add(V));return this.setView(W,l,{zoom:h})},_getBoundsCenterZoom:function(s,l){l=l||{},s=s.getBounds?s.getBounds():De(s);var h=J(l.paddingTopLeft||l.padding||[0,0]),p=J(l.paddingBottomRight||l.padding||[0,0]),y=this.getBoundsZoom(s,!1,h.add(p));if(y=typeof l.maxZoom=="number"?Math.min(l.maxZoom,y):y,y===1/0)return{center:s.getCenter(),zoom:y};var E=p.subtract(h).divideBy(2),V=this.project(s.getSouthWest(),y),W=this.project(s.getNorthEast(),y),H=this.unproject(V.add(W).divideBy(2).add(E),y);return{center:H,zoom:y}},fitBounds:function(s,l){if(s=De(s),!s.isValid())throw new Error("Bounds are not valid.");var h=this._getBoundsCenterZoom(s,l);return this.setView(h.center,h.zoom,l)},fitWorld:function(s){return this.fitBounds([[-90,-180],[90,180]],s)},panTo:function(s,l){return this.setView(s,this._zoom,{pan:l})},panBy:function(s,l){if(s=J(s).round(),l=l||{},!s.x&&!s.y)return this.fire("moveend");if(l.animate!==!0&&!this.getSize().contains(s))return this._resetView(this.unproject(this.project(this.getCenter()).add(s)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new _l,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),l.noMoveStart||this.fire("movestart"),l.animate!==!1){ve(this._mapPane,"leaflet-pan-anim");var h=this._getMapPanePos().subtract(s).round();this._panAnim.run(this._mapPane,h,l.duration||.25,l.easeLinearity)}else this._rawPanBy(s),this.fire("move").fire("moveend");return this},flyTo:function(s,l,h){if(h=h||{},h.animate===!1||!se.any3d)return this.setView(s,l,h);this._stop();var p=this.project(this.getCenter()),y=this.project(s),E=this.getSize(),V=this._zoom;s=pe(s),l=l===void 0?V:l;var W=Math.max(E.x,E.y),H=W*this.getZoomScale(V,l),Q=y.distanceTo(p)||1,te=1.42,le=te*te;function ke(pt){var Hc=pt?-1:1,iP=pt?H:W,sP=H*H-W*W+Hc*le*le*Q*Q,oP=2*iP*le*Q,qf=sP/oP,Hy=Math.sqrt(qf*qf+1)-qf,aP=Hy<1e-9?-18:Math.log(Hy);return aP}function en(pt){return(Math.exp(pt)-Math.exp(-pt))/2}function St(pt){return(Math.exp(pt)+Math.exp(-pt))/2}function Dn(pt){return en(pt)/St(pt)}var ln=ke(0);function Fo(pt){return W*(St(ln)/St(ln+te*pt))}function eP(pt){return W*(St(ln)*Dn(ln+te*pt)-en(ln))/le}function tP(pt){return 1-Math.pow(1-pt,1.5)}var nP=Date.now(),By=(ke(1)-ln)/te,rP=h.duration?1e3*h.duration:1e3*By*.8;function Wy(){var pt=(Date.now()-nP)/rP,Hc=tP(pt)*By;pt<=1?(this._flyToFrame=U(Wy,this),this._move(this.unproject(p.add(y.subtract(p).multiplyBy(eP(Hc)/Q)),V),this.getScaleZoom(W/Fo(Hc),V),{flyTo:!0})):this._move(s,l)._moveEnd(!0)}return this._moveStart(!0,h.noMoveStart),Wy.call(this),this},flyToBounds:function(s,l){var h=this._getBoundsCenterZoom(s,l);return this.flyTo(h.center,h.zoom,l)},setMaxBounds:function(s){return s=De(s),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),s.isValid()?(this.options.maxBounds=s,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(s){var l=this.options.minZoom;return this.options.minZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(s):this},setMaxZoom:function(s){var l=this.options.maxZoom;return this.options.maxZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(s):this},panInsideBounds:function(s,l){this._enforcingBounds=!0;var h=this.getCenter(),p=this._limitCenter(h,this._zoom,De(s));return h.equals(p)||this.panTo(p,l),this._enforcingBounds=!1,this},panInside:function(s,l){l=l||{};var h=J(l.paddingTopLeft||l.padding||[0,0]),p=J(l.paddingBottomRight||l.padding||[0,0]),y=this.project(this.getCenter()),E=this.project(s),V=this.getPixelBounds(),W=we([V.min.add(h),V.max.subtract(p)]),H=W.getSize();if(!W.contains(E)){this._enforcingBounds=!0;var Q=E.subtract(W.getCenter()),te=W.extend(E).getSize().subtract(H);y.x+=Q.x<0?-te.x:te.x,y.y+=Q.y<0?-te.y:te.y,this.panTo(this.unproject(y),l),this._enforcingBounds=!1}return this},invalidateSize:function(s){if(!this._loaded)return this;s=i({animate:!1,pan:!0},s===!0?{animate:!0}:s);var l=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var h=this.getSize(),p=l.divideBy(2).round(),y=h.divideBy(2).round(),E=p.subtract(y);return!E.x&&!E.y?this:(s.animate&&s.pan?this.panBy(E):(s.pan&&this._rawPanBy(E),this.fire("move"),s.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(a(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:l,newSize:h}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(s){if(s=this._locateOptions=i({timeout:1e4,watch:!1},s),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var l=a(this._handleGeolocationResponse,this),h=a(this._handleGeolocationError,this);return s.watch?this._locationWatchId=navigator.geolocation.watchPosition(l,h,s):navigator.geolocation.getCurrentPosition(l,h,s),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(s){if(this._container._leaflet_id){var l=s.code,h=s.message||(l===1?"permission denied":l===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:l,message:"Geolocation error: "+h+"."})}},_handleGeolocationResponse:function(s){if(this._container._leaflet_id){var l=s.coords.latitude,h=s.coords.longitude,p=new Te(l,h),y=p.toBounds(s.coords.accuracy*2),E=this._locateOptions;if(E.setView){var V=this.getBoundsZoom(y);this.setView(p,E.maxZoom?Math.min(V,E.maxZoom):V)}var W={latlng:p,bounds:y,timestamp:s.timestamp};for(var H in s.coords)typeof s.coords[H]=="number"&&(W[H]=s.coords[H]);this.fire("locationfound",W)}},addHandler:function(s,l){if(!l)return this;var h=this[s]=new l(this);return this._handlers.push(h),this.options[s]&&h.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),He(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(M(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var s;for(s in this._layers)this._layers[s].remove();for(s in this._panes)He(this._panes[s]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(s,l){var h="leaflet-pane"+(s?" leaflet-"+s.replace("Pane","")+"-pane":""),p=be("div",h,l||this._mapPane);return s&&(this._panes[s]=p),p},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var s=this.getPixelBounds(),l=this.unproject(s.getBottomLeft()),h=this.unproject(s.getTopRight());return new Se(l,h)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(s,l,h){s=De(s),h=J(h||[0,0]);var p=this.getZoom()||0,y=this.getMinZoom(),E=this.getMaxZoom(),V=s.getNorthWest(),W=s.getSouthEast(),H=this.getSize().subtract(h),Q=we(this.project(W,p),this.project(V,p)).getSize(),te=se.any3d?this.options.zoomSnap:1,le=H.x/Q.x,ke=H.y/Q.y,en=l?Math.max(le,ke):Math.min(le,ke);return p=this.getScaleZoom(en,p),te&&(p=Math.round(p/(te/100))*(te/100),p=l?Math.ceil(p/te)*te:Math.floor(p/te)*te),Math.max(y,Math.min(E,p))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new G(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(s,l){var h=this._getTopLeftPoint(s,l);return new he(h,h.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(s){return this.options.crs.getProjectedBounds(s===void 0?this.getZoom():s)},getPane:function(s){return typeof s=="string"?this._panes[s]:s},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(s,l){var h=this.options.crs;return l=l===void 0?this._zoom:l,h.scale(s)/h.scale(l)},getScaleZoom:function(s,l){var h=this.options.crs;l=l===void 0?this._zoom:l;var p=h.zoom(s*h.scale(l));return isNaN(p)?1/0:p},project:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.latLngToPoint(pe(s),l)},unproject:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.pointToLatLng(J(s),l)},layerPointToLatLng:function(s){var l=J(s).add(this.getPixelOrigin());return this.unproject(l)},latLngToLayerPoint:function(s){var l=this.project(pe(s))._round();return l._subtract(this.getPixelOrigin())},wrapLatLng:function(s){return this.options.crs.wrapLatLng(pe(s))},wrapLatLngBounds:function(s){return this.options.crs.wrapLatLngBounds(De(s))},distance:function(s,l){return this.options.crs.distance(pe(s),pe(l))},containerPointToLayerPoint:function(s){return J(s).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(s){return J(s).add(this._getMapPanePos())},containerPointToLatLng:function(s){var l=this.containerPointToLayerPoint(J(s));return this.layerPointToLatLng(l)},latLngToContainerPoint:function(s){return this.layerPointToContainerPoint(this.latLngToLayerPoint(pe(s)))},mouseEventToContainerPoint:function(s){return Po(s,this._container)},mouseEventToLayerPoint:function(s){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(s))},mouseEventToLatLng:function(s){return this.layerPointToLatLng(this.mouseEventToLayerPoint(s))},_initContainer:function(s){var l=this._container=sl(s);if(l){if(l._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ae(l,"scroll",this._onScroll,this),this._containerId=d(l)},_initLayout:function(){var s=this._container;this._fadeAnimated=this.options.fadeAnimation&&se.any3d,ve(s,"leaflet-container"+(se.touch?" leaflet-touch":"")+(se.retina?" leaflet-retina":"")+(se.ielt9?" leaflet-oldie":"")+(se.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var l=mi(s,"position");l!=="absolute"&&l!=="relative"&&l!=="fixed"&&l!=="sticky"&&(s.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var s=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),de(this._mapPane,new G(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ve(s.markerPane,"leaflet-zoom-hide"),ve(s.shadowPane,"leaflet-zoom-hide"))},_resetView:function(s,l,h){de(this._mapPane,new G(0,0));var p=!this._loaded;this._loaded=!0,l=this._limitZoom(l),this.fire("viewprereset");var y=this._zoom!==l;this._moveStart(y,h)._move(s,l)._moveEnd(y),this.fire("viewreset"),p&&this.fire("load")},_moveStart:function(s,l){return s&&this.fire("zoomstart"),l||this.fire("movestart"),this},_move:function(s,l,h,p){l===void 0&&(l=this._zoom);var y=this._zoom!==l;return this._zoom=l,this._lastCenter=s,this._pixelOrigin=this._getNewPixelOrigin(s),p?h&&h.pinch&&this.fire("zoom",h):((y||h&&h.pinch)&&this.fire("zoom",h),this.fire("move",h)),this},_moveEnd:function(s){return s&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return M(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(s){de(this._mapPane,this._getMapPanePos().subtract(s))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(s){this._targets={},this._targets[d(this._container)]=this;var l=s?Be:ae;l(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&l(window,"resize",this._onResize,this),se.any3d&&this.options.transform3DLimit&&(s?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){M(this._resizeRequest),this._resizeRequest=U(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var s=this._getMapPanePos();Math.max(Math.abs(s.x),Math.abs(s.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(s,l){for(var h=[],p,y=l==="mouseout"||l==="mouseover",E=s.target||s.srcElement,V=!1;E;){if(p=this._targets[d(E)],p&&(l==="click"||l==="preclick")&&this._draggableMoved(p)){V=!0;break}if(p&&p.listens(l,!0)&&(y&&!gl(E,s)||(h.push(p),y))||E===this._container)break;E=E.parentNode}return!h.length&&!V&&!y&&this.listens(l,!0)&&(h=[this]),h},_isClickDisabled:function(s){for(;s&&s!==this._container;){if(s._leaflet_disable_click)return!0;s=s.parentNode}},_handleDOMEvent:function(s){var l=s.target||s.srcElement;if(!(!this._loaded||l._leaflet_disable_events||s.type==="click"&&this._isClickDisabled(l))){var h=s.type;h==="mousedown"&&Or(l),this._fireDOMEvent(s,h)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(s,l,h){if(s.type==="click"){var p=i({},s);p.type="preclick",this._fireDOMEvent(p,p.type,h)}var y=this._findEventTargets(s,l);if(h){for(var E=[],V=0;V<h.length;V++)h[V].listens(l,!0)&&E.push(h[V]);y=E.concat(y)}if(y.length){l==="contextmenu"&&Je(s);var W=y[0],H={originalEvent:s};if(s.type!=="keypress"&&s.type!=="keydown"&&s.type!=="keyup"){var Q=W.getLatLng&&(!W._radius||W._radius<=10);H.containerPoint=Q?this.latLngToContainerPoint(W.getLatLng()):this.mouseEventToContainerPoint(s),H.layerPoint=this.containerPointToLayerPoint(H.containerPoint),H.latlng=Q?W.getLatLng():this.layerPointToLatLng(H.layerPoint)}for(V=0;V<y.length;V++)if(y[V].fire(l,H,!0),H.originalEvent._stopped||y[V].options.bubblingMouseEvents===!1&&z(this._mouseEvents,l)!==-1)return}},_draggableMoved:function(s){return s=s.dragging&&s.dragging.enabled()?s:this,s.dragging&&s.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var s=0,l=this._handlers.length;s<l;s++)this._handlers[s].disable()},whenReady:function(s,l){return this._loaded?s.call(l||this,{target:this}):this.on("load",s,l),this},_getMapPanePos:function(){return Nn(this._mapPane)||new G(0,0)},_moved:function(){var s=this._getMapPanePos();return s&&!s.equals([0,0])},_getTopLeftPoint:function(s,l){var h=s&&l!==void 0?this._getNewPixelOrigin(s,l):this.getPixelOrigin();return h.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(s,l){var h=this.getSize()._divideBy(2);return this.project(s,l)._subtract(h)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(s,l,h){var p=this._getNewPixelOrigin(h,l);return this.project(s,l)._subtract(p)},_latLngBoundsToNewLayerBounds:function(s,l,h){var p=this._getNewPixelOrigin(h,l);return we([this.project(s.getSouthWest(),l)._subtract(p),this.project(s.getNorthWest(),l)._subtract(p),this.project(s.getSouthEast(),l)._subtract(p),this.project(s.getNorthEast(),l)._subtract(p)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(s){return this.latLngToLayerPoint(s).subtract(this._getCenterLayerPoint())},_limitCenter:function(s,l,h){if(!h)return s;var p=this.project(s,l),y=this.getSize().divideBy(2),E=new he(p.subtract(y),p.add(y)),V=this._getBoundsOffset(E,h,l);return Math.abs(V.x)<=1&&Math.abs(V.y)<=1?s:this.unproject(p.add(V),l)},_limitOffset:function(s,l){if(!l)return s;var h=this.getPixelBounds(),p=new he(h.min.add(s),h.max.add(s));return s.add(this._getBoundsOffset(p,l))},_getBoundsOffset:function(s,l,h){var p=we(this.project(l.getNorthEast(),h),this.project(l.getSouthWest(),h)),y=p.min.subtract(s.min),E=p.max.subtract(s.max),V=this._rebound(y.x,-E.x),W=this._rebound(y.y,-E.y);return new G(V,W)},_rebound:function(s,l){return s+l>0?Math.round(s-l)/2:Math.max(0,Math.ceil(s))-Math.max(0,Math.floor(l))},_limitZoom:function(s){var l=this.getMinZoom(),h=this.getMaxZoom(),p=se.any3d?this.options.zoomSnap:1;return p&&(s=Math.round(s/p)*p),Math.max(l,Math.min(h,s))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Qe(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(s,l){var h=this._getCenterOffset(s)._trunc();return(l&&l.animate)!==!0&&!this.getSize().contains(h)?!1:(this.panBy(h,l),!0)},_createAnimProxy:function(){var s=this._proxy=be("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(s),this.on("zoomanim",function(l){var h=xs,p=this._proxy.style[h];ur(this._proxy,this.project(l.center,l.zoom),this.getZoomScale(l.zoom,1)),p===this._proxy.style[h]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){He(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var s=this.getCenter(),l=this.getZoom();ur(this._proxy,this.project(s,l),this.getZoomScale(l,1))},_catchTransitionEnd:function(s){this._animatingZoom&&s.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(s,l,h){if(this._animatingZoom)return!0;if(h=h||{},!this._zoomAnimated||h.animate===!1||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold)return!1;var p=this.getZoomScale(l),y=this._getCenterOffset(s)._divideBy(1-1/p);return h.animate!==!0&&!this.getSize().contains(y)?!1:(U(function(){this._moveStart(!0,h.noMoveStart||!1)._animateZoom(s,l,!0)},this),!0)},_animateZoom:function(s,l,h,p){this._mapPane&&(h&&(this._animatingZoom=!0,this._animateToCenter=s,this._animateToZoom=l,ve(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:s,zoom:l,noUpdate:p}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(a(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Qe(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function So(s,l){return new Ie(s,l)}var an=me.extend({options:{position:"topright"},initialize:function(s){R(this,s)},getPosition:function(){return this.options.position},setPosition:function(s){var l=this._map;return l&&l.removeControl(this),this.options.position=s,l&&l.addControl(this),this},getContainer:function(){return this._container},addTo:function(s){this.remove(),this._map=s;var l=this._container=this.onAdd(s),h=this.getPosition(),p=s._controlCorners[h];return ve(l,"leaflet-control"),h.indexOf("bottom")!==-1?p.insertBefore(l,p.firstChild):p.appendChild(l),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(He(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(s){this._map&&s&&s.screenX>0&&s.screenY>0&&this._map.getContainer().focus()}}),Jt=function(s){return new an(s)};Ie.include({addControl:function(s){return s.addTo(this),this},removeControl:function(s){return s.remove(),this},_initControlPos:function(){var s=this._controlCorners={},l="leaflet-",h=this._controlContainer=be("div",l+"control-container",this._container);function p(y,E){var V=l+y+" "+l+E;s[y+E]=be("div",V,h)}p("top","left"),p("top","right"),p("bottom","left"),p("bottom","right")},_clearControlPos:function(){for(var s in this._controlCorners)He(this._controlCorners[s]);He(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var yl=an.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(s,l,h,p){return h<p?-1:p<h?1:0}},initialize:function(s,l,h){R(this,h),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var p in s)this._addLayer(s[p],p);for(p in l)this._addLayer(l[p],p,!0)},onAdd:function(s){this._initLayout(),this._update(),this._map=s,s.on("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(s){return an.prototype.addTo.call(this,s),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(s,l){return this._addLayer(s,l),this._map?this._update():this},addOverlay:function(s,l){return this._addLayer(s,l,!0),this._map?this._update():this},removeLayer:function(s){s.off("add remove",this._onLayerChange,this);var l=this._getLayer(d(s));return l&&this._layers.splice(this._layers.indexOf(l),1),this._map?this._update():this},expand:function(){ve(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var s=this._map.getSize().y-(this._container.offsetTop+50);return s<this._section.clientHeight?(ve(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=s+"px"):Qe(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Qe(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var s="leaflet-control-layers",l=this._container=be("div",s),h=this.options.collapsed;l.setAttribute("aria-haspopup",!0),yi(l),_i(l);var p=this._section=be("section",s+"-list");h&&(this._map.on("click",this.collapse,this),ae(l,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var y=this._layersLink=be("a",s+"-toggle",l);y.href="#",y.title="Layers",y.setAttribute("role","button"),ae(y,{keydown:function(E){E.keyCode===13&&this._expandSafely()},click:function(E){Je(E),this._expandSafely()}},this),h||this.expand(),this._baseLayersList=be("div",s+"-base",p),this._separator=be("div",s+"-separator",p),this._overlaysList=be("div",s+"-overlays",p),l.appendChild(p)},_getLayer:function(s){for(var l=0;l<this._layers.length;l++)if(this._layers[l]&&d(this._layers[l].layer)===s)return this._layers[l]},_addLayer:function(s,l,h){this._map&&s.on("add remove",this._onLayerChange,this),this._layers.push({layer:s,name:l,overlay:h}),this.options.sortLayers&&this._layers.sort(a(function(p,y){return this.options.sortFunction(p.layer,y.layer,p.name,y.name)},this)),this.options.autoZIndex&&s.setZIndex&&(this._lastZIndex++,s.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Ts(this._baseLayersList),Ts(this._overlaysList),this._layerControlInputs=[];var s,l,h,p,y=0;for(h=0;h<this._layers.length;h++)p=this._layers[h],this._addItem(p),l=l||p.overlay,s=s||!p.overlay,y+=p.overlay?0:1;return this.options.hideSingleBase&&(s=s&&y>1,this._baseLayersList.style.display=s?"":"none"),this._separator.style.display=l&&s?"":"none",this},_onLayerChange:function(s){this._handlingClick||this._update();var l=this._getLayer(d(s.target)),h=l.overlay?s.type==="add"?"overlayadd":"overlayremove":s.type==="add"?"baselayerchange":null;h&&this._map.fire(h,l)},_createRadioElement:function(s,l){var h='<input type="radio" class="leaflet-control-layers-selector" name="'+s+'"'+(l?' checked="checked"':"")+"/>",p=document.createElement("div");return p.innerHTML=h,p.firstChild},_addItem:function(s){var l=document.createElement("label"),h=this._map.hasLayer(s.layer),p;s.overlay?(p=document.createElement("input"),p.type="checkbox",p.className="leaflet-control-layers-selector",p.defaultChecked=h):p=this._createRadioElement("leaflet-base-layers_"+d(this),h),this._layerControlInputs.push(p),p.layerId=d(s.layer),ae(p,"click",this._onInputClick,this);var y=document.createElement("span");y.innerHTML=" "+s.name;var E=document.createElement("span");l.appendChild(E),E.appendChild(p),E.appendChild(y);var V=s.overlay?this._overlaysList:this._baseLayersList;return V.appendChild(l),this._checkDisabledLayers(),l},_onInputClick:function(){if(!this._preventClick){var s=this._layerControlInputs,l,h,p=[],y=[];this._handlingClick=!0;for(var E=s.length-1;E>=0;E--)l=s[E],h=this._getLayer(l.layerId).layer,l.checked?p.push(h):l.checked||y.push(h);for(E=0;E<y.length;E++)this._map.hasLayer(y[E])&&this._map.removeLayer(y[E]);for(E=0;E<p.length;E++)this._map.hasLayer(p[E])||this._map.addLayer(p[E]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var s=this._layerControlInputs,l,h,p=this._map.getZoom(),y=s.length-1;y>=0;y--)l=s[y],h=this._getLayer(l.layerId).layer,l.disabled=h.options.minZoom!==void 0&&p<h.options.minZoom||h.options.maxZoom!==void 0&&p>h.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var s=this._section;this._preventClick=!0,ae(s,"click",Je),this.expand();var l=this;setTimeout(function(){Be(s,"click",Je),l._preventClick=!1})}}),Uf=function(s,l,h){return new yl(s,l,h)},Dr=an.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(s){var l="leaflet-control-zoom",h=be("div",l+" leaflet-bar"),p=this.options;return this._zoomInButton=this._createButton(p.zoomInText,p.zoomInTitle,l+"-in",h,this._zoomIn),this._zoomOutButton=this._createButton(p.zoomOutText,p.zoomOutTitle,l+"-out",h,this._zoomOut),this._updateDisabled(),s.on("zoomend zoomlevelschange",this._updateDisabled,this),h},onRemove:function(s){s.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(s){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(s.shiftKey?3:1))},_zoomOut:function(s){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(s.shiftKey?3:1))},_createButton:function(s,l,h,p,y){var E=be("a",h,p);return E.innerHTML=s,E.href="#",E.title=l,E.setAttribute("role","button"),E.setAttribute("aria-label",l),yi(E),ae(E,"click",gn),ae(E,"click",y,this),ae(E,"click",this._refocusOnMap,this),E},_updateDisabled:function(){var s=this._map,l="leaflet-disabled";Qe(this._zoomInButton,l),Qe(this._zoomOutButton,l),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||s._zoom===s.getMinZoom())&&(ve(this._zoomOutButton,l),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||s._zoom===s.getMaxZoom())&&(ve(this._zoomInButton,l),this._zoomInButton.setAttribute("aria-disabled","true"))}});Ie.mergeOptions({zoomControl:!0}),Ie.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Dr,this.addControl(this.zoomControl))});var Ac=function(s){return new Dr(s)},bo=an.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(s){var l="leaflet-control-scale",h=be("div",l),p=this.options;return this._addScales(p,l+"-line",h),s.on(p.updateWhenIdle?"moveend":"move",this._update,this),s.whenReady(this._update,this),h},onRemove:function(s){s.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(s,l,h){s.metric&&(this._mScale=be("div",l,h)),s.imperial&&(this._iScale=be("div",l,h))},_update:function(){var s=this._map,l=s.getSize().y/2,h=s.distance(s.containerPointToLatLng([0,l]),s.containerPointToLatLng([this.options.maxWidth,l]));this._updateScales(h)},_updateScales:function(s){this.options.metric&&s&&this._updateMetric(s),this.options.imperial&&s&&this._updateImperial(s)},_updateMetric:function(s){var l=this._getRoundNum(s),h=l<1e3?l+" m":l/1e3+" km";this._updateScale(this._mScale,h,l/s)},_updateImperial:function(s){var l=s*3.2808399,h,p,y;l>5280?(h=l/5280,p=this._getRoundNum(h),this._updateScale(this._iScale,p+" mi",p/h)):(y=this._getRoundNum(l),this._updateScale(this._iScale,y+" ft",y/l))},_updateScale:function(s,l,h){s.style.width=Math.round(this.options.maxWidth*h)+"px",s.innerHTML=l},_getRoundNum:function(s){var l=Math.pow(10,(Math.floor(s)+"").length-1),h=s/l;return h=h>=10?10:h>=5?5:h>=3?3:h>=2?2:1,l*h}}),Ao=function(s){return new bo(s)},Cc='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',vi=an.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(se.inlineSvg?Cc+" ":"")+"Leaflet</a>"},initialize:function(s){R(this,s),this._attributions={}},onAdd:function(s){s.attributionControl=this,this._container=be("div","leaflet-control-attribution"),yi(this._container);for(var l in s._layers)s._layers[l].getAttribution&&this.addAttribution(s._layers[l].getAttribution());return this._update(),s.on("layeradd",this._addAttribution,this),this._container},onRemove:function(s){s.off("layeradd",this._addAttribution,this)},_addAttribution:function(s){s.layer.getAttribution&&(this.addAttribution(s.layer.getAttribution()),s.layer.once("remove",function(){this.removeAttribution(s.layer.getAttribution())},this))},setPrefix:function(s){return this.options.prefix=s,this._update(),this},addAttribution:function(s){return s?(this._attributions[s]||(this._attributions[s]=0),this._attributions[s]++,this._update(),this):this},removeAttribution:function(s){return s?(this._attributions[s]&&(this._attributions[s]--,this._update()),this):this},_update:function(){if(this._map){var s=[];for(var l in this._attributions)this._attributions[l]&&s.push(l);var h=[];this.options.prefix&&h.push(this.options.prefix),s.length&&h.push(s.join(", ")),this._container.innerHTML=h.join(' <span aria-hidden="true">|</span> ')}}});Ie.mergeOptions({attributionControl:!0}),Ie.addInitHook(function(){this.options.attributionControl&&new vi().addTo(this)});var zf=function(s){return new vi(s)};an.Layers=yl,an.Zoom=Dr,an.Scale=bo,an.Attribution=vi,Jt.layers=Uf,Jt.zoom=Ac,Jt.scale=Ao,Jt.attribution=zf;var _n=me.extend({initialize:function(s){this._map=s},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});_n.addTo=function(s,l){return s.addHandler(l,this),this};var ks={Events:vt},vl=se.touch?"touchstart mousedown":"mousedown",Zn=Xt.extend({options:{clickTolerance:3},initialize:function(s,l,h,p){R(this,p),this._element=s,this._dragStartTarget=l||s,this._preventOutline=h},enable:function(){this._enabled||(ae(this._dragStartTarget,vl,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Zn._dragging===this&&this.finishDrag(!0),Be(this._dragStartTarget,vl,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(s){if(this._enabled&&(this._moved=!1,!ol(this._element,"leaflet-zoom-anim"))){if(s.touches&&s.touches.length!==1){Zn._dragging===this&&this.finishDrag();return}if(!(Zn._dragging||s.shiftKey||s.which!==1&&s.button!==1&&!s.touches)&&(Zn._dragging=this,this._preventOutline&&Or(this._element),ul(),Kn(),!this._moving)){this.fire("down");var l=s.touches?s.touches[0]:s,h=dl(this._element);this._startPoint=new G(l.clientX,l.clientY),this._startPos=Nn(this._element),this._parentScale=Io(h);var p=s.type==="mousedown";ae(document,p?"mousemove":"touchmove",this._onMove,this),ae(document,p?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(s){if(this._enabled){if(s.touches&&s.touches.length>1){this._moved=!0;return}var l=s.touches&&s.touches.length===1?s.touches[0]:s,h=new G(l.clientX,l.clientY)._subtract(this._startPoint);!h.x&&!h.y||Math.abs(h.x)+Math.abs(h.y)<this.options.clickTolerance||(h.x/=this._parentScale.x,h.y/=this._parentScale.y,Je(s),this._moved||(this.fire("dragstart"),this._moved=!0,ve(document.body,"leaflet-dragging"),this._lastTarget=s.target||s.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ve(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(h),this._moving=!0,this._lastEvent=s,this._updatePosition())}},_updatePosition:function(){var s={originalEvent:this._lastEvent};this.fire("predrag",s),de(this._element,this._newPos),this.fire("drag",s)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(s){Qe(document.body,"leaflet-dragging"),this._lastTarget&&(Qe(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Be(document,"mousemove touchmove",this._onMove,this),Be(document,"mouseup touchend touchcancel",this._onUp,this),cl(),Gn();var l=this._moved&&this._moving;this._moving=!1,Zn._dragging=!1,l&&this.fire("dragend",{noInertia:s,distance:this._newPos.distanceTo(this._startPos)})}});function Co(s,l,h){var p,y=[1,4,2,8],E,V,W,H,Q,te,le,ke;for(E=0,te=s.length;E<te;E++)s[E]._code=cr(s[E],l);for(W=0;W<4;W++){for(le=y[W],p=[],E=0,te=s.length,V=te-1;E<te;V=E++)H=s[E],Q=s[V],H._code&le?Q._code&le||(ke=Pt(Q,H,le,l,h),ke._code=cr(ke,l),p.push(ke)):(Q._code&le&&(ke=Pt(Q,H,le,l,h),ke._code=cr(ke,l),p.push(ke)),p.push(H));s=p}return s}function No(s,l){var h,p,y,E,V,W,H,Q,te;if(!s||s.length===0)throw new Error("latlngs not passed");u(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var le=pe([0,0]),ke=De(s),en=ke.getNorthWest().distanceTo(ke.getSouthWest())*ke.getNorthEast().distanceTo(ke.getNorthWest());en<1700&&(le=Ro(s));var St=s.length,Dn=[];for(h=0;h<St;h++){var ln=pe(s[h]);Dn.push(l.project(pe([ln.lat-le.lat,ln.lng-le.lng])))}for(W=H=Q=0,h=0,p=St-1;h<St;p=h++)y=Dn[h],E=Dn[p],V=y.y*E.x-E.y*y.x,H+=(y.x+E.x)*V,Q+=(y.y+E.y)*V,W+=V*3;W===0?te=Dn[0]:te=[H/W,Q/W];var Fo=l.unproject(J(te));return pe([Fo.lat+le.lat,Fo.lng+le.lng])}function Ro(s){for(var l=0,h=0,p=0,y=0;y<s.length;y++){var E=pe(s[y]);l+=E.lat,h+=E.lng,p++}return pe([l/p,h/p])}var Lo={__proto__:null,clipPolygon:Co,polygonCenter:No,centroid:Ro};function wl(s,l){if(!l||!s.length)return s.slice();var h=l*l;return s=Rc(s,h),s=Nc(s,h),s}function xl(s,l,h){return Math.sqrt(On(s,l,h,!0))}function jr(s,l,h){return On(s,l,h)}function Nc(s,l){var h=s.length,p=typeof Uint8Array<"u"?Uint8Array:Array,y=new p(h);y[0]=y[h-1]=1,Mo(s,y,l,0,h-1);var E,V=[];for(E=0;E<h;E++)y[E]&&V.push(s[E]);return V}function Mo(s,l,h,p,y){var E=0,V,W,H;for(W=p+1;W<=y-1;W++)H=On(s[W],s[p],s[y],!0),H>E&&(V=W,E=H);E>h&&(l[V]=1,Mo(s,l,h,p,V),Mo(s,l,h,V,y))}function Rc(s,l){for(var h=[s[0]],p=1,y=0,E=s.length;p<E;p++)Lc(s[p],s[y])>l&&(h.push(s[p]),y=p);return y<E-1&&h.push(s[E-1]),h}var El;function Is(s,l,h,p,y){var E=p?El:cr(s,h),V=cr(l,h),W,H,Q;for(El=V;;){if(!(E|V))return[s,l];if(E&V)return!1;W=E||V,H=Pt(s,l,W,h,y),Q=cr(H,h),W===E?(s=H,E=Q):(l=H,V=Q)}}function Pt(s,l,h,p,y){var E=l.x-s.x,V=l.y-s.y,W=p.min,H=p.max,Q,te;return h&8?(Q=s.x+E*(H.y-s.y)/V,te=H.y):h&4?(Q=s.x+E*(W.y-s.y)/V,te=W.y):h&2?(Q=H.x,te=s.y+V*(H.x-s.x)/E):h&1&&(Q=W.x,te=s.y+V*(W.x-s.x)/E),new G(Q,te,y)}function cr(s,l){var h=0;return s.x<l.min.x?h|=1:s.x>l.max.x&&(h|=2),s.y<l.min.y?h|=4:s.y>l.max.y&&(h|=8),h}function Lc(s,l){var h=l.x-s.x,p=l.y-s.y;return h*h+p*p}function On(s,l,h,p){var y=l.x,E=l.y,V=h.x-y,W=h.y-E,H=V*V+W*W,Q;return H>0&&(Q=((s.x-y)*V+(s.y-E)*W)/H,Q>1?(y=h.x,E=h.y):Q>0&&(y+=V*Q,E+=W*Q)),V=s.x-y,W=s.y-E,p?V*V+W*W:new G(y,E)}function u(s){return!P(s[0])||typeof s[0][0]!="object"&&typeof s[0][0]<"u"}function g(s){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),u(s)}function w(s,l){var h,p,y,E,V,W,H,Q;if(!s||s.length===0)throw new Error("latlngs not passed");u(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var te=pe([0,0]),le=De(s),ke=le.getNorthWest().distanceTo(le.getSouthWest())*le.getNorthEast().distanceTo(le.getNorthWest());ke<1700&&(te=Ro(s));var en=s.length,St=[];for(h=0;h<en;h++){var Dn=pe(s[h]);St.push(l.project(pe([Dn.lat-te.lat,Dn.lng-te.lng])))}for(h=0,p=0;h<en-1;h++)p+=St[h].distanceTo(St[h+1])/2;if(p===0)Q=St[0];else for(h=0,E=0;h<en-1;h++)if(V=St[h],W=St[h+1],y=V.distanceTo(W),E+=y,E>p){H=(E-p)/y,Q=[W.x-H*(W.x-V.x),W.y-H*(W.y-V.y)];break}var ln=l.unproject(J(Q));return pe([ln.lat+te.lat,ln.lng+te.lng])}var I={__proto__:null,simplify:wl,pointToSegmentDistance:xl,closestPointOnSegment:jr,clipSegment:Is,_getEdgeIntersection:Pt,_getBitCode:cr,_sqClosestPointOnSegment:On,isFlat:u,_flat:g,polylineCenter:w},B={project:function(s){return new G(s.lng,s.lat)},unproject:function(s){return new Te(s.y,s.x)},bounds:new he([-180,-90],[180,90])},q={R:6378137,R_MINOR:6356752314245179e-9,bounds:new he([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(s){var l=Math.PI/180,h=this.R,p=s.lat*l,y=this.R_MINOR/h,E=Math.sqrt(1-y*y),V=E*Math.sin(p),W=Math.tan(Math.PI/4-p/2)/Math.pow((1-V)/(1+V),E/2);return p=-h*Math.log(Math.max(W,1e-10)),new G(s.lng*l*h,p)},unproject:function(s){for(var l=180/Math.PI,h=this.R,p=this.R_MINOR/h,y=Math.sqrt(1-p*p),E=Math.exp(-s.y/h),V=Math.PI/2-2*Math.atan(E),W=0,H=.1,Q;W<15&&Math.abs(H)>1e-7;W++)Q=y*Math.sin(V),Q=Math.pow((1-Q)/(1+Q),y/2),H=Math.PI/2-2*Math.atan(E*Q)-V,V+=H;return new Te(V*l,s.x*l/h)}},ee={__proto__:null,LonLat:B,Mercator:q,SphericalMercator:hi},je=i({},lr,{code:"EPSG:3395",projection:q,transformation:function(){var s=.5/(Math.PI*q.R);return Ar(s,.5,-s,.5)}()}),mt=i({},lr,{code:"EPSG:4326",projection:B,transformation:Ar(1/180,1,-1/180,.5)}),Re=i({},wt,{projection:B,transformation:Ar(1,0,-1,0),scale:function(s){return Math.pow(2,s)},zoom:function(s){return Math.log(s)/Math.LN2},distance:function(s,l){var h=l.lng-s.lng,p=l.lat-s.lat;return Math.sqrt(h*h+p*p)},infinite:!0});wt.Earth=lr,wt.EPSG3395=je,wt.EPSG3857=ds,wt.EPSG900913=$a,wt.EPSG4326=mt,wt.Simple=Re;var We=Xt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(s){return s.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(s){return s&&s.removeLayer(this),this},getPane:function(s){return this._map.getPane(s?this.options[s]||s:this.options.pane)},addInteractiveTarget:function(s){return this._map._targets[d(s)]=this,this},removeInteractiveTarget:function(s){return delete this._map._targets[d(s)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(s){var l=s.target;if(l.hasLayer(this)){if(this._map=l,this._zoomAnimated=l._zoomAnimated,this.getEvents){var h=this.getEvents();l.on(h,this),this.once("remove",function(){l.off(h,this)},this)}this.onAdd(l),this.fire("add"),l.fire("layeradd",{layer:this})}}});Ie.include({addLayer:function(s){if(!s._layerAdd)throw new Error("The provided object is not a Layer.");var l=d(s);return this._layers[l]?this:(this._layers[l]=s,s._mapToAdd=this,s.beforeAdd&&s.beforeAdd(this),this.whenReady(s._layerAdd,s),this)},removeLayer:function(s){var l=d(s);return this._layers[l]?(this._loaded&&s.onRemove(this),delete this._layers[l],this._loaded&&(this.fire("layerremove",{layer:s}),s.fire("remove")),s._map=s._mapToAdd=null,this):this},hasLayer:function(s){return d(s)in this._layers},eachLayer:function(s,l){for(var h in this._layers)s.call(l,this._layers[h]);return this},_addLayers:function(s){s=s?P(s)?s:[s]:[];for(var l=0,h=s.length;l<h;l++)this.addLayer(s[l])},_addZoomLimit:function(s){(!isNaN(s.options.maxZoom)||!isNaN(s.options.minZoom))&&(this._zoomBoundLayers[d(s)]=s,this._updateZoomLevels())},_removeZoomLimit:function(s){var l=d(s);this._zoomBoundLayers[l]&&(delete this._zoomBoundLayers[l],this._updateZoomLevels())},_updateZoomLevels:function(){var s=1/0,l=-1/0,h=this._getZoomSpan();for(var p in this._zoomBoundLayers){var y=this._zoomBoundLayers[p].options;s=y.minZoom===void 0?s:Math.min(s,y.minZoom),l=y.maxZoom===void 0?l:Math.max(l,y.maxZoom)}this._layersMaxZoom=l===-1/0?void 0:l,this._layersMinZoom=s===1/0?void 0:s,h!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var et=We.extend({initialize:function(s,l){R(this,l),this._layers={};var h,p;if(s)for(h=0,p=s.length;h<p;h++)this.addLayer(s[h])},addLayer:function(s){var l=this.getLayerId(s);return this._layers[l]=s,this._map&&this._map.addLayer(s),this},removeLayer:function(s){var l=s in this._layers?s:this.getLayerId(s);return this._map&&this._layers[l]&&this._map.removeLayer(this._layers[l]),delete this._layers[l],this},hasLayer:function(s){var l=typeof s=="number"?s:this.getLayerId(s);return l in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(s){var l=Array.prototype.slice.call(arguments,1),h,p;for(h in this._layers)p=this._layers[h],p[s]&&p[s].apply(p,l);return this},onAdd:function(s){this.eachLayer(s.addLayer,s)},onRemove:function(s){this.eachLayer(s.removeLayer,s)},eachLayer:function(s,l){for(var h in this._layers)s.call(l,this._layers[h]);return this},getLayer:function(s){return this._layers[s]},getLayers:function(){var s=[];return this.eachLayer(s.push,s),s},setZIndex:function(s){return this.invoke("setZIndex",s)},getLayerId:function(s){return d(s)}}),wi=function(s,l){return new et(s,l)},ct=et.extend({addLayer:function(s){return this.hasLayer(s)?this:(s.addEventParent(this),et.prototype.addLayer.call(this,s),this.fire("layeradd",{layer:s}))},removeLayer:function(s){return this.hasLayer(s)?(s in this._layers&&(s=this._layers[s]),s.removeEventParent(this),et.prototype.removeLayer.call(this,s),this.fire("layerremove",{layer:s})):this},setStyle:function(s){return this.invoke("setStyle",s)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var s=new Se;for(var l in this._layers){var h=this._layers[l];s.extend(h.getBounds?h.getBounds():h.getLatLng())}return s}}),Oo=function(s,l){return new ct(s,l)},hr=me.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(s){R(this,s)},createIcon:function(s){return this._createIcon("icon",s)},createShadow:function(s){return this._createIcon("shadow",s)},_createIcon:function(s,l){var h=this._getIconUrl(s);if(!h){if(s==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var p=this._createImg(h,l&&l.tagName==="IMG"?l:null);return this._setIconStyles(p,s),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),p},_setIconStyles:function(s,l){var h=this.options,p=h[l+"Size"];typeof p=="number"&&(p=[p,p]);var y=J(p),E=J(l==="shadow"&&h.shadowAnchor||h.iconAnchor||y&&y.divideBy(2,!0));s.className="leaflet-marker-"+l+" "+(h.className||""),E&&(s.style.marginLeft=-E.x+"px",s.style.marginTop=-E.y+"px"),y&&(s.style.width=y.x+"px",s.style.height=y.y+"px")},_createImg:function(s,l){return l=l||document.createElement("img"),l.src=s,l},_getIconUrl:function(s){return se.retina&&this.options[s+"RetinaUrl"]||this.options[s+"Url"]}});function O1(s){return new hr(s)}var Tl=hr.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(s){return typeof Tl.imagePath!="string"&&(Tl.imagePath=this._detectIconPath()),(this.options.imagePath||Tl.imagePath)+hr.prototype._getIconUrl.call(this,s)},_stripUrl:function(s){var l=function(h,p,y){var E=p.exec(h);return E&&E[y]};return s=l(s,/^url\((['"])?(.+)\1\)$/,2),s&&l(s,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var s=be("div","leaflet-default-icon-path",document.body),l=mi(s,"background-image")||mi(s,"backgroundImage");if(document.body.removeChild(s),l=this._stripUrl(l),l)return l;var h=document.querySelector('link[href$="leaflet.css"]');return h?h.href.substring(0,h.href.length-11-1):""}}),Ty=_n.extend({initialize:function(s){this._marker=s},addHooks:function(){var s=this._marker._icon;this._draggable||(this._draggable=new Zn(s,s,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ve(s,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Qe(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(s){var l=this._marker,h=l._map,p=this._marker.options.autoPanSpeed,y=this._marker.options.autoPanPadding,E=Nn(l._icon),V=h.getPixelBounds(),W=h.getPixelOrigin(),H=we(V.min._subtract(W).add(y),V.max._subtract(W).subtract(y));if(!H.contains(E)){var Q=J((Math.max(H.max.x,E.x)-H.max.x)/(V.max.x-H.max.x)-(Math.min(H.min.x,E.x)-H.min.x)/(V.min.x-H.min.x),(Math.max(H.max.y,E.y)-H.max.y)/(V.max.y-H.max.y)-(Math.min(H.min.y,E.y)-H.min.y)/(V.min.y-H.min.y)).multiplyBy(p);h.panBy(Q,{animate:!1}),this._draggable._newPos._add(Q),this._draggable._startPos._add(Q),de(l._icon,this._draggable._newPos),this._onDrag(s),this._panRequest=U(this._adjustPan.bind(this,s))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(s){this._marker.options.autoPan&&(M(this._panRequest),this._panRequest=U(this._adjustPan.bind(this,s)))},_onDrag:function(s){var l=this._marker,h=l._shadow,p=Nn(l._icon),y=l._map.layerPointToLatLng(p);h&&de(h,p),l._latlng=y,s.latlng=y,s.oldLatLng=this._oldLatLng,l.fire("move",s).fire("drag",s)},_onDragEnd:function(s){M(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",s)}}),Mc=We.extend({options:{icon:new Tl,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(s,l){R(this,l),this._latlng=pe(s)},onAdd:function(s){this._zoomAnimated=this._zoomAnimated&&s.options.markerZoomAnimation,this._zoomAnimated&&s.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(s){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&s.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(s){var l=this._latlng;return this._latlng=pe(s),this.update(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},setZIndexOffset:function(s){return this.options.zIndexOffset=s,this.update()},getIcon:function(){return this.options.icon},setIcon:function(s){return this.options.icon=s,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var s=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(s)}return this},_initIcon:function(){var s=this.options,l="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),h=s.icon.createIcon(this._icon),p=!1;h!==this._icon&&(this._icon&&this._removeIcon(),p=!0,s.title&&(h.title=s.title),h.tagName==="IMG"&&(h.alt=s.alt||"")),ve(h,l),s.keyboard&&(h.tabIndex="0",h.setAttribute("role","button")),this._icon=h,s.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ae(h,"focus",this._panOnFocus,this);var y=s.icon.createShadow(this._shadow),E=!1;y!==this._shadow&&(this._removeShadow(),E=!0),y&&(ve(y,l),y.alt=""),this._shadow=y,s.opacity<1&&this._updateOpacity(),p&&this.getPane().appendChild(this._icon),this._initInteraction(),y&&E&&this.getPane(s.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Be(this._icon,"focus",this._panOnFocus,this),He(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&He(this._shadow),this._shadow=null},_setPos:function(s){this._icon&&de(this._icon,s),this._shadow&&de(this._shadow,s),this._zIndex=s.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(s){this._icon&&(this._icon.style.zIndex=this._zIndex+s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round();this._setPos(l)},_initInteraction:function(){if(this.options.interactive&&(ve(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Ty)){var s=this.options.draggable;this.dragging&&(s=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Ty(this),s&&this.dragging.enable()}},setOpacity:function(s){return this.options.opacity=s,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var s=this.options.opacity;this._icon&&ot(this._icon,s),this._shadow&&ot(this._shadow,s)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var s=this._map;if(s){var l=this.options.icon.options,h=l.iconSize?J(l.iconSize):J(0,0),p=l.iconAnchor?J(l.iconAnchor):J(0,0);s.panInside(this._latlng,{paddingTopLeft:p,paddingBottomRight:h.subtract(p)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function D1(s,l){return new Mc(s,l)}var xi=We.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(s){this._renderer=s.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(s){return R(this,s),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&s&&Object.prototype.hasOwnProperty.call(s,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Oc=xi.extend({options:{fill:!0,radius:10},initialize:function(s,l){R(this,l),this._latlng=pe(s),this._radius=this.options.radius},setLatLng:function(s){var l=this._latlng;return this._latlng=pe(s),this.redraw(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(s){return this.options.radius=this._radius=s,this.redraw()},getRadius:function(){return this._radius},setStyle:function(s){var l=s&&s.radius||this._radius;return xi.prototype.setStyle.call(this,s),this.setRadius(l),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var s=this._radius,l=this._radiusY||s,h=this._clickTolerance(),p=[s+h,l+h];this._pxBounds=new he(this._point.subtract(p),this._point.add(p))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(s){return s.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function j1(s,l){return new Oc(s,l)}var Bf=Oc.extend({initialize:function(s,l,h){if(typeof l=="number"&&(l=i({},h,{radius:l})),R(this,l),this._latlng=pe(s),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(s){return this._mRadius=s,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var s=[this._radius,this._radiusY||this._radius];return new Se(this._map.layerPointToLatLng(this._point.subtract(s)),this._map.layerPointToLatLng(this._point.add(s)))},setStyle:xi.prototype.setStyle,_project:function(){var s=this._latlng.lng,l=this._latlng.lat,h=this._map,p=h.options.crs;if(p.distance===lr.distance){var y=Math.PI/180,E=this._mRadius/lr.R/y,V=h.project([l+E,s]),W=h.project([l-E,s]),H=V.add(W).divideBy(2),Q=h.unproject(H).lat,te=Math.acos((Math.cos(E*y)-Math.sin(l*y)*Math.sin(Q*y))/(Math.cos(l*y)*Math.cos(Q*y)))/y;(isNaN(te)||te===0)&&(te=E/Math.cos(Math.PI/180*l)),this._point=H.subtract(h.getPixelOrigin()),this._radius=isNaN(te)?0:H.x-h.project([Q,s-te]).x,this._radiusY=H.y-V.y}else{var le=p.unproject(p.project(this._latlng).subtract([this._mRadius,0]));this._point=h.latLngToLayerPoint(this._latlng),this._radius=this._point.x-h.latLngToLayerPoint(le).x}this._updateBounds()}});function V1(s,l,h){return new Bf(s,l,h)}var Vr=xi.extend({options:{smoothFactor:1,noClip:!1},initialize:function(s,l){R(this,l),this._setLatLngs(s)},getLatLngs:function(){return this._latlngs},setLatLngs:function(s){return this._setLatLngs(s),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(s){for(var l=1/0,h=null,p=On,y,E,V=0,W=this._parts.length;V<W;V++)for(var H=this._parts[V],Q=1,te=H.length;Q<te;Q++){y=H[Q-1],E=H[Q];var le=p(s,y,E,!0);le<l&&(l=le,h=p(s,y,E))}return h&&(h.distance=Math.sqrt(l)),h},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return w(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(s,l){return l=l||this._defaultShape(),s=pe(s),l.push(s),this._bounds.extend(s),this.redraw()},_setLatLngs:function(s){this._bounds=new Se,this._latlngs=this._convertLatLngs(s)},_defaultShape:function(){return u(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(s){for(var l=[],h=u(s),p=0,y=s.length;p<y;p++)h?(l[p]=pe(s[p]),this._bounds.extend(l[p])):l[p]=this._convertLatLngs(s[p]);return l},_project:function(){var s=new he;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,s),this._bounds.isValid()&&s.isValid()&&(this._rawPxBounds=s,this._updateBounds())},_updateBounds:function(){var s=this._clickTolerance(),l=new G(s,s);this._rawPxBounds&&(this._pxBounds=new he([this._rawPxBounds.min.subtract(l),this._rawPxBounds.max.add(l)]))},_projectLatlngs:function(s,l,h){var p=s[0]instanceof Te,y=s.length,E,V;if(p){for(V=[],E=0;E<y;E++)V[E]=this._map.latLngToLayerPoint(s[E]),h.extend(V[E]);l.push(V)}else for(E=0;E<y;E++)this._projectLatlngs(s[E],l,h)},_clipPoints:function(){var s=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}var l=this._parts,h,p,y,E,V,W,H;for(h=0,y=0,E=this._rings.length;h<E;h++)for(H=this._rings[h],p=0,V=H.length;p<V-1;p++)W=Is(H[p],H[p+1],s,p,!0),W&&(l[y]=l[y]||[],l[y].push(W[0]),(W[1]!==H[p+1]||p===V-2)&&(l[y].push(W[1]),y++))}},_simplifyPoints:function(){for(var s=this._parts,l=this.options.smoothFactor,h=0,p=s.length;h<p;h++)s[h]=wl(s[h],l)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(s,l){var h,p,y,E,V,W,H=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(h=0,E=this._parts.length;h<E;h++)for(W=this._parts[h],p=0,V=W.length,y=V-1;p<V;y=p++)if(!(!l&&p===0)&&xl(s,W[y],W[p])<=H)return!0;return!1}});function F1(s,l){return new Vr(s,l)}Vr._flat=g;var Do=Vr.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return No(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(s){var l=Vr.prototype._convertLatLngs.call(this,s),h=l.length;return h>=2&&l[0]instanceof Te&&l[0].equals(l[h-1])&&l.pop(),l},_setLatLngs:function(s){Vr.prototype._setLatLngs.call(this,s),u(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return u(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var s=this._renderer._bounds,l=this.options.weight,h=new G(l,l);if(s=new he(s.min.subtract(h),s.max.add(h)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}for(var p=0,y=this._rings.length,E;p<y;p++)E=Co(this._rings[p],s,!0),E.length&&this._parts.push(E)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(s){var l=!1,h,p,y,E,V,W,H,Q;if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(E=0,H=this._parts.length;E<H;E++)for(h=this._parts[E],V=0,Q=h.length,W=Q-1;V<Q;W=V++)p=h[V],y=h[W],p.y>s.y!=y.y>s.y&&s.x<(y.x-p.x)*(s.y-p.y)/(y.y-p.y)+p.x&&(l=!l);return l||Vr.prototype._containsPoint.call(this,s,!0)}});function U1(s,l){return new Do(s,l)}var Fr=ct.extend({initialize:function(s,l){R(this,l),this._layers={},s&&this.addData(s)},addData:function(s){var l=P(s)?s:s.features,h,p,y;if(l){for(h=0,p=l.length;h<p;h++)y=l[h],(y.geometries||y.geometry||y.features||y.coordinates)&&this.addData(y);return this}var E=this.options;if(E.filter&&!E.filter(s))return this;var V=Dc(s,E);return V?(V.feature=Fc(s),V.defaultOptions=V.options,this.resetStyle(V),E.onEachFeature&&E.onEachFeature(s,V),this.addLayer(V)):this},resetStyle:function(s){return s===void 0?this.eachLayer(this.resetStyle,this):(s.options=i({},s.defaultOptions),this._setLayerStyle(s,this.options.style),this)},setStyle:function(s){return this.eachLayer(function(l){this._setLayerStyle(l,s)},this)},_setLayerStyle:function(s,l){s.setStyle&&(typeof l=="function"&&(l=l(s.feature)),s.setStyle(l))}});function Dc(s,l){var h=s.type==="Feature"?s.geometry:s,p=h?h.coordinates:null,y=[],E=l&&l.pointToLayer,V=l&&l.coordsToLatLng||Wf,W,H,Q,te;if(!p&&!h)return null;switch(h.type){case"Point":return W=V(p),ky(E,s,W,l);case"MultiPoint":for(Q=0,te=p.length;Q<te;Q++)W=V(p[Q]),y.push(ky(E,s,W,l));return new ct(y);case"LineString":case"MultiLineString":return H=jc(p,h.type==="LineString"?0:1,V),new Vr(H,l);case"Polygon":case"MultiPolygon":return H=jc(p,h.type==="Polygon"?1:2,V),new Do(H,l);case"GeometryCollection":for(Q=0,te=h.geometries.length;Q<te;Q++){var le=Dc({geometry:h.geometries[Q],type:"Feature",properties:s.properties},l);le&&y.push(le)}return new ct(y);case"FeatureCollection":for(Q=0,te=h.features.length;Q<te;Q++){var ke=Dc(h.features[Q],l);ke&&y.push(ke)}return new ct(y);default:throw new Error("Invalid GeoJSON object.")}}function ky(s,l,h,p){return s?s(l,h):new Mc(h,p&&p.markersInheritOptions&&p)}function Wf(s){return new Te(s[1],s[0],s[2])}function jc(s,l,h){for(var p=[],y=0,E=s.length,V;y<E;y++)V=l?jc(s[y],l-1,h):(h||Wf)(s[y]),p.push(V);return p}function Hf(s,l){return s=pe(s),s.alt!==void 0?[x(s.lng,l),x(s.lat,l),x(s.alt,l)]:[x(s.lng,l),x(s.lat,l)]}function Vc(s,l,h,p){for(var y=[],E=0,V=s.length;E<V;E++)y.push(l?Vc(s[E],u(s[E])?0:l-1,h,p):Hf(s[E],p));return!l&&h&&y.length>0&&y.push(y[0].slice()),y}function jo(s,l){return s.feature?i({},s.feature,{geometry:l}):Fc(l)}function Fc(s){return s.type==="Feature"||s.type==="FeatureCollection"?s:{type:"Feature",properties:{},geometry:s}}var $f={toGeoJSON:function(s){return jo(this,{type:"Point",coordinates:Hf(this.getLatLng(),s)})}};Mc.include($f),Bf.include($f),Oc.include($f),Vr.include({toGeoJSON:function(s){var l=!u(this._latlngs),h=Vc(this._latlngs,l?1:0,!1,s);return jo(this,{type:(l?"Multi":"")+"LineString",coordinates:h})}}),Do.include({toGeoJSON:function(s){var l=!u(this._latlngs),h=l&&!u(this._latlngs[0]),p=Vc(this._latlngs,h?2:l?1:0,!0,s);return l||(p=[p]),jo(this,{type:(h?"Multi":"")+"Polygon",coordinates:p})}}),et.include({toMultiPoint:function(s){var l=[];return this.eachLayer(function(h){l.push(h.toGeoJSON(s).geometry.coordinates)}),jo(this,{type:"MultiPoint",coordinates:l})},toGeoJSON:function(s){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(l==="MultiPoint")return this.toMultiPoint(s);var h=l==="GeometryCollection",p=[];return this.eachLayer(function(y){if(y.toGeoJSON){var E=y.toGeoJSON(s);if(h)p.push(E.geometry);else{var V=Fc(E);V.type==="FeatureCollection"?p.push.apply(p,V.features):p.push(V)}}}),h?jo(this,{geometries:p,type:"GeometryCollection"}):{type:"FeatureCollection",features:p}}});function Iy(s,l){return new Fr(s,l)}var z1=Iy,Uc=We.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(s,l,h){this._url=s,this._bounds=De(l),R(this,h)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ve(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){He(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(s){return this.options.opacity=s,this._image&&this._updateOpacity(),this},setStyle:function(s){return s.opacity&&this.setOpacity(s.opacity),this},bringToFront:function(){return this._map&&Lr(this._image),this},bringToBack:function(){return this._map&&pi(this._image),this},setUrl:function(s){return this._url=s,this._image&&(this._image.src=s),this},setBounds:function(s){return this._bounds=De(s),this._map&&this._reset(),this},getEvents:function(){var s={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var s=this._url.tagName==="IMG",l=this._image=s?this._url:be("img");if(ve(l,"leaflet-image-layer"),this._zoomAnimated&&ve(l,"leaflet-zoom-animated"),this.options.className&&ve(l,this.options.className),l.onselectstart=v,l.onmousemove=v,l.onload=a(this.fire,this,"load"),l.onerror=a(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),s){this._url=l.src;return}l.src=this._url,l.alt=this.options.alt},_animateZoom:function(s){var l=this._map.getZoomScale(s.zoom),h=this._map._latLngBoundsToNewLayerBounds(this._bounds,s.zoom,s.center).min;ur(this._image,h,l)},_reset:function(){var s=this._image,l=new he(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),h=l.getSize();de(s,l.min),s.style.width=h.x+"px",s.style.height=h.y+"px"},_updateOpacity:function(){ot(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var s=this.options.errorOverlayUrl;s&&this._url!==s&&(this._url=s,this._image.src=s)},getCenter:function(){return this._bounds.getCenter()}}),B1=function(s,l,h){return new Uc(s,l,h)},Py=Uc.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var s=this._url.tagName==="VIDEO",l=this._image=s?this._url:be("video");if(ve(l,"leaflet-image-layer"),this._zoomAnimated&&ve(l,"leaflet-zoom-animated"),this.options.className&&ve(l,this.options.className),l.onselectstart=v,l.onmousemove=v,l.onloadeddata=a(this.fire,this,"load"),s){for(var h=l.getElementsByTagName("source"),p=[],y=0;y<h.length;y++)p.push(h[y].src);this._url=h.length>0?p:[l.src];return}P(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(l.style,"objectFit")&&(l.style.objectFit="fill"),l.autoplay=!!this.options.autoplay,l.loop=!!this.options.loop,l.muted=!!this.options.muted,l.playsInline=!!this.options.playsInline;for(var E=0;E<this._url.length;E++){var V=be("source");V.src=this._url[E],l.appendChild(V)}}});function W1(s,l,h){return new Py(s,l,h)}var Sy=Uc.extend({_initImage:function(){var s=this._image=this._url;ve(s,"leaflet-image-layer"),this._zoomAnimated&&ve(s,"leaflet-zoom-animated"),this.options.className&&ve(s,this.options.className),s.onselectstart=v,s.onmousemove=v}});function H1(s,l,h){return new Sy(s,l,h)}var dr=We.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(s,l){s&&(s instanceof Te||P(s))?(this._latlng=pe(s),R(this,l)):(R(this,s),this._source=l),this.options.content&&(this._content=this.options.content)},openOn:function(s){return s=arguments.length?s:this._source._map,s.hasLayer(this)||s.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(s){return this._map?this.close():(arguments.length?this._source=s:s=this._source,this._prepareOpen(),this.openOn(s._map)),this},onAdd:function(s){this._zoomAnimated=s._zoomAnimated,this._container||this._initLayout(),s._fadeAnimated&&ot(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),s._fadeAnimated&&ot(this._container,1),this.bringToFront(),this.options.interactive&&(ve(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(s){s._fadeAnimated?(ot(this._container,0),this._removeTimeout=setTimeout(a(He,void 0,this._container),200)):He(this._container),this.options.interactive&&(Qe(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(s){return this._latlng=pe(s),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(s){return this._content=s,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var s={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Lr(this._container),this},bringToBack:function(){return this._map&&pi(this._container),this},_prepareOpen:function(s){var l=this._source;if(!l._map)return!1;if(l instanceof ct){l=null;var h=this._source._layers;for(var p in h)if(h[p]._map){l=h[p];break}if(!l)return!1;this._source=l}if(!s)if(l.getCenter)s=l.getCenter();else if(l.getLatLng)s=l.getLatLng();else if(l.getBounds)s=l.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(s),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var s=this._contentNode,l=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof l=="string")s.innerHTML=l;else{for(;s.hasChildNodes();)s.removeChild(s.firstChild);s.appendChild(l)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var s=this._map.latLngToLayerPoint(this._latlng),l=J(this.options.offset),h=this._getAnchor();this._zoomAnimated?de(this._container,s.add(h)):l=l.add(s).add(h);var p=this._containerBottom=-l.y,y=this._containerLeft=-Math.round(this._containerWidth/2)+l.x;this._container.style.bottom=p+"px",this._container.style.left=y+"px"}},_getAnchor:function(){return[0,0]}});Ie.include({_initOverlay:function(s,l,h,p){var y=l;return y instanceof s||(y=new s(p).setContent(l)),h&&y.setLatLng(h),y}}),We.include({_initOverlay:function(s,l,h,p){var y=h;return y instanceof s?(R(y,p),y._source=this):(y=l&&!p?l:new s(p,this),y.setContent(h)),y}});var zc=dr.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(s){return s=arguments.length?s:this._source._map,!s.hasLayer(this)&&s._popup&&s._popup.options.autoClose&&s.removeLayer(s._popup),s._popup=this,dr.prototype.openOn.call(this,s)},onAdd:function(s){dr.prototype.onAdd.call(this,s),s.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof xi||this._source.on("preclick",Mn))},onRemove:function(s){dr.prototype.onRemove.call(this,s),s.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof xi||this._source.off("preclick",Mn))},getEvents:function(){var s=dr.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(s.preclick=this.close),this.options.keepInView&&(s.moveend=this._adjustPan),s},_initLayout:function(){var s="leaflet-popup",l=this._container=be("div",s+" "+(this.options.className||"")+" leaflet-zoom-animated"),h=this._wrapper=be("div",s+"-content-wrapper",l);if(this._contentNode=be("div",s+"-content",h),yi(l),_i(this._contentNode),ae(l,"contextmenu",Mn),this._tipContainer=be("div",s+"-tip-container",l),this._tip=be("div",s+"-tip",this._tipContainer),this.options.closeButton){var p=this._closeButton=be("a",s+"-close-button",l);p.setAttribute("role","button"),p.setAttribute("aria-label","Close popup"),p.href="#close",p.innerHTML='<span aria-hidden="true">&#215;</span>',ae(p,"click",function(y){Je(y),this.close()},this)}},_updateLayout:function(){var s=this._contentNode,l=s.style;l.width="",l.whiteSpace="nowrap";var h=s.offsetWidth;h=Math.min(h,this.options.maxWidth),h=Math.max(h,this.options.minWidth),l.width=h+1+"px",l.whiteSpace="",l.height="";var p=s.offsetHeight,y=this.options.maxHeight,E="leaflet-popup-scrolled";y&&p>y?(l.height=y+"px",ve(s,E)):Qe(s,E),this._containerWidth=this._container.offsetWidth},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center),h=this._getAnchor();de(this._container,l.add(h))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var s=this._map,l=parseInt(mi(this._container,"marginBottom"),10)||0,h=this._container.offsetHeight+l,p=this._containerWidth,y=new G(this._containerLeft,-h-this._containerBottom);y._add(Nn(this._container));var E=s.layerPointToContainerPoint(y),V=J(this.options.autoPanPadding),W=J(this.options.autoPanPaddingTopLeft||V),H=J(this.options.autoPanPaddingBottomRight||V),Q=s.getSize(),te=0,le=0;E.x+p+H.x>Q.x&&(te=E.x+p-Q.x+H.x),E.x-te-W.x<0&&(te=E.x-W.x),E.y+h+H.y>Q.y&&(le=E.y+h-Q.y+H.y),E.y-le-W.y<0&&(le=E.y-W.y),(te||le)&&(this.options.keepInView&&(this._autopanning=!0),s.fire("autopanstart").panBy([te,le]))}},_getAnchor:function(){return J(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),$1=function(s,l){return new zc(s,l)};Ie.mergeOptions({closePopupOnClick:!0}),Ie.include({openPopup:function(s,l,h){return this._initOverlay(zc,s,l,h).openOn(this),this},closePopup:function(s){return s=arguments.length?s:this._popup,s&&s.close(),this}}),We.include({bindPopup:function(s,l){return this._popup=this._initOverlay(zc,this._popup,s,l),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(s){return this._popup&&(this instanceof ct||(this._popup._source=this),this._popup._prepareOpen(s||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(s){return this._popup&&this._popup.setContent(s),this},getPopup:function(){return this._popup},_openPopup:function(s){if(!(!this._popup||!this._map)){gn(s);var l=s.layer||s.target;if(this._popup._source===l&&!(l instanceof xi)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(s.latlng);return}this._popup._source=l,this.openPopup(s.latlng)}},_movePopup:function(s){this._popup.setLatLng(s.latlng)},_onKeyPress:function(s){s.originalEvent.keyCode===13&&this._openPopup(s)}});var Bc=dr.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(s){dr.prototype.onAdd.call(this,s),this.setOpacity(this.options.opacity),s.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(s){dr.prototype.onRemove.call(this,s),s.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var s=dr.prototype.getEvents.call(this);return this.options.permanent||(s.preclick=this.close),s},_initLayout:function(){var s="leaflet-tooltip",l=s+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=be("div",l),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+d(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(s){var l,h,p=this._map,y=this._container,E=p.latLngToContainerPoint(p.getCenter()),V=p.layerPointToContainerPoint(s),W=this.options.direction,H=y.offsetWidth,Q=y.offsetHeight,te=J(this.options.offset),le=this._getAnchor();W==="top"?(l=H/2,h=Q):W==="bottom"?(l=H/2,h=0):W==="center"?(l=H/2,h=Q/2):W==="right"?(l=0,h=Q/2):W==="left"?(l=H,h=Q/2):V.x<E.x?(W="right",l=0,h=Q/2):(W="left",l=H+(te.x+le.x)*2,h=Q/2),s=s.subtract(J(l,h,!0)).add(te).add(le),Qe(y,"leaflet-tooltip-right"),Qe(y,"leaflet-tooltip-left"),Qe(y,"leaflet-tooltip-top"),Qe(y,"leaflet-tooltip-bottom"),ve(y,"leaflet-tooltip-"+W),de(y,s)},_updatePosition:function(){var s=this._map.latLngToLayerPoint(this._latlng);this._setPosition(s)},setOpacity:function(s){this.options.opacity=s,this._container&&ot(this._container,s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center);this._setPosition(l)},_getAnchor:function(){return J(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),q1=function(s,l){return new Bc(s,l)};Ie.include({openTooltip:function(s,l,h){return this._initOverlay(Bc,s,l,h).openOn(this),this},closeTooltip:function(s){return s.close(),this}}),We.include({bindTooltip:function(s,l){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Bc,this._tooltip,s,l),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(s){if(!(!s&&this._tooltipHandlersAdded)){var l=s?"off":"on",h={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?h.add=this._openTooltip:(h.mouseover=this._openTooltip,h.mouseout=this.closeTooltip,h.click=this._openTooltip,this._map?this._addFocusListeners():h.add=this._addFocusListeners),this._tooltip.options.sticky&&(h.mousemove=this._moveTooltip),this[l](h),this._tooltipHandlersAdded=!s}},openTooltip:function(s){return this._tooltip&&(this instanceof ct||(this._tooltip._source=this),this._tooltip._prepareOpen(s)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(s){return this._tooltip&&this._tooltip.setContent(s),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(s){var l=typeof s.getElement=="function"&&s.getElement();l&&(ae(l,"focus",function(){this._tooltip._source=s,this.openTooltip()},this),ae(l,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(s){var l=typeof s.getElement=="function"&&s.getElement();l&&l.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(s){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var l=this;this._map.once("moveend",function(){l._openOnceFlag=!1,l._openTooltip(s)});return}this._tooltip._source=s.layer||s.target,this.openTooltip(this._tooltip.options.sticky?s.latlng:void 0)}},_moveTooltip:function(s){var l=s.latlng,h,p;this._tooltip.options.sticky&&s.originalEvent&&(h=this._map.mouseEventToContainerPoint(s.originalEvent),p=this._map.containerPointToLayerPoint(h),l=this._map.layerPointToLatLng(p)),this._tooltip.setLatLng(l)}});var by=hr.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(s){var l=s&&s.tagName==="DIV"?s:document.createElement("div"),h=this.options;if(h.html instanceof Element?(Ts(l),l.appendChild(h.html)):l.innerHTML=h.html!==!1?h.html:"",h.bgPos){var p=J(h.bgPos);l.style.backgroundPosition=-p.x+"px "+-p.y+"px"}return this._setIconStyles(l,"icon"),l},createShadow:function(){return null}});function K1(s){return new by(s)}hr.Default=Tl;var kl=We.extend({options:{tileSize:256,opacity:1,updateWhenIdle:se.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(s){R(this,s)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(s){s._addZoomLimit(this)},onRemove:function(s){this._removeAllTiles(),He(this._container),s._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Lr(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(pi(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(s){return this.options.opacity=s,this._updateOpacity(),this},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var s=this._clampZoom(this._map.getZoom());s!==this._tileZoom&&(this._tileZoom=s,this._updateLevels()),this._update()}return this},getEvents:function(){var s={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=m(this._onMoveEnd,this.options.updateInterval,this)),s.move=this._onMove),this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof G?s:new G(s,s)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(s){for(var l=this.getPane().children,h=-s(-1/0,1/0),p=0,y=l.length,E;p<y;p++)E=l[p].style.zIndex,l[p]!==this._container&&E&&(h=s(h,+E));isFinite(h)&&(this.options.zIndex=h+s(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!se.ielt9){ot(this._container,this.options.opacity);var s=+new Date,l=!1,h=!1;for(var p in this._tiles){var y=this._tiles[p];if(!(!y.current||!y.loaded)){var E=Math.min(1,(s-y.loaded)/200);ot(y.el,E),E<1?l=!0:(y.active?h=!0:this._onOpaqueTile(y),y.active=!0)}}h&&!this._noPrune&&this._pruneTiles(),l&&(M(this._fadeFrame),this._fadeFrame=U(this._updateOpacity,this))}},_onOpaqueTile:v,_initContainer:function(){this._container||(this._container=be("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var s=this._tileZoom,l=this.options.maxZoom;if(s!==void 0){for(var h in this._levels)h=Number(h),this._levels[h].el.children.length||h===s?(this._levels[h].el.style.zIndex=l-Math.abs(s-h),this._onUpdateLevel(h)):(He(this._levels[h].el),this._removeTilesAtZoom(h),this._onRemoveLevel(h),delete this._levels[h]);var p=this._levels[s],y=this._map;return p||(p=this._levels[s]={},p.el=be("div","leaflet-tile-container leaflet-zoom-animated",this._container),p.el.style.zIndex=l,p.origin=y.project(y.unproject(y.getPixelOrigin()),s).round(),p.zoom=s,this._setZoomTransform(p,y.getCenter(),y.getZoom()),v(p.el.offsetWidth),this._onCreateLevel(p)),this._level=p,p}},_onUpdateLevel:v,_onRemoveLevel:v,_onCreateLevel:v,_pruneTiles:function(){if(this._map){var s,l,h=this._map.getZoom();if(h>this.options.maxZoom||h<this.options.minZoom){this._removeAllTiles();return}for(s in this._tiles)l=this._tiles[s],l.retain=l.current;for(s in this._tiles)if(l=this._tiles[s],l.current&&!l.active){var p=l.coords;this._retainParent(p.x,p.y,p.z,p.z-5)||this._retainChildren(p.x,p.y,p.z,p.z+2)}for(s in this._tiles)this._tiles[s].retain||this._removeTile(s)}},_removeTilesAtZoom:function(s){for(var l in this._tiles)this._tiles[l].coords.z===s&&this._removeTile(l)},_removeAllTiles:function(){for(var s in this._tiles)this._removeTile(s)},_invalidateAll:function(){for(var s in this._levels)He(this._levels[s].el),this._onRemoveLevel(Number(s)),delete this._levels[s];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(s,l,h,p){var y=Math.floor(s/2),E=Math.floor(l/2),V=h-1,W=new G(+y,+E);W.z=+V;var H=this._tileCoordsToKey(W),Q=this._tiles[H];return Q&&Q.active?(Q.retain=!0,!0):(Q&&Q.loaded&&(Q.retain=!0),V>p?this._retainParent(y,E,V,p):!1)},_retainChildren:function(s,l,h,p){for(var y=2*s;y<2*s+2;y++)for(var E=2*l;E<2*l+2;E++){var V=new G(y,E);V.z=h+1;var W=this._tileCoordsToKey(V),H=this._tiles[W];if(H&&H.active){H.retain=!0;continue}else H&&H.loaded&&(H.retain=!0);h+1<p&&this._retainChildren(y,E,h+1,p)}},_resetView:function(s){var l=s&&(s.pinch||s.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),l,l)},_animateZoom:function(s){this._setView(s.center,s.zoom,!0,s.noUpdate)},_clampZoom:function(s){var l=this.options;return l.minNativeZoom!==void 0&&s<l.minNativeZoom?l.minNativeZoom:l.maxNativeZoom!==void 0&&l.maxNativeZoom<s?l.maxNativeZoom:s},_setView:function(s,l,h,p){var y=Math.round(l);this.options.maxZoom!==void 0&&y>this.options.maxZoom||this.options.minZoom!==void 0&&y<this.options.minZoom?y=void 0:y=this._clampZoom(y);var E=this.options.updateWhenZooming&&y!==this._tileZoom;(!p||E)&&(this._tileZoom=y,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),y!==void 0&&this._update(s),h||this._pruneTiles(),this._noPrune=!!h),this._setZoomTransforms(s,l)},_setZoomTransforms:function(s,l){for(var h in this._levels)this._setZoomTransform(this._levels[h],s,l)},_setZoomTransform:function(s,l,h){var p=this._map.getZoomScale(h,s.zoom),y=s.origin.multiplyBy(p).subtract(this._map._getNewPixelOrigin(l,h)).round();se.any3d?ur(s.el,y,p):de(s.el,y)},_resetGrid:function(){var s=this._map,l=s.options.crs,h=this._tileSize=this.getTileSize(),p=this._tileZoom,y=this._map.getPixelWorldBounds(this._tileZoom);y&&(this._globalTileRange=this._pxBoundsToTileRange(y)),this._wrapX=l.wrapLng&&!this.options.noWrap&&[Math.floor(s.project([0,l.wrapLng[0]],p).x/h.x),Math.ceil(s.project([0,l.wrapLng[1]],p).x/h.y)],this._wrapY=l.wrapLat&&!this.options.noWrap&&[Math.floor(s.project([l.wrapLat[0],0],p).y/h.x),Math.ceil(s.project([l.wrapLat[1],0],p).y/h.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(s){var l=this._map,h=l._animatingZoom?Math.max(l._animateToZoom,l.getZoom()):l.getZoom(),p=l.getZoomScale(h,this._tileZoom),y=l.project(s,this._tileZoom).floor(),E=l.getSize().divideBy(p*2);return new he(y.subtract(E),y.add(E))},_update:function(s){var l=this._map;if(l){var h=this._clampZoom(l.getZoom());if(s===void 0&&(s=l.getCenter()),this._tileZoom!==void 0){var p=this._getTiledPixelBounds(s),y=this._pxBoundsToTileRange(p),E=y.getCenter(),V=[],W=this.options.keepBuffer,H=new he(y.getBottomLeft().subtract([W,-W]),y.getTopRight().add([W,-W]));if(!(isFinite(y.min.x)&&isFinite(y.min.y)&&isFinite(y.max.x)&&isFinite(y.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Q in this._tiles){var te=this._tiles[Q].coords;(te.z!==this._tileZoom||!H.contains(new G(te.x,te.y)))&&(this._tiles[Q].current=!1)}if(Math.abs(h-this._tileZoom)>1){this._setView(s,h);return}for(var le=y.min.y;le<=y.max.y;le++)for(var ke=y.min.x;ke<=y.max.x;ke++){var en=new G(ke,le);if(en.z=this._tileZoom,!!this._isValidTile(en)){var St=this._tiles[this._tileCoordsToKey(en)];St?St.current=!0:V.push(en)}}if(V.sort(function(ln,Fo){return ln.distanceTo(E)-Fo.distanceTo(E)}),V.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Dn=document.createDocumentFragment();for(ke=0;ke<V.length;ke++)this._addTile(V[ke],Dn);this._level.el.appendChild(Dn)}}}},_isValidTile:function(s){var l=this._map.options.crs;if(!l.infinite){var h=this._globalTileRange;if(!l.wrapLng&&(s.x<h.min.x||s.x>h.max.x)||!l.wrapLat&&(s.y<h.min.y||s.y>h.max.y))return!1}if(!this.options.bounds)return!0;var p=this._tileCoordsToBounds(s);return De(this.options.bounds).overlaps(p)},_keyToBounds:function(s){return this._tileCoordsToBounds(this._keyToTileCoords(s))},_tileCoordsToNwSe:function(s){var l=this._map,h=this.getTileSize(),p=s.scaleBy(h),y=p.add(h),E=l.unproject(p,s.z),V=l.unproject(y,s.z);return[E,V]},_tileCoordsToBounds:function(s){var l=this._tileCoordsToNwSe(s),h=new Se(l[0],l[1]);return this.options.noWrap||(h=this._map.wrapLatLngBounds(h)),h},_tileCoordsToKey:function(s){return s.x+":"+s.y+":"+s.z},_keyToTileCoords:function(s){var l=s.split(":"),h=new G(+l[0],+l[1]);return h.z=+l[2],h},_removeTile:function(s){var l=this._tiles[s];l&&(He(l.el),delete this._tiles[s],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(s)}))},_initTile:function(s){ve(s,"leaflet-tile");var l=this.getTileSize();s.style.width=l.x+"px",s.style.height=l.y+"px",s.onselectstart=v,s.onmousemove=v,se.ielt9&&this.options.opacity<1&&ot(s,this.options.opacity)},_addTile:function(s,l){var h=this._getTilePos(s),p=this._tileCoordsToKey(s),y=this.createTile(this._wrapCoords(s),a(this._tileReady,this,s));this._initTile(y),this.createTile.length<2&&U(a(this._tileReady,this,s,null,y)),de(y,h),this._tiles[p]={el:y,coords:s,current:!0},l.appendChild(y),this.fire("tileloadstart",{tile:y,coords:s})},_tileReady:function(s,l,h){l&&this.fire("tileerror",{error:l,tile:h,coords:s});var p=this._tileCoordsToKey(s);h=this._tiles[p],h&&(h.loaded=+new Date,this._map._fadeAnimated?(ot(h.el,0),M(this._fadeFrame),this._fadeFrame=U(this._updateOpacity,this)):(h.active=!0,this._pruneTiles()),l||(ve(h.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:h.el,coords:s})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),se.ielt9||!this._map._fadeAnimated?U(this._pruneTiles,this):setTimeout(a(this._pruneTiles,this),250)))},_getTilePos:function(s){return s.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(s){var l=new G(this._wrapX?_(s.x,this._wrapX):s.x,this._wrapY?_(s.y,this._wrapY):s.y);return l.z=s.z,l},_pxBoundsToTileRange:function(s){var l=this.getTileSize();return new he(s.min.unscaleBy(l).floor(),s.max.unscaleBy(l).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var s in this._tiles)if(!this._tiles[s].loaded)return!1;return!0}});function G1(s){return new kl(s)}var Vo=kl.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(s,l){this._url=s,l=R(this,l),l.detectRetina&&se.retina&&l.maxZoom>0?(l.tileSize=Math.floor(l.tileSize/2),l.zoomReverse?(l.zoomOffset--,l.minZoom=Math.min(l.maxZoom,l.minZoom+1)):(l.zoomOffset++,l.maxZoom=Math.max(l.minZoom,l.maxZoom-1)),l.minZoom=Math.max(0,l.minZoom)):l.zoomReverse?l.minZoom=Math.min(l.maxZoom,l.minZoom):l.maxZoom=Math.max(l.minZoom,l.maxZoom),typeof l.subdomains=="string"&&(l.subdomains=l.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(s,l){return this._url===s&&l===void 0&&(l=!0),this._url=s,l||this.redraw(),this},createTile:function(s,l){var h=document.createElement("img");return ae(h,"load",a(this._tileOnLoad,this,l,h)),ae(h,"error",a(this._tileOnError,this,l,h)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(h.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(h.referrerPolicy=this.options.referrerPolicy),h.alt="",h.src=this.getTileUrl(s),h},getTileUrl:function(s){var l={r:se.retina?"@2x":"",s:this._getSubdomain(s),x:s.x,y:s.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var h=this._globalTileRange.max.y-s.y;this.options.tms&&(l.y=h),l["-y"]=h}return T(this._url,i(l,this.options))},_tileOnLoad:function(s,l){se.ielt9?setTimeout(a(s,this,null,l),0):s(null,l)},_tileOnError:function(s,l,h){var p=this.options.errorTileUrl;p&&l.getAttribute("src")!==p&&(l.src=p),s(h,l)},_onTileRemove:function(s){s.tile.onload=null},_getZoomForUrl:function(){var s=this._tileZoom,l=this.options.maxZoom,h=this.options.zoomReverse,p=this.options.zoomOffset;return h&&(s=l-s),s+p},_getSubdomain:function(s){var l=Math.abs(s.x+s.y)%this.options.subdomains.length;return this.options.subdomains[l]},_abortLoading:function(){var s,l;for(s in this._tiles)if(this._tiles[s].coords.z!==this._tileZoom&&(l=this._tiles[s].el,l.onload=v,l.onerror=v,!l.complete)){l.src=K;var h=this._tiles[s].coords;He(l),delete this._tiles[s],this.fire("tileabort",{tile:l,coords:h})}},_removeTile:function(s){var l=this._tiles[s];if(l)return l.el.setAttribute("src",K),kl.prototype._removeTile.call(this,s)},_tileReady:function(s,l,h){if(!(!this._map||h&&h.getAttribute("src")===K))return kl.prototype._tileReady.call(this,s,l,h)}});function Ay(s,l){return new Vo(s,l)}var Cy=Vo.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(s,l){this._url=s;var h=i({},this.defaultWmsParams);for(var p in l)p in this.options||(h[p]=l[p]);l=R(this,l);var y=l.detectRetina&&se.retina?2:1,E=this.getTileSize();h.width=E.x*y,h.height=E.y*y,this.wmsParams=h},onAdd:function(s){this._crs=this.options.crs||s.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var l=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[l]=this._crs.code,Vo.prototype.onAdd.call(this,s)},getTileUrl:function(s){var l=this._tileCoordsToNwSe(s),h=this._crs,p=we(h.project(l[0]),h.project(l[1])),y=p.min,E=p.max,V=(this._wmsVersion>=1.3&&this._crs===mt?[y.y,y.x,E.y,E.x]:[y.x,y.y,E.x,E.y]).join(","),W=Vo.prototype.getTileUrl.call(this,s);return W+F(this.wmsParams,W,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+V},setParams:function(s,l){return i(this.wmsParams,s),l||this.redraw(),this}});function Z1(s,l){return new Cy(s,l)}Vo.WMS=Cy,Ay.wms=Z1;var Ur=We.extend({options:{padding:.1},initialize:function(s){R(this,s),d(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),ve(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var s={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(s.zoomanim=this._onAnimZoom),s},_onAnimZoom:function(s){this._updateTransform(s.center,s.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(s,l){var h=this._map.getZoomScale(l,this._zoom),p=this._map.getSize().multiplyBy(.5+this.options.padding),y=this._map.project(this._center,l),E=p.multiplyBy(-h).add(y).subtract(this._map._getNewPixelOrigin(s,l));se.any3d?ur(this._container,E,h):de(this._container,E)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var s in this._layers)this._layers[s]._reset()},_onZoomEnd:function(){for(var s in this._layers)this._layers[s]._project()},_updatePaths:function(){for(var s in this._layers)this._layers[s]._update()},_update:function(){var s=this.options.padding,l=this._map.getSize(),h=this._map.containerPointToLayerPoint(l.multiplyBy(-s)).round();this._bounds=new he(h,h.add(l.multiplyBy(1+s*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Ny=Ur.extend({options:{tolerance:0},getEvents:function(){var s=Ur.prototype.getEvents.call(this);return s.viewprereset=this._onViewPreReset,s},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Ur.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var s=this._container=document.createElement("canvas");ae(s,"mousemove",this._onMouseMove,this),ae(s,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ae(s,"mouseout",this._handleMouseOut,this),s._leaflet_disable_events=!0,this._ctx=s.getContext("2d")},_destroyContainer:function(){M(this._redrawRequest),delete this._ctx,He(this._container),Be(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var s;this._redrawBounds=null;for(var l in this._layers)s=this._layers[l],s._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ur.prototype._update.call(this);var s=this._bounds,l=this._container,h=s.getSize(),p=se.retina?2:1;de(l,s.min),l.width=p*h.x,l.height=p*h.y,l.style.width=h.x+"px",l.style.height=h.y+"px",se.retina&&this._ctx.scale(2,2),this._ctx.translate(-s.min.x,-s.min.y),this.fire("update")}},_reset:function(){Ur.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(s){this._updateDashArray(s),this._layers[d(s)]=s;var l=s._order={layer:s,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=l),this._drawLast=l,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(s){this._requestRedraw(s)},_removePath:function(s){var l=s._order,h=l.next,p=l.prev;h?h.prev=p:this._drawLast=p,p?p.next=h:this._drawFirst=h,delete s._order,delete this._layers[d(s)],this._requestRedraw(s)},_updatePath:function(s){this._extendRedrawBounds(s),s._project(),s._update(),this._requestRedraw(s)},_updateStyle:function(s){this._updateDashArray(s),this._requestRedraw(s)},_updateDashArray:function(s){if(typeof s.options.dashArray=="string"){var l=s.options.dashArray.split(/[, ]+/),h=[],p,y;for(y=0;y<l.length;y++){if(p=Number(l[y]),isNaN(p))return;h.push(p)}s.options._dashArray=h}else s.options._dashArray=s.options.dashArray},_requestRedraw:function(s){this._map&&(this._extendRedrawBounds(s),this._redrawRequest=this._redrawRequest||U(this._redraw,this))},_extendRedrawBounds:function(s){if(s._pxBounds){var l=(s.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new he,this._redrawBounds.extend(s._pxBounds.min.subtract([l,l])),this._redrawBounds.extend(s._pxBounds.max.add([l,l]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var s=this._redrawBounds;if(s){var l=s.getSize();this._ctx.clearRect(s.min.x,s.min.y,l.x,l.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var s,l=this._redrawBounds;if(this._ctx.save(),l){var h=l.getSize();this._ctx.beginPath(),this._ctx.rect(l.min.x,l.min.y,h.x,h.y),this._ctx.clip()}this._drawing=!0;for(var p=this._drawFirst;p;p=p.next)s=p.layer,(!l||s._pxBounds&&s._pxBounds.intersects(l))&&s._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(s,l){if(this._drawing){var h,p,y,E,V=s._parts,W=V.length,H=this._ctx;if(W){for(H.beginPath(),h=0;h<W;h++){for(p=0,y=V[h].length;p<y;p++)E=V[h][p],H[p?"lineTo":"moveTo"](E.x,E.y);l&&H.closePath()}this._fillStroke(H,s)}}},_updateCircle:function(s){if(!(!this._drawing||s._empty())){var l=s._point,h=this._ctx,p=Math.max(Math.round(s._radius),1),y=(Math.max(Math.round(s._radiusY),1)||p)/p;y!==1&&(h.save(),h.scale(1,y)),h.beginPath(),h.arc(l.x,l.y/y,p,0,Math.PI*2,!1),y!==1&&h.restore(),this._fillStroke(h,s)}},_fillStroke:function(s,l){var h=l.options;h.fill&&(s.globalAlpha=h.fillOpacity,s.fillStyle=h.fillColor||h.color,s.fill(h.fillRule||"evenodd")),h.stroke&&h.weight!==0&&(s.setLineDash&&s.setLineDash(l.options&&l.options._dashArray||[]),s.globalAlpha=h.opacity,s.lineWidth=h.weight,s.strokeStyle=h.color,s.lineCap=h.lineCap,s.lineJoin=h.lineJoin,s.stroke())},_onClick:function(s){for(var l=this._map.mouseEventToLayerPoint(s),h,p,y=this._drawFirst;y;y=y.next)h=y.layer,h.options.interactive&&h._containsPoint(l)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(h))&&(p=h);this._fireEvent(p?[p]:!1,s)},_onMouseMove:function(s){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var l=this._map.mouseEventToLayerPoint(s);this._handleMouseHover(s,l)}},_handleMouseOut:function(s){var l=this._hoveredLayer;l&&(Qe(this._container,"leaflet-interactive"),this._fireEvent([l],s,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(s,l){if(!this._mouseHoverThrottled){for(var h,p,y=this._drawFirst;y;y=y.next)h=y.layer,h.options.interactive&&h._containsPoint(l)&&(p=h);p!==this._hoveredLayer&&(this._handleMouseOut(s),p&&(ve(this._container,"leaflet-interactive"),this._fireEvent([p],s,"mouseover"),this._hoveredLayer=p)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,s),this._mouseHoverThrottled=!0,setTimeout(a(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(s,l,h){this._map._fireDOMEvent(l,h||l.type,s)},_bringToFront:function(s){var l=s._order;if(l){var h=l.next,p=l.prev;if(h)h.prev=p;else return;p?p.next=h:h&&(this._drawFirst=h),l.prev=this._drawLast,this._drawLast.next=l,l.next=null,this._drawLast=l,this._requestRedraw(s)}},_bringToBack:function(s){var l=s._order;if(l){var h=l.next,p=l.prev;if(p)p.next=h;else return;h?h.prev=p:p&&(this._drawLast=p),l.prev=null,l.next=this._drawFirst,this._drawFirst.prev=l,this._drawFirst=l,this._requestRedraw(s)}}});function Ry(s){return se.canvas?new Ny(s):null}var Il=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(s){return document.createElement("<lvml:"+s+' class="lvml">')}}catch{}return function(s){return document.createElement("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Q1={_initContainer:function(){this._container=be("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Ur.prototype._update.call(this),this.fire("update"))},_initPath:function(s){var l=s._container=Il("shape");ve(l,"leaflet-vml-shape "+(this.options.className||"")),l.coordsize="1 1",s._path=Il("path"),l.appendChild(s._path),this._updateStyle(s),this._layers[d(s)]=s},_addPath:function(s){var l=s._container;this._container.appendChild(l),s.options.interactive&&s.addInteractiveTarget(l)},_removePath:function(s){var l=s._container;He(l),s.removeInteractiveTarget(l),delete this._layers[d(s)]},_updateStyle:function(s){var l=s._stroke,h=s._fill,p=s.options,y=s._container;y.stroked=!!p.stroke,y.filled=!!p.fill,p.stroke?(l||(l=s._stroke=Il("stroke")),y.appendChild(l),l.weight=p.weight+"px",l.color=p.color,l.opacity=p.opacity,p.dashArray?l.dashStyle=P(p.dashArray)?p.dashArray.join(" "):p.dashArray.replace(/( *, *)/g," "):l.dashStyle="",l.endcap=p.lineCap.replace("butt","flat"),l.joinstyle=p.lineJoin):l&&(y.removeChild(l),s._stroke=null),p.fill?(h||(h=s._fill=Il("fill")),y.appendChild(h),h.color=p.fillColor||p.color,h.opacity=p.fillOpacity):h&&(y.removeChild(h),s._fill=null)},_updateCircle:function(s){var l=s._point.round(),h=Math.round(s._radius),p=Math.round(s._radiusY||h);this._setPath(s,s._empty()?"M0 0":"AL "+l.x+","+l.y+" "+h+","+p+" 0,"+65535*360)},_setPath:function(s,l){s._path.v=l},_bringToFront:function(s){Lr(s._container)},_bringToBack:function(s){pi(s._container)}},Wc=se.vml?Il:lo,Pl=Ur.extend({_initContainer:function(){this._container=Wc("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Wc("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){He(this._container),Be(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ur.prototype._update.call(this);var s=this._bounds,l=s.getSize(),h=this._container;(!this._svgSize||!this._svgSize.equals(l))&&(this._svgSize=l,h.setAttribute("width",l.x),h.setAttribute("height",l.y)),de(h,s.min),h.setAttribute("viewBox",[s.min.x,s.min.y,l.x,l.y].join(" ")),this.fire("update")}},_initPath:function(s){var l=s._path=Wc("path");s.options.className&&ve(l,s.options.className),s.options.interactive&&ve(l,"leaflet-interactive"),this._updateStyle(s),this._layers[d(s)]=s},_addPath:function(s){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(s._path),s.addInteractiveTarget(s._path)},_removePath:function(s){He(s._path),s.removeInteractiveTarget(s._path),delete this._layers[d(s)]},_updatePath:function(s){s._project(),s._update()},_updateStyle:function(s){var l=s._path,h=s.options;l&&(h.stroke?(l.setAttribute("stroke",h.color),l.setAttribute("stroke-opacity",h.opacity),l.setAttribute("stroke-width",h.weight),l.setAttribute("stroke-linecap",h.lineCap),l.setAttribute("stroke-linejoin",h.lineJoin),h.dashArray?l.setAttribute("stroke-dasharray",h.dashArray):l.removeAttribute("stroke-dasharray"),h.dashOffset?l.setAttribute("stroke-dashoffset",h.dashOffset):l.removeAttribute("stroke-dashoffset")):l.setAttribute("stroke","none"),h.fill?(l.setAttribute("fill",h.fillColor||h.color),l.setAttribute("fill-opacity",h.fillOpacity),l.setAttribute("fill-rule",h.fillRule||"evenodd")):l.setAttribute("fill","none"))},_updatePoly:function(s,l){this._setPath(s,qa(s._parts,l))},_updateCircle:function(s){var l=s._point,h=Math.max(Math.round(s._radius),1),p=Math.max(Math.round(s._radiusY),1)||h,y="a"+h+","+p+" 0 1,0 ",E=s._empty()?"M0 0":"M"+(l.x-h)+","+l.y+y+h*2+",0 "+y+-h*2+",0 ";this._setPath(s,E)},_setPath:function(s,l){s._path.setAttribute("d",l)},_bringToFront:function(s){Lr(s._path)},_bringToBack:function(s){pi(s._path)}});se.vml&&Pl.include(Q1);function Ly(s){return se.svg||se.vml?new Pl(s):null}Ie.include({getRenderer:function(s){var l=s.options.renderer||this._getPaneRenderer(s.options.pane)||this.options.renderer||this._renderer;return l||(l=this._renderer=this._createRenderer()),this.hasLayer(l)||this.addLayer(l),l},_getPaneRenderer:function(s){if(s==="overlayPane"||s===void 0)return!1;var l=this._paneRenderers[s];return l===void 0&&(l=this._createRenderer({pane:s}),this._paneRenderers[s]=l),l},_createRenderer:function(s){return this.options.preferCanvas&&Ry(s)||Ly(s)}});var My=Do.extend({initialize:function(s,l){Do.prototype.initialize.call(this,this._boundsToLatLngs(s),l)},setBounds:function(s){return this.setLatLngs(this._boundsToLatLngs(s))},_boundsToLatLngs:function(s){return s=De(s),[s.getSouthWest(),s.getNorthWest(),s.getNorthEast(),s.getSouthEast()]}});function Y1(s,l){return new My(s,l)}Pl.create=Wc,Pl.pointsToPath=qa,Fr.geometryToLayer=Dc,Fr.coordsToLatLng=Wf,Fr.coordsToLatLngs=jc,Fr.latLngToCoords=Hf,Fr.latLngsToCoords=Vc,Fr.getFeature=jo,Fr.asFeature=Fc,Ie.mergeOptions({boxZoom:!0});var Oy=_n.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane,this._resetStateTimeout=0,s.on("unload",this._destroy,this)},addHooks:function(){ae(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Be(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){He(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(s){if(!s.shiftKey||s.which!==1&&s.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Kn(),ul(),this._startPoint=this._map.mouseEventToContainerPoint(s),ae(document,{contextmenu:gn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(s){this._moved||(this._moved=!0,this._box=be("div","leaflet-zoom-box",this._container),ve(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(s);var l=new he(this._point,this._startPoint),h=l.getSize();de(this._box,l.min),this._box.style.width=h.x+"px",this._box.style.height=h.y+"px"},_finish:function(){this._moved&&(He(this._box),Qe(this._container,"leaflet-crosshair")),Gn(),cl(),Be(document,{contextmenu:gn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(s){if(!(s.which!==1&&s.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(a(this._resetState,this),0);var l=new Se(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(l).fire("boxzoomend",{boxZoomBounds:l})}},_onKeyDown:function(s){s.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Ie.addInitHook("addHandler","boxZoom",Oy),Ie.mergeOptions({doubleClickZoom:!0});var Dy=_n.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(s){var l=this._map,h=l.getZoom(),p=l.options.zoomDelta,y=s.originalEvent.shiftKey?h-p:h+p;l.options.doubleClickZoom==="center"?l.setZoom(y):l.setZoomAround(s.containerPoint,y)}});Ie.addInitHook("addHandler","doubleClickZoom",Dy),Ie.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var jy=_n.extend({addHooks:function(){if(!this._draggable){var s=this._map;this._draggable=new Zn(s._mapPane,s._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),s.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),s.on("zoomend",this._onZoomEnd,this),s.whenReady(this._onZoomEnd,this))}ve(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Qe(this._map._container,"leaflet-grab"),Qe(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var s=this._map;if(s._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var l=De(this._map.options.maxBounds);this._offsetLimit=we(this._map.latLngToContainerPoint(l.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(l.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;s.fire("movestart").fire("dragstart"),s.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(s){if(this._map.options.inertia){var l=this._lastTime=+new Date,h=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(h),this._times.push(l),this._prunePositions(l)}this._map.fire("move",s).fire("drag",s)},_prunePositions:function(s){for(;this._positions.length>1&&s-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var s=this._map.getSize().divideBy(2),l=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=l.subtract(s).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(s,l){return s-(s-l)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var s=this._draggable._newPos.subtract(this._draggable._startPos),l=this._offsetLimit;s.x<l.min.x&&(s.x=this._viscousLimit(s.x,l.min.x)),s.y<l.min.y&&(s.y=this._viscousLimit(s.y,l.min.y)),s.x>l.max.x&&(s.x=this._viscousLimit(s.x,l.max.x)),s.y>l.max.y&&(s.y=this._viscousLimit(s.y,l.max.y)),this._draggable._newPos=this._draggable._startPos.add(s)}},_onPreDragWrap:function(){var s=this._worldWidth,l=Math.round(s/2),h=this._initialWorldOffset,p=this._draggable._newPos.x,y=(p-l+h)%s+l-h,E=(p+l+h)%s-l-h,V=Math.abs(y+h)<Math.abs(E+h)?y:E;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=V},_onDragEnd:function(s){var l=this._map,h=l.options,p=!h.inertia||s.noInertia||this._times.length<2;if(l.fire("dragend",s),p)l.fire("moveend");else{this._prunePositions(+new Date);var y=this._lastPos.subtract(this._positions[0]),E=(this._lastTime-this._times[0])/1e3,V=h.easeLinearity,W=y.multiplyBy(V/E),H=W.distanceTo([0,0]),Q=Math.min(h.inertiaMaxSpeed,H),te=W.multiplyBy(Q/H),le=Q/(h.inertiaDeceleration*V),ke=te.multiplyBy(-le/2).round();!ke.x&&!ke.y?l.fire("moveend"):(ke=l._limitOffset(ke,l.options.maxBounds),U(function(){l.panBy(ke,{duration:le,easeLinearity:V,noMoveStart:!0,animate:!0})}))}}});Ie.addInitHook("addHandler","dragging",jy),Ie.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Vy=_n.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(s){this._map=s,this._setPanDelta(s.options.keyboardPanDelta),this._setZoomDelta(s.options.zoomDelta)},addHooks:function(){var s=this._map._container;s.tabIndex<=0&&(s.tabIndex="0"),ae(s,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Be(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var s=document.body,l=document.documentElement,h=s.scrollTop||l.scrollTop,p=s.scrollLeft||l.scrollLeft;this._map._container.focus(),window.scrollTo(p,h)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(s){var l=this._panKeys={},h=this.keyCodes,p,y;for(p=0,y=h.left.length;p<y;p++)l[h.left[p]]=[-1*s,0];for(p=0,y=h.right.length;p<y;p++)l[h.right[p]]=[s,0];for(p=0,y=h.down.length;p<y;p++)l[h.down[p]]=[0,s];for(p=0,y=h.up.length;p<y;p++)l[h.up[p]]=[0,-1*s]},_setZoomDelta:function(s){var l=this._zoomKeys={},h=this.keyCodes,p,y;for(p=0,y=h.zoomIn.length;p<y;p++)l[h.zoomIn[p]]=s;for(p=0,y=h.zoomOut.length;p<y;p++)l[h.zoomOut[p]]=-s},_addHooks:function(){ae(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Be(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){var l=s.keyCode,h=this._map,p;if(l in this._panKeys){if(!h._panAnim||!h._panAnim._inProgress)if(p=this._panKeys[l],s.shiftKey&&(p=J(p).multiplyBy(3)),h.options.maxBounds&&(p=h._limitOffset(J(p),h.options.maxBounds)),h.options.worldCopyJump){var y=h.wrapLatLng(h.unproject(h.project(h.getCenter()).add(p)));h.panTo(y)}else h.panBy(p)}else if(l in this._zoomKeys)h.setZoom(h.getZoom()+(s.shiftKey?3:1)*this._zoomKeys[l]);else if(l===27&&h._popup&&h._popup.options.closeOnEscapeKey)h.closePopup();else return;gn(s)}}});Ie.addInitHook("addHandler","keyboard",Vy),Ie.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Fy=_n.extend({addHooks:function(){ae(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Be(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(s){var l=Sc(s),h=this._map.options.wheelDebounceTime;this._delta+=l,this._lastMousePos=this._map.mouseEventToContainerPoint(s),this._startTime||(this._startTime=+new Date);var p=Math.max(h-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(a(this._performZoom,this),p),gn(s)},_performZoom:function(){var s=this._map,l=s.getZoom(),h=this._map.options.zoomSnap||0;s._stop();var p=this._delta/(this._map.options.wheelPxPerZoomLevel*4),y=4*Math.log(2/(1+Math.exp(-Math.abs(p))))/Math.LN2,E=h?Math.ceil(y/h)*h:y,V=s._limitZoom(l+(this._delta>0?E:-E))-l;this._delta=0,this._startTime=null,V&&(s.options.scrollWheelZoom==="center"?s.setZoom(l+V):s.setZoomAround(this._lastMousePos,l+V))}});Ie.addInitHook("addHandler","scrollWheelZoom",Fy);var X1=600;Ie.mergeOptions({tapHold:se.touchNative&&se.safari&&se.mobile,tapTolerance:15});var Uy=_n.extend({addHooks:function(){ae(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Be(this._map._container,"touchstart",this._onDown,this)},_onDown:function(s){if(clearTimeout(this._holdTimeout),s.touches.length===1){var l=s.touches[0];this._startPos=this._newPos=new G(l.clientX,l.clientY),this._holdTimeout=setTimeout(a(function(){this._cancel(),this._isTapValid()&&(ae(document,"touchend",Je),ae(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",l))},this),X1),ae(document,"touchend touchcancel contextmenu",this._cancel,this),ae(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function s(){Be(document,"touchend",Je),Be(document,"touchend touchcancel",s)},_cancel:function(){clearTimeout(this._holdTimeout),Be(document,"touchend touchcancel contextmenu",this._cancel,this),Be(document,"touchmove",this._onMove,this)},_onMove:function(s){var l=s.touches[0];this._newPos=new G(l.clientX,l.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(s,l){var h=new MouseEvent(s,{bubbles:!0,cancelable:!0,view:window,screenX:l.screenX,screenY:l.screenY,clientX:l.clientX,clientY:l.clientY});h._simulated=!0,l.target.dispatchEvent(h)}});Ie.addInitHook("addHandler","tapHold",Uy),Ie.mergeOptions({touchZoom:se.touch,bounceAtZoomLimits:!0});var zy=_n.extend({addHooks:function(){ve(this._map._container,"leaflet-touch-zoom"),ae(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Qe(this._map._container,"leaflet-touch-zoom"),Be(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(s){var l=this._map;if(!(!s.touches||s.touches.length!==2||l._animatingZoom||this._zooming)){var h=l.mouseEventToContainerPoint(s.touches[0]),p=l.mouseEventToContainerPoint(s.touches[1]);this._centerPoint=l.getSize()._divideBy(2),this._startLatLng=l.containerPointToLatLng(this._centerPoint),l.options.touchZoom!=="center"&&(this._pinchStartLatLng=l.containerPointToLatLng(h.add(p)._divideBy(2))),this._startDist=h.distanceTo(p),this._startZoom=l.getZoom(),this._moved=!1,this._zooming=!0,l._stop(),ae(document,"touchmove",this._onTouchMove,this),ae(document,"touchend touchcancel",this._onTouchEnd,this),Je(s)}},_onTouchMove:function(s){if(!(!s.touches||s.touches.length!==2||!this._zooming)){var l=this._map,h=l.mouseEventToContainerPoint(s.touches[0]),p=l.mouseEventToContainerPoint(s.touches[1]),y=h.distanceTo(p)/this._startDist;if(this._zoom=l.getScaleZoom(y,this._startZoom),!l.options.bounceAtZoomLimits&&(this._zoom<l.getMinZoom()&&y<1||this._zoom>l.getMaxZoom()&&y>1)&&(this._zoom=l._limitZoom(this._zoom)),l.options.touchZoom==="center"){if(this._center=this._startLatLng,y===1)return}else{var E=h._add(p)._divideBy(2)._subtract(this._centerPoint);if(y===1&&E.x===0&&E.y===0)return;this._center=l.unproject(l.project(this._pinchStartLatLng,this._zoom).subtract(E),this._zoom)}this._moved||(l._moveStart(!0,!1),this._moved=!0),M(this._animRequest);var V=a(l._move,l,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=U(V,this,!0),Je(s)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,M(this._animRequest),Be(document,"touchmove",this._onTouchMove,this),Be(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Ie.addInitHook("addHandler","touchZoom",zy),Ie.BoxZoom=Oy,Ie.DoubleClickZoom=Dy,Ie.Drag=jy,Ie.Keyboard=Vy,Ie.ScrollWheelZoom=Fy,Ie.TapHold=Uy,Ie.TouchZoom=zy,n.Bounds=he,n.Browser=se,n.CRS=wt,n.Canvas=Ny,n.Circle=Bf,n.CircleMarker=Oc,n.Class=me,n.Control=an,n.DivIcon=by,n.DivOverlay=dr,n.DomEvent=bc,n.DomUtil=Ic,n.Draggable=Zn,n.Evented=Xt,n.FeatureGroup=ct,n.GeoJSON=Fr,n.GridLayer=kl,n.Handler=_n,n.Icon=hr,n.ImageOverlay=Uc,n.LatLng=Te,n.LatLngBounds=Se,n.Layer=We,n.LayerGroup=et,n.LineUtil=I,n.Map=Ie,n.Marker=Mc,n.Mixin=ks,n.Path=xi,n.Point=G,n.PolyUtil=Lo,n.Polygon=Do,n.Polyline=Vr,n.Popup=zc,n.PosAnimation=_l,n.Projection=ee,n.Rectangle=My,n.Renderer=Ur,n.SVG=Pl,n.SVGOverlay=Sy,n.TileLayer=Vo,n.Tooltip=Bc,n.Transformation=di,n.Util=D,n.VideoOverlay=Py,n.bind=a,n.bounds=we,n.canvas=Ry,n.circle=V1,n.circleMarker=j1,n.control=Jt,n.divIcon=K1,n.extend=i,n.featureGroup=Oo,n.geoJSON=Iy,n.geoJson=z1,n.gridLayer=G1,n.icon=O1,n.imageOverlay=B1,n.latLng=pe,n.latLngBounds=De,n.layerGroup=wi,n.map=So,n.marker=D1,n.point=J,n.polygon=U1,n.polyline=F1,n.popup=$1,n.rectangle=Y1,n.setOptions=R,n.stamp=d,n.svg=Ly,n.svgOverlay=H1,n.tileLayer=Ay,n.tooltip=q1,n.transformation=Ar,n.version=r,n.videoOverlay=W1;var J1=window.L;n.noConflict=function(){return window.L=J1,this},window.L=n})})(hg,hg.exports);var lc=hg.exports;function Vf(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function wy(t,e){return e==null?function(r,i){const o=O.useRef();return o.current||(o.current=t(r,i)),o}:function(r,i){const o=O.useRef();o.current||(o.current=t(r,i));const a=O.useRef(r),{instance:c}=o.current;return O.useEffect(function(){a.current!==r&&(e(c,r,a.current),a.current=r)},[c,r,i]),o}}function P1(t,e){O.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var o;(o=e.layerContainer)==null||o.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function y3(t){return function(n){const r=Df(),i=t(jf(n,r),r);return x1(r.map,n.attribution),vy(i.current,n.eventHandlers),P1(i.current,r),i}}function v3(t,e){const n=O.useRef();O.useEffect(function(){if(e.pathOptions!==n.current){const i=e.pathOptions??{};t.instance.setStyle(i),n.current=i}},[t,e])}function w3(t){return function(n){const r=Df(),i=t(jf(n,r),r);return vy(i.current,n.eventHandlers),P1(i.current,r),v3(i.current,n),i}}function x3(t,e){const n=wy(t),r=_3(n,e);return p3(r)}function S1(t,e){const n=wy(t,e),r=w3(n);return m3(r)}function E3(t,e){const n=wy(t,e),r=y3(n);return g3(r)}function T3(t,e,n){const{opacity:r,zIndex:i}=e;r!=null&&r!==n.opacity&&t.setOpacity(r),i!=null&&i!==n.zIndex&&t.setZIndex(i)}function b1(){return Df().map}const A1=S1(function({center:e,children:n,...r},i){const o=new lc.Circle(e,r);return Vf(o,T1(i,{overlayContainer:o}))},E1),Od=S1(function({center:e,children:n,...r},i){const o=new lc.CircleMarker(e,r);return Vf(o,T1(i,{overlayContainer:o}))},E1);function dg(){return dg=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dg.apply(this,arguments)}function k3({bounds:t,boundsOptions:e,center:n,children:r,className:i,id:o,placeholder:a,style:c,whenReady:d,zoom:m,..._},v){const[x]=O.useState({className:i,id:o,style:c}),[S,C]=O.useState(null);O.useImperativeHandle(v,()=>(S==null?void 0:S.map)??null,[S]);const R=O.useCallback(b=>{if(b!==null&&S===null){const T=new lc.Map(b,_);n!=null&&m!=null?T.setView(n,m):t!=null&&T.fitBounds(t,e),d!=null&&T.whenReady(d),C(f3(T))}},[]);O.useEffect(()=>()=>{S==null||S.map.remove()},[S]);const F=S?Vh.createElement(I1,{value:S},r):a??null;return Vh.createElement("div",dg({},x,{ref:R}),F)}const C1=O.forwardRef(k3),Dd=x3(function(e,n){const r=new lc.Popup(e,n.overlayContainer);return Vf(r,n)},function(e,n,{position:r},i){O.useEffect(function(){const{instance:a}=e;function c(m){m.popup===a&&(a.update(),i(!0))}function d(m){m.popup===a&&i(!1)}return n.map.on({popupopen:c,popupclose:d}),n.overlayContainer==null?(r!=null&&a.setLatLng(r),a.openOn(n.map)):n.overlayContainer.bindPopup(a),function(){var _;n.map.off({popupopen:c,popupclose:d}),(_=n.overlayContainer)==null||_.unbindPopup(),n.map.removeLayer(a)}},[e,n,i,r])}),N1=E3(function({url:e,...n},r){const i=new lc.TileLayer(e,jf(n,r));return Vf(i,r)},function(e,n,r){T3(e,n,r);const{url:i}=n;i!=null&&i!==r.url&&e.setUrl(i)}),I3=()=>{const t=b1();return O.useEffect(()=>{setTimeout(()=>{t.invalidateSize()},100)},[t]),null},P3=({employees:t=[],attendances:e=[],className:n="",height:r="400px"})=>{const[i,o]=O.useState(!1),a=e.reduce((m,_)=>(m[_.userId]=_,m),{}),c=t.filter(m=>{const _=a[m.id];return _&&_.status==="working"&&_.checkInLocation}).map(m=>({...m,location:a[m.id].checkInLocation,status:a[m.id].status})),d={working:"#22c55e",pk_battle:"#3b82f6"};return O.useEffect(()=>{o(!0)},[]),i?f.jsx("div",{className:`rounded-xl overflow-hidden shadow-lg ${n}`,style:{height:r},children:f.jsxs(C1,{center:[Nt.lat,Nt.lng],zoom:17,style:{height:"100%",width:"100%"},scrollWheelZoom:!0,children:[f.jsx(I3,{}),f.jsx(N1,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),f.jsx(A1,{center:[Nt.lat,Nt.lng],radius:Nt.radius,pathOptions:{color:"#4f46e5",fillColor:"#6366f1",fillOpacity:.15,weight:2,dashArray:"5, 5"}}),f.jsx(Od,{center:[Nt.lat,Nt.lng],radius:10,pathOptions:{color:"#4f46e5",fillColor:"#4f46e5",fillOpacity:1,weight:3},children:f.jsx(Dd,{children:f.jsxs("div",{className:"text-center",children:[f.jsx("strong",{children:"Kantor NEX Media"}),f.jsx("br",{}),f.jsx("span",{className:"text-sm text-gray-500",children:"Titik Pusat Absensi"})]})})}),c.map(m=>{var _;return f.jsx(Od,{center:[m.location.lat,m.location.lng],radius:8,pathOptions:{color:d[m.status]||"#22c55e",fillColor:d[m.status]||"#22c55e",fillOpacity:.8,weight:2},children:f.jsx(Dd,{children:f.jsxs("div",{className:"text-center",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[m.photoURL?f.jsx("img",{src:m.photoURL,alt:m.name,className:"w-8 h-8 rounded-full object-cover"}):f.jsx("div",{className:"w-8 h-8 rounded-full bg-primary-500 flex items-center justify-center text-white text-xs font-bold",children:(_=m.name)==null?void 0:_.charAt(0)}),f.jsx("strong",{children:m.name})]}),f.jsx("span",{className:"text-sm text-gray-500",children:m.position}),f.jsx("div",{className:"mt-1 text-xs px-2 py-0.5 rounded-full bg-green-100 text-green-700 inline-block",children:"Sedang Bekerja"})]})})},m.id)})]})}):f.jsx("div",{className:`bg-slate-100 dark:bg-slate-800 rounded-xl animate-pulse ${n}`,style:{height:r}})},S3=async t=>{try{return(await gj(yj,"createUser")({email:t.email,password:t.password,name:t.name,position:t.position,role:t.role||"employee",workHoursTarget:t.workHoursTarget||QI[t.position]||8})).data}catch(e){throw console.error("Error creating user:",e),new Error(e.message||"Gagal membuat akun")}},b3=async t=>{try{return await vR(qo,t),!0}catch(e){throw console.error("Error resetting password:",e),new Error("Gagal mengirim email reset password")}},R1=async()=>{try{const t=io(Mt,"user"),e=Gs(t,Oa("name"));return(await sy(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(t){throw console.error("Error getting users:",t),t}},L1=t=>{const e=io(Mt,"user"),n=Gs(e,Oa("name"));return Af(n,r=>{const i=r.docs.map(o=>({id:o.id,...o.data()}));t(i)})},A3=async t=>{try{const e=Hn(Mt,"user",t);return await bf(e,{isActive:!1,deactivatedAt:new Date}),!0}catch(e){throw console.error("Error deactivating user:",e),e}},C3=async t=>{try{const e=Hn(Mt,"user",t);return await bf(e,{isActive:!0,reactivatedAt:new Date}),!0}catch(e){throw console.error("Error reactivating user:",e),e}},N3=async()=>{try{const t=io(Mt,"user"),e=Gs(t,Wr("role","==","employee"),Wr("isActive","==",!0),Oa("name"));return(await sy(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(t){throw console.error("Error getting employees:",t),t}},R3=async(t,e,n=!1)=>{try{const r=ao(),i=Hn(Mt,"attendance",`${t}_${r}`),o=await so(i);if(o.exists()&&o.data().checkIn)throw new Error("Anda sudah absen masuk hari ini");const a={userId:t,date:r,checkIn:Ce.now(),checkOut:null,checkInLocation:e,checkOutLocation:null,durationMinutes:0,deficitMinutes:0,status:xe.WORKING,isWFH:n,notes:"",createdAt:Ce.now(),updatedAt:Ce.now(),isManualEntry:!1,manualEntryBy:null};return await sc(i,a),{id:i.id,...a}}catch(r){throw console.error("Error checking in:",r),r}},L3=async(t,e,n,r=!1)=>{try{const i=ao(),o=Hn(Mt,"attendance",`${t}_${i}`),a=await so(o);if(!a.exists()||!a.data().checkIn)throw new Error("Anda belum absen masuk");const c=a.data();if(c.checkOut)throw new Error("Anda sudah absen pulang");const d=Ce.now(),m=v1(c.checkIn,d);let _=m,v=0,x=xe.COMPLETED;r?(_=n,v=0,x=xe.PK_BATTLE):m<n&&(v=n-m,x=xe.EARLY_LEAVE);const S={checkOut:d,checkOutLocation:e,durationMinutes:_,deficitMinutes:v,status:x,updatedAt:Ce.now()};return await bf(o,S),{id:o.id,...c,...S}}catch(i){throw console.error("Error checking out:",i),i}},M3=async(t,e="Libur")=>{try{const n=ao(),r=Hn(Mt,"attendance",`${t}_${n}`);if((await so(r)).exists())throw new Error("Sudah ada data absensi untuk hari ini");const o={userId:t,date:n,checkIn:null,checkOut:null,checkInLocation:null,checkOutLocation:null,durationMinutes:0,deficitMinutes:0,status:xe.HOLIDAY,isWFH:!1,notes:e,createdAt:Ce.now(),updatedAt:Ce.now(),isManualEntry:!1,manualEntryBy:null};return await sc(r,o),{id:r.id,...o}}catch(n){throw console.error("Error marking holiday:",n),n}},O3=async(t,e="Sakit")=>{try{const n=ao(),r=Hn(Mt,"attendance",`${t}_${n}`);if((await so(r)).exists())throw new Error("Sudah ada data absensi untuk hari ini");const o={userId:t,date:n,checkIn:null,checkOut:null,checkInLocation:null,checkOutLocation:null,durationMinutes:0,deficitMinutes:0,status:xe.SICK,isWFH:!1,notes:e,createdAt:Ce.now(),updatedAt:Ce.now(),isManualEntry:!1,manualEntryBy:null};return await sc(r,o),{id:r.id,...o}}catch(n){throw console.error("Error marking sick:",n),n}},D3=async(t,e="Izin")=>{try{const n=ao(),r=Hn(Mt,"attendance",`${t}_${n}`);if((await so(r)).exists())throw new Error("Sudah ada data absensi untuk hari ini");const o={userId:t,date:n,checkIn:null,checkOut:null,checkInLocation:null,checkOutLocation:null,durationMinutes:0,deficitMinutes:0,status:xe.LEAVE,isWFH:!1,notes:e,createdAt:Ce.now(),updatedAt:Ce.now(),isManualEntry:!1,manualEntryBy:null};return await sc(r,o),{id:r.id,...o}}catch(n){throw console.error("Error marking leave:",n),n}},j3=async(t,e)=>{try{const{userId:n,date:r,checkInTime:i,checkOutTime:o,status:a,notes:c}=e,d=Ld(new Date(r)),m=Hn(Mt,"attendance",`${n}_${d}`);let _=0,v=null,x=null;if(i){const[C,R]=i.split(":"),F=new Date(r);F.setHours(parseInt(C),parseInt(R),0,0),v=Ce.fromDate(F)}if(o){const[C,R]=o.split(":"),F=new Date(r);F.setHours(parseInt(C),parseInt(R),0,0),x=Ce.fromDate(F),v&&(_=v1(v,x))}const S={userId:n,date:d,checkIn:v,checkOut:x,checkInLocation:null,checkOutLocation:null,durationMinutes:_,deficitMinutes:0,status:a||xe.COMPLETED,isWFH:!1,notes:c||"Input manual oleh admin",createdAt:Ce.now(),updatedAt:Ce.now(),isManualEntry:!0,manualEntryBy:t};return await sc(m,S),{id:m.id,...S}}catch(n){throw console.error("Error creating manual attendance:",n),n}},V3=(t,e)=>{const n=ao(),r=Hn(Mt,"attendance",`${t}_${n}`);return Af(r,i=>{i.exists()?e({id:i.id,...i.data()}):e(null)})},xy=async(t,e,n=null)=>{try{const r=Ld(t),i=Ld(e);let o;const a=io(Mt,"attendance");return n?o=Gs(a,Wr("userId","==",n),Wr("date",">=",r),Wr("date","<=",i),Oa("date","desc")):o=Gs(a,Wr("date",">=",r),Wr("date","<=",i),Oa("date","desc")),(await sy(o)).docs.map(d=>({id:d.id,...d.data()}))}catch(r){throw console.error("Error getting attendance by date range:",r),r}},F3=t=>{const e=ao(),n=io(Mt,"attendance"),r=Gs(n,Wr("date","==",e));return Af(r,i=>{const o=i.docs.map(a=>({id:a.id,...a.data()}));t(o)})},Ey=t=>{const e={totalWorkDays:0,totalHolidays:0,totalSick:0,totalLeave:0,totalPKBattle:0,totalEarlyLeave:0,totalDeficitMinutes:0,totalWorkMinutes:0};return t.forEach(n=>{switch(n.status){case xe.COMPLETED:case xe.WORKING:e.totalWorkDays++,e.totalWorkMinutes+=n.durationMinutes||0;break;case xe.PK_BATTLE:e.totalWorkDays++,e.totalPKBattle++,e.totalWorkMinutes+=n.durationMinutes||0;break;case xe.EARLY_LEAVE:e.totalWorkDays++,e.totalEarlyLeave++,e.totalWorkMinutes+=n.durationMinutes||0,e.totalDeficitMinutes+=n.deficitMinutes||0;break;case xe.HOLIDAY:e.totalHolidays++;break;case xe.SICK:e.totalSick++;break;case xe.LEAVE:e.totalLeave++;break}}),e},U3=()=>{const[t,e]=O.useState([]),[n,r]=O.useState([]),[i,o]=O.useState(!0),[a,c]=O.useState("grid");O.useEffect(()=>{o(!0);const _=L1(x=>{const S=x.filter(C=>C.role==="employee"&&C.isActive!==!1);e(S)}),v=F3(x=>{r(x),o(!1)});return()=>{_(),v()}},[]);const d={total:t.length,present:n.filter(_=>[xe.WORKING,xe.COMPLETED,xe.PK_BATTLE,xe.EARLY_LEAVE].includes(_.status)).length,working:n.filter(_=>_.status===xe.WORKING).length,sick:n.filter(_=>_.status===xe.SICK).length,leave:n.filter(_=>_.status===xe.LEAVE).length,holiday:n.filter(_=>_.status===xe.HOLIDAY).length,absent:t.length-n.length,totalDeficit:n.reduce((_,v)=>_+(v.deficitMinutes||0),0)},m=_=>{console.log("Employee clicked:",_)};return f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[f.jsx(zo,{title:"Total Karyawan",value:d.total,icon:uu,color:"primary"}),f.jsx(zo,{title:"Hadir",value:d.present,icon:o1,color:"green"}),f.jsx(zo,{title:"Sedang Kerja",value:d.working,icon:Lw,color:"blue"}),f.jsx(zo,{title:"Sakit",value:d.sick,icon:my,color:"yellow"}),f.jsx(zo,{title:"Izin",value:d.leave,icon:t1,color:"purple"}),f.jsx(zo,{title:"Belum Hadir",value:d.absent,icon:a1,color:"red"})]}),d.totalDeficit>0&&f.jsx(Ee,{className:"bg-gradient-to-r from-amber-50 to-orange-50 dark:from-amber-900/20 dark:to-orange-900/20 border-amber-200 dark:border-amber-800",children:f.jsx("div",{className:"flex items-center justify-between",children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"p-3 bg-amber-100 dark:bg-amber-900/40 rounded-xl",children:f.jsx(Pn,{className:"w-6 h-6 text-amber-600 dark:text-amber-400"})}),f.jsxs("div",{children:[f.jsx("p",{className:"text-sm font-medium text-amber-800 dark:text-amber-200",children:"Total Kekurangan Jam Hari Ini"}),f.jsx("p",{className:"text-2xl font-bold text-amber-900 dark:text-amber-100",children:vn(d.totalDeficit)})]})]})})}),f.jsx("div",{className:"flex flex-col lg:flex-row gap-6",children:f.jsx("div",{className:"flex-1",children:f.jsxs(Ee,{padding:"none",children:[f.jsx("div",{className:"p-4 border-b border-slate-200 dark:border-slate-700",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Live Monitoring"}),f.jsxs("div",{className:"flex items-center bg-slate-100 dark:bg-slate-800 rounded-lg p-1",children:[f.jsxs("button",{onClick:()=>c("grid"),className:`px-3 py-1.5 rounded-md text-sm font-medium transition-colors ${a==="grid"?"bg-white dark:bg-slate-700 text-primary-600 dark:text-primary-400 shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white"}`,children:[f.jsx(uu,{className:"w-4 h-4 inline mr-1"}),"Grid"]}),f.jsxs("button",{onClick:()=>c("map"),className:`px-3 py-1.5 rounded-md text-sm font-medium transition-colors ${a==="map"?"bg-white dark:bg-slate-700 text-primary-600 dark:text-primary-400 shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white"}`,children:[f.jsx(s1,{className:"w-4 h-4 inline mr-1"}),"Peta"]})]})]})}),f.jsx("div",{className:"p-4",children:a==="grid"?f.jsx(h3,{employees:t,attendances:n,isLoading:i,onEmployeeClick:m}):f.jsx(P3,{employees:t,attendances:n,height:"500px"})})]})})}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[f.jsx(Ee,{hover:!0,className:"cursor-pointer group",children:f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx("div",{className:"p-3 bg-primary-100 dark:bg-primary-900/30 rounded-xl group-hover:bg-primary-200 dark:group-hover:bg-primary-900/50 transition-colors",children:f.jsx(uu,{className:"w-6 h-6 text-primary-600 dark:text-primary-400"})}),f.jsxs("div",{children:[f.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white",children:"Kelola Karyawan"}),f.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Tambah atau edit data karyawan"})]})]})}),f.jsx(Ee,{hover:!0,className:"cursor-pointer group",children:f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx("div",{className:"p-3 bg-green-100 dark:bg-green-900/30 rounded-xl group-hover:bg-green-200 dark:group-hover:bg-green-900/50 transition-colors",children:f.jsx(Pn,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),f.jsxs("div",{children:[f.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white",children:"Revisi Absen"}),f.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Input absensi manual"})]})]})}),f.jsx(Ee,{hover:!0,className:"cursor-pointer group",children:f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx("div",{className:"p-3 bg-purple-100 dark:bg-purple-900/30 rounded-xl group-hover:bg-purple-200 dark:group-hover:bg-purple-900/50 transition-colors",children:f.jsx(Lw,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})}),f.jsxs("div",{children:[f.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white",children:"Lihat Laporan"}),f.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Rekap dan laporan gaji"})]})]})})]})]})},ai=O.forwardRef(({label:t,error:e,helperText:n,options:r=[],placeholder:i="Pilih...",className:o="",containerClassName:a="",...c},d)=>f.jsxs("div",{className:`space-y-1.5 ${a}`,children:[t&&f.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:t}),f.jsxs("div",{className:"relative",children:[f.jsxs("select",{ref:d,className:`
            w-full px-4 py-2.5 rounded-xl appearance-none
            border border-slate-300 dark:border-slate-600
            bg-white dark:bg-slate-800
            text-slate-900 dark:text-slate-100
            focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent
            transition-all duration-200
            disabled:opacity-50 disabled:cursor-not-allowed
            pr-10
            ${e?"border-red-500 focus:ring-red-500":""}
            ${o}
          `,...c,children:[i&&f.jsx("option",{value:"",disabled:!0,children:i}),r.map(m=>f.jsx("option",{value:m.value,children:m.label},m.value))]}),f.jsx(Cj,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400 pointer-events-none"})]}),e&&f.jsx("p",{className:"text-sm text-red-500 dark:text-red-400",children:e}),n&&!e&&f.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:n})]}));ai.displayName="Select";const z3=()=>{const[t,e]=O.useState([]),[n,r]=O.useState([]),[i,o]=O.useState(!0),[a,c]=O.useState(null),[d,m]=O.useState(""),[_,v]=O.useState(""),[x,S]=O.useState(""),[C,R]=O.useState("");O.useEffect(()=>{const{startDate:T,endDate:P}=Of();S(T.toISOString().split("T")[0]),R(P.toISOString().split("T")[0])},[]),O.useEffect(()=>{(async()=>{try{const P=await R1();e(P.filter(z=>z.role==="employee"))}catch(P){console.error("Error fetching employees:",P)}})()},[]),O.useEffect(()=>{(async()=>{if(!(!x||!C))try{o(!0);const P=await xy(new Date(x),new Date(C),d||null);let z=P;if(_){const K=t.filter($=>$.position===_).map($=>$.id);z=P.filter($=>K.includes($.userId))}r(z),c(Ey(z))}catch(P){console.error("Error fetching attendance data:",P)}finally{o(!1)}})()},[x,C,d,_,t]);const F=T=>{const P=t.find(z=>z.id===T);return(P==null?void 0:P.name)||"Unknown"},b=()=>{const T=["Tanggal","Nama","Jabatan","Masuk","Pulang","Durasi","Defisit","Status"],P=n.map(k=>{const N=t.find(j=>j.id===k.userId);return[k.date,(N==null?void 0:N.name)||"-",(N==null?void 0:N.position)||"-",k.checkIn?vr(k.checkIn):"-",k.checkOut?vr(k.checkOut):"-",vn(k.durationMinutes),k.deficitMinutes>0?Ww(k.deficitMinutes):"-",Si[k.status]||k.status]}),z=[T,...P].map(k=>k.join(",")).join(`
`),K=new Blob([z],{type:"text/csv"}),$=URL.createObjectURL(K),A=document.createElement("a");A.href=$,A.download=`rekap-absensi-${x}-${C}.csv`,A.click()};return f.jsxs("div",{className:"space-y-6",children:[f.jsxs(Ee,{children:[f.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[f.jsx(r1,{className:"w-5 h-5 text-primary-600"}),f.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Filter Data"})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[f.jsx(ai,{label:"Karyawan",value:d,onChange:T=>m(T.target.value),options:[{value:"",label:"Semua Karyawan"},...t.map(T=>({value:T.id,label:T.name}))]}),f.jsx(ai,{label:"Jabatan",value:_,onChange:T=>v(T.target.value),options:[{value:"",label:"Semua Jabatan"},...ag.map(T=>({value:T,label:T}))]}),f.jsx(Et,{label:"Tanggal Mulai",type:"date",value:x,onChange:T=>S(T.target.value)}),f.jsx(Et,{label:"Tanggal Akhir",type:"date",value:C,onChange:T=>R(T.target.value)})]}),f.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[f.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Periode Cutoff: ",w1()]}),f.jsx(Ke,{variant:"secondary",onClick:b,disabled:n.length===0,leftIcon:f.jsx(n1,{className:"w-4 h-4"}),children:"Export CSV"})]})]}),a&&f.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[f.jsxs(Ee,{className:"text-center bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 border-green-200 dark:border-green-800",children:[f.jsx(oc,{className:"w-6 h-6 text-green-600 dark:text-green-400 mx-auto mb-2"}),f.jsx("p",{className:"text-2xl font-bold text-green-700 dark:text-green-300",children:a.totalWorkDays}),f.jsx("p",{className:"text-sm text-green-600 dark:text-green-400",children:"Hari Kerja"})]}),f.jsxs(Ee,{className:"text-center bg-gradient-to-br from-purple-50 to-violet-50 dark:from-purple-900/20 dark:to-violet-900/20 border-purple-200 dark:border-purple-800",children:[f.jsx(t1,{className:"w-6 h-6 text-purple-600 dark:text-purple-400 mx-auto mb-2"}),f.jsx("p",{className:"text-2xl font-bold text-purple-700 dark:text-purple-300",children:a.totalHolidays}),f.jsx("p",{className:"text-sm text-purple-600 dark:text-purple-400",children:"Libur"})]}),f.jsxs(Ee,{className:"text-center bg-gradient-to-br from-orange-50 to-amber-50 dark:from-orange-900/20 dark:to-amber-900/20 border-orange-200 dark:border-orange-800",children:[f.jsx(my,{className:"w-6 h-6 text-orange-600 dark:text-orange-400 mx-auto mb-2"}),f.jsx("p",{className:"text-2xl font-bold text-orange-700 dark:text-orange-300",children:a.totalSick}),f.jsx("p",{className:"text-sm text-orange-600 dark:text-orange-400",children:"Sakit"})]}),f.jsxs(Ee,{className:"text-center bg-gradient-to-br from-cyan-50 to-sky-50 dark:from-cyan-900/20 dark:to-sky-900/20 border-cyan-200 dark:border-cyan-800",children:[f.jsx(Qs,{className:"w-6 h-6 text-cyan-600 dark:text-cyan-400 mx-auto mb-2"}),f.jsx("p",{className:"text-2xl font-bold text-cyan-700 dark:text-cyan-300",children:a.totalLeave}),f.jsx("p",{className:"text-sm text-cyan-600 dark:text-cyan-400",children:"Izin"})]}),f.jsxs(Ee,{className:"text-center bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 border-blue-200 dark:border-blue-800",children:[f.jsx(uu,{className:"w-6 h-6 text-blue-600 dark:text-blue-400 mx-auto mb-2"}),f.jsx("p",{className:"text-2xl font-bold text-blue-700 dark:text-blue-300",children:a.totalPKBattle}),f.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:"PK Battle"})]}),f.jsxs(Ee,{className:"text-center bg-gradient-to-br from-red-50 to-rose-50 dark:from-red-900/20 dark:to-rose-900/20 border-red-200 dark:border-red-800",children:[f.jsx(Pn,{className:"w-6 h-6 text-red-600 dark:text-red-400 mx-auto mb-2"}),f.jsx("p",{className:"text-2xl font-bold text-red-700 dark:text-red-300",children:vn(a.totalDeficitMinutes)}),f.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:"Total Defisit"})]})]}),f.jsxs(Ee,{padding:"none",children:[f.jsx("div",{className:"p-4 border-b border-slate-200 dark:border-slate-700",children:f.jsxs("h2",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:["Data Absensi (",n.length," record)"]})}),f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"w-full",children:[f.jsx("thead",{className:"bg-slate-50 dark:bg-slate-800",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Tanggal"}),f.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Nama"}),f.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Masuk"}),f.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Pulang"}),f.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Durasi"}),f.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Defisit"}),f.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Status"})]})}),f.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:i?Array.from({length:5}).map((T,P)=>f.jsx(Ij,{columns:7},P)):n.length===0?f.jsx("tr",{children:f.jsx("td",{colSpan:7,className:"px-4 py-8 text-center text-slate-500 dark:text-slate-400",children:"Tidak ada data untuk filter yang dipilih"})}):n.map(T=>f.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800/50",children:[f.jsx("td",{className:"px-4 py-3 text-sm text-slate-900 dark:text-white",children:Mf(T.date)}),f.jsx("td",{className:"px-4 py-3 text-sm font-medium text-slate-900 dark:text-white",children:F(T.userId)}),f.jsx("td",{className:"px-4 py-3 text-sm text-slate-600 dark:text-slate-400",children:T.checkIn?vr(T.checkIn):"-"}),f.jsx("td",{className:"px-4 py-3 text-sm text-slate-600 dark:text-slate-400",children:T.checkOut?vr(T.checkOut):"-"}),f.jsx("td",{className:"px-4 py-3 text-sm text-slate-600 dark:text-slate-400",children:vn(T.durationMinutes)}),f.jsx("td",{className:"px-4 py-3 text-sm",children:T.deficitMinutes>0?f.jsx("span",{className:"text-red-600 dark:text-red-400 font-medium",children:Ww(T.deficitMinutes)}):f.jsx("span",{className:"text-slate-400",children:"-"})}),f.jsx("td",{className:"px-4 py-3",children:f.jsx(_y,{status:T.status,size:"sm"})})]},T.id))})]})})]})]})},Uu=({isOpen:t,onClose:e,title:n,children:r,size:i="md",showCloseButton:o=!0,closeOnOverlayClick:a=!0,footer:c})=>{const d=O.useRef(null),m={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl","2xl":"max-w-2xl",full:"max-w-4xl"};if(O.useEffect(()=>{const v=x=>{x.key==="Escape"&&t&&e()};return document.addEventListener("keydown",v),()=>document.removeEventListener("keydown",v)},[t,e]),O.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[t]),O.useEffect(()=>{t&&d.current&&d.current.focus()},[t]),!t)return null;const _=v=>{a&&v.target===v.currentTarget&&e()};return f.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-fade-in",onClick:_,children:f.jsxs("div",{ref:d,tabIndex:-1,className:`
          ${m[i]} w-full
          bg-white dark:bg-slate-800
          rounded-2xl shadow-2xl
          animate-fade-in
          max-h-[90vh] flex flex-col
        `,children:[(n||o)&&f.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-slate-200 dark:border-slate-700",children:[n&&f.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:n}),o&&f.jsx("button",{onClick:e,className:"p-2 rounded-lg text-slate-400 hover:text-slate-600 hover:bg-slate-100 dark:hover:text-slate-300 dark:hover:bg-slate-700 transition-colors",children:f.jsx(l1,{className:"w-5 h-5"})})]}),f.jsx("div",{className:"flex-1 overflow-y-auto p-5",children:r}),c&&f.jsx("div",{className:"p-5 border-t border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900/50 rounded-b-2xl",children:c})]})})},B3=()=>{const[t,e]=O.useState([]),[n,r]=O.useState([]),[i,o]=O.useState(!0),[a,c]=O.useState(""),[d,m]=O.useState(""),[_,v]=O.useState(!1),[x,S]=O.useState(!1),[C,R]=O.useState(null),[F,b]=O.useState(!1),[T,P]=O.useState(""),[z,K]=O.useState(""),[$,A]=O.useState({name:"",email:"",password:"",position:"",workHoursTarget:8});O.useEffect(()=>{const M=L1(D=>{e(D),o(!1)});return()=>M()},[]),O.useEffect(()=>{let M=t;a&&(M=M.filter(D=>{var me,kt;return((me=D.name)==null?void 0:me.toLowerCase().includes(a.toLowerCase()))||((kt=D.email)==null?void 0:kt.toLowerCase().includes(a.toLowerCase()))})),d&&(M=M.filter(D=>D.position===d)),r(M)},[t,a,d]);const k=M=>{A({...$,position:M,workHoursTarget:QI[M]||8})},N=async M=>{if(M.preventDefault(),P(""),!$.name||!$.email||!$.password||!$.position){P("Semua field wajib diisi");return}if($.password.length<6){P("Password minimal 6 karakter");return}try{b(!0),await S3({...$,role:YI.EMPLOYEE}),K("Akun karyawan berhasil dibuat!"),v(!1),A({name:"",email:"",password:"",position:"",workHoursTarget:8}),setTimeout(()=>K(""),5e3)}catch(D){P(D.message)}finally{b(!1)}},j=async()=>{if(C)try{b(!0),await b3(C.email),K(`Link reset password telah dikirim ke ${C.email}`),S(!1),R(null),setTimeout(()=>K(""),5e3)}catch(M){P(M.message)}finally{b(!1)}},U=async M=>{try{M.isActive===!1?(await C3(M.id),K(`${M.name} telah diaktifkan kembali`)):(await A3(M.id),K(`${M.name} telah dinonaktifkan`)),setTimeout(()=>K(""),5e3)}catch(D){P(D.message)}};return i?f.jsx("div",{className:"flex items-center justify-center h-64",children:f.jsx(oo,{size:"lg",text:"Memuat data karyawan..."})}):f.jsxs("div",{className:"space-y-6",children:[z&&f.jsx("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-xl text-green-700 dark:text-green-400 animate-fade-in",children:z}),T&&f.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl text-red-700 dark:text-red-400 animate-fade-in",children:T}),f.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[f.jsxs("div",{children:[f.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Karyawan"}),f.jsxs("p",{className:"text-slate-500 dark:text-slate-400",children:[t.filter(M=>M.role==="employee").length," karyawan terdaftar"]})]}),f.jsx(Ke,{onClick:()=>v(!0),leftIcon:f.jsx(Qj,{className:"w-4 h-4"}),children:"Tambah Karyawan"})]}),f.jsx(Ee,{children:f.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[f.jsx("div",{className:"flex-1",children:f.jsx(Et,{placeholder:"Cari nama atau email...",value:a,onChange:M=>c(M.target.value),leftIcon:f.jsx(lg,{className:"w-4 h-4"})})}),f.jsx("div",{className:"w-full sm:w-48",children:f.jsx(ai,{value:d,onChange:M=>m(M.target.value),options:[{value:"",label:"Semua Jabatan"},...ag.map(M=>({value:M,label:M}))]})})]})}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.filter(M=>M.role==="employee").map(M=>f.jsxs(Ee,{className:`relative ${M.isActive===!1?"opacity-60":""}`,children:[M.isActive===!1&&f.jsx("div",{className:"absolute top-3 right-3",children:f.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400 rounded-full",children:"Nonaktif"})}),f.jsxs("div",{className:"flex items-start gap-4",children:[f.jsx(Rf,{src:M.photoURL,name:M.name,size:"lg"}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white truncate",children:M.name}),f.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate",children:M.email}),f.jsx("div",{className:"mt-2",children:f.jsx(c1,{position:M.position})})]})]}),f.jsx("div",{className:"mt-4 flex items-center gap-4 text-sm text-slate-500 dark:text-slate-400",children:f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx(Pn,{className:"w-4 h-4"}),f.jsxs("span",{children:[M.workHoursTarget||8," jam/hari"]})]})}),f.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-200 dark:border-slate-700 flex gap-2",children:[f.jsx(Ke,{size:"sm",variant:"ghost",onClick:()=>{R(M),S(!0)},leftIcon:f.jsx(py,{className:"w-4 h-4"}),children:"Reset Password"}),f.jsx(Ke,{size:"sm",variant:"ghost",onClick:()=>U(M),leftIcon:M.isActive===!1?f.jsx(o1,{className:"w-4 h-4"}):f.jsx(a1,{className:"w-4 h-4"}),className:M.isActive===!1?"text-green-600":"text-red-600",children:M.isActive===!1?"Aktifkan":"Nonaktifkan"})]})]},M.id))}),n.filter(M=>M.role==="employee").length===0&&f.jsx(Ee,{className:"text-center py-12",children:f.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Tidak ada karyawan yang sesuai dengan filter"})}),f.jsx(Uu,{isOpen:_,onClose:()=>v(!1),title:"Tambah Karyawan Baru",size:"md",children:f.jsxs("form",{onSubmit:N,className:"space-y-4",children:[T&&f.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 text-sm rounded-lg",children:T}),f.jsx(Et,{label:"Nama Lengkap",value:$.name,onChange:M=>A({...$,name:M.target.value}),placeholder:"John Doe",required:!0}),f.jsx(Et,{label:"Email",type:"email",value:$.email,onChange:M=>A({...$,email:M.target.value}),placeholder:"john@email.com",leftIcon:f.jsx(i1,{className:"w-4 h-4"}),required:!0}),f.jsx(Et,{label:"Password",type:"password",value:$.password,onChange:M=>A({...$,password:M.target.value}),placeholder:"Minimal 6 karakter",helperText:"Karyawan bisa mengubah password setelah login",required:!0}),f.jsx(ai,{label:"Jabatan",value:$.position,onChange:M=>k(M.target.value),options:ag.map(M=>({value:M,label:M})),required:!0}),f.jsx(Et,{label:"Target Jam Kerja per Hari",type:"number",min:1,max:12,value:$.workHoursTarget,onChange:M=>A({...$,workHoursTarget:parseInt(M.target.value)}),leftIcon:f.jsx(Pn,{className:"w-4 h-4"})}),f.jsxs("div",{className:"flex gap-3 pt-4",children:[f.jsx(Ke,{type:"button",variant:"secondary",onClick:()=>v(!1),className:"flex-1",children:"Batal"}),f.jsx(Ke,{type:"submit",isLoading:F,className:"flex-1",children:"Buat Akun"})]})]})}),f.jsx(Uu,{isOpen:x,onClose:()=>{S(!1),R(null)},title:"Reset Password",size:"sm",children:f.jsxs("div",{className:"text-center space-y-4",children:[f.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Link reset password akan dikirim ke email:"}),f.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:C==null?void 0:C.email}),f.jsxs("div",{className:"flex gap-3 pt-4",children:[f.jsx(Ke,{variant:"secondary",onClick:()=>{S(!1),R(null)},className:"flex-1",children:"Batal"}),f.jsx(Ke,{onClick:j,isLoading:F,className:"flex-1",children:"Kirim Link"})]})]})})]})},W3=()=>{const{user:t}=br(),[e,n]=O.useState([]),[r,i]=O.useState(!1),[o,a]=O.useState(""),[c,d]=O.useState(""),[m,_]=O.useState({userId:"",date:new Date().toISOString().split("T")[0],checkInTime:"08:00",checkOutTime:"17:00",status:xe.COMPLETED,notes:""});O.useEffect(()=>{(async()=>{try{const R=await N3();n(R)}catch(R){console.error("Error fetching employees:",R)}})()},[]);const v=async C=>{if(C.preventDefault(),a(""),d(""),!m.userId){a("Pilih karyawan terlebih dahulu");return}if(!m.date){a("Pilih tanggal");return}try{i(!0),await j3(t.uid,{userId:m.userId,date:m.date,checkInTime:m.checkInTime,checkOutTime:m.checkOutTime,status:m.status,notes:m.notes||"Input manual oleh admin"}),d("Data absensi berhasil disimpan!"),_({userId:"",date:new Date().toISOString().split("T")[0],checkInTime:"08:00",checkOutTime:"17:00",status:xe.COMPLETED,notes:""}),setTimeout(()=>d(""),5e3)}catch(R){a(R.message)}finally{i(!1)}},x=[{value:xe.COMPLETED,label:Si.completed},{value:xe.PK_BATTLE,label:Si.pk_battle},{value:xe.EARLY_LEAVE,label:Si.early_leave},{value:xe.HOLIDAY,label:Si.holiday},{value:xe.SICK,label:Si.sick},{value:xe.LEAVE,label:Si.leave}],S=[xe.COMPLETED,xe.PK_BATTLE,xe.EARLY_LEAVE].includes(m.status);return f.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[f.jsxs("div",{children:[f.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Revisi Absensi"}),f.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Input manual data absensi untuk karyawan yang lupa absen"})]}),o&&f.jsxs("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl flex items-start gap-3 animate-fade-in",children:[f.jsx(Cd,{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5"}),f.jsx("p",{className:"text-sm text-red-700 dark:text-red-400",children:o})]}),c&&f.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-xl flex items-start gap-3 animate-fade-in",children:[f.jsx(oc,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),f.jsx("p",{className:"text-sm text-green-700 dark:text-green-400",children:c})]}),f.jsx(Ee,{children:f.jsxs("form",{onSubmit:v,className:"space-y-5",children:[f.jsx(ai,{label:"Pilih Karyawan",value:m.userId,onChange:C=>_({...m,userId:C.target.value}),options:e.map(C=>({value:C.id,label:`${C.name} - ${C.position}`})),placeholder:"Pilih karyawan..."}),f.jsx(Et,{label:"Tanggal",type:"date",value:m.date,onChange:C=>_({...m,date:C.target.value}),leftIcon:f.jsx(Qs,{className:"w-4 h-4"})}),f.jsx(ai,{label:"Status",value:m.status,onChange:C=>_({...m,status:C.target.value}),options:x}),S&&f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsx(Et,{label:"Jam Masuk",type:"time",value:m.checkInTime,onChange:C=>_({...m,checkInTime:C.target.value}),leftIcon:f.jsx(Pn,{className:"w-4 h-4"})}),f.jsx(Et,{label:"Jam Pulang",type:"time",value:m.checkOutTime,onChange:C=>_({...m,checkOutTime:C.target.value}),leftIcon:f.jsx(Pn,{className:"w-4 h-4"})})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",children:"Keterangan"}),f.jsx("textarea",{value:m.notes,onChange:C=>_({...m,notes:C.target.value}),placeholder:"Contoh: Lupa absen karena buru-buru",rows:3,className:"w-full px-4 py-2.5 rounded-xl border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),f.jsx("div",{className:"pt-4 border-t border-slate-200 dark:border-slate-700",children:f.jsx(Ke,{type:"submit",fullWidth:!0,size:"lg",isLoading:r,leftIcon:f.jsx(ac,{className:"w-5 h-5"}),children:"Simpan Data Absensi"})})]})}),f.jsx(Ee,{className:"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800",children:f.jsxs("div",{className:"flex gap-3",children:[f.jsx(Cd,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5"}),f.jsxs("div",{className:"text-sm text-blue-700 dark:text-blue-300",children:[f.jsx("p",{className:"font-medium mb-1",children:"Catatan:"}),f.jsxs("ul",{className:"list-disc list-inside space-y-1 text-blue-600 dark:text-blue-400",children:[f.jsx("li",{children:'Data yang diinput akan ditandai sebagai "Input Manual"'}),f.jsx("li",{children:"Pastikan tanggal dan waktu sudah benar sebelum menyimpan"}),f.jsx("li",{children:"Data yang sudah tersimpan tidak bisa diubah"})]})]})]})})]})},H3=async(t,e,n=null)=>{try{let r=null,i=null;if(n){const d=`${Date.now()}_${n.name}`,m=KI(ZI,`announcements/${d}`);await $D(m,n),r=await qD(m),i=n.name}const o={title:e.title,content:e.content,attachmentURL:r,attachmentName:i,createdBy:t,createdAt:Ce.now(),isActive:!0};return{id:(await MO(io(Mt,"announcements"),o)).id,...o}}catch(r){throw console.error("Error creating announcement:",r),new Error("Gagal membuat pengumuman")}},M1=(t,e=null)=>{const n=io(Mt,"announcements"),r=Gs(n,Wr("isActive","==",!0),Oa("createdAt","desc"));let i=!0;return Af(r,o=>{const a=o.docs.map(c=>({id:c.id,...c.data()}));!i&&e&&o.docChanges().forEach(c=>{c.type==="added"&&e(c.doc.data())}),i=!1,t(a)})},$3=async t=>{try{const e=Hn(Mt,"announcements",t),n=await so(e);if(!n.exists())throw new Error("Pengumuman tidak ditemukan");const r=n.data();if(r.attachmentURL)try{const i=r.attachmentURL.split("/"),o=i[i.length-1].split("?")[0],a=decodeURIComponent(o),c=KI(ZI,a);await KD(c)}catch(i){console.warn("Error deleting attachment:",i)}return await bf(e,{isActive:!1,deletedAt:Ce.now()}),!0}catch(e){throw console.error("Error deleting announcement:",e),new Error("Gagal menghapus pengumuman")}},q3=()=>{const{user:t}=br(),[e,n]=O.useState([]),[r,i]=O.useState(!0),[o,a]=O.useState(!1),[c,d]=O.useState(!1),[m,_]=O.useState(""),[v,x]=O.useState(""),[S,C]=O.useState(""),[R,F]=O.useState(""),[b,T]=O.useState(null);O.useEffect(()=>{const $=M1(A=>{n(A),i(!1)});return()=>$()},[]);const P=$=>{var k;const A=(k=$.target.files)==null?void 0:k[0];A&&A.size<=5*1024*1024?T(A):_("Ukuran file maksimal 5MB")},z=async $=>{if($.preventDefault(),!S||!R){_("Judul dan isi wajib diisi");return}try{d(!0),await H3(t.uid,{title:S,content:R},b),x("Pengumuman berhasil diposting!"),a(!1),C(""),F(""),T(null),setTimeout(()=>x(""),5e3)}catch(A){_(A.message)}finally{d(!1)}},K=async $=>{if(confirm("Yakin ingin menghapus?"))try{await $3($),x("Pengumuman dihapus")}catch(A){_(A.message)}};return r?f.jsx(oo,{size:"lg",text:"Memuat...",fullScreen:!0}):f.jsxs("div",{className:"space-y-6",children:[m&&f.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 rounded-xl text-red-700",children:m}),v&&f.jsx("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 rounded-xl text-green-700",children:v}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Pengumuman"}),f.jsx(Ke,{onClick:()=>a(!0),leftIcon:f.jsx(Wj,{className:"w-4 h-4"}),children:"Buat Pengumuman"})]}),e.length===0?f.jsx(Ee,{className:"text-center py-12",children:f.jsx("p",{className:"text-slate-500",children:"Belum ada pengumuman"})}):f.jsx("div",{className:"space-y-4",children:e.map($=>{var A;return f.jsx(Ee,{children:f.jsxs("div",{className:"flex justify-between",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white",children:$.title}),f.jsx("p",{className:"text-sm text-slate-500 mt-1",children:(A=$.createdAt)!=null&&A.toDate?Mf($.createdAt.toDate()):"Baru"}),f.jsx("p",{className:"mt-3 text-slate-600 dark:text-slate-300 whitespace-pre-wrap",children:$.content}),$.attachmentURL&&f.jsxs("a",{href:$.attachmentURL,target:"_blank",className:"mt-3 inline-flex items-center gap-2 px-3 py-2 bg-slate-100 rounded-lg text-sm",children:[f.jsx(ac,{className:"w-4 h-4"}),$.attachmentName||"Lampiran"]})]}),f.jsx(Ke,{variant:"ghost",onClick:()=>K($.id),className:"text-red-500",children:f.jsx(Kj,{className:"w-5 h-5"})})]})},$.id)})}),f.jsx(Uu,{isOpen:o,onClose:()=>a(!1),title:"Buat Pengumuman",size:"md",children:f.jsxs("form",{onSubmit:z,className:"space-y-4",children:[f.jsx(Et,{label:"Judul",value:S,onChange:$=>C($.target.value),required:!0}),f.jsx("textarea",{value:R,onChange:$=>F($.target.value),rows:4,className:"w-full input",placeholder:"Isi pengumuman...",required:!0}),f.jsx("input",{type:"file",onChange:P,accept:".pdf,.jpg,.png,.doc"}),f.jsxs("div",{className:"flex gap-3",children:[f.jsx(Ke,{type:"button",variant:"secondary",onClick:()=>a(!1),className:"flex-1",children:"Batal"}),f.jsx(Ke,{type:"submit",isLoading:c,className:"flex-1",children:"Posting"})]})]})})]})},K3=()=>{const[t,e]=O.useState([]),[n,r]=O.useState([]),[i,o]=O.useState(!0),[a,c]=O.useState(new Date().getMonth()),[d,m]=O.useState(new Date().getFullYear());O.useEffect(()=>{(async()=>{o(!0);try{const C=(await R1()).filter(P=>P.role==="employee"&&P.isActive!==!1);e(C);const R=new Date(d,a,15),{startDate:F,endDate:b}=Of(R),T=await Promise.all(C.map(async P=>{const z=await xy(F,b,P.id),K=Ey(z),$=Math.min(K.totalSick,Mm.MAX_PAID_SICK_DAYS),A=Math.max(K.totalSick-Mm.MAX_PAID_SICK_DAYS,0),k=K.totalLeave+A,N=K.totalAbsent===0&&k<=Mm.MAX_UNPAID_DEDUCTIONS;return{...P,summary:K,paidSick:$,unpaidSick:A,totalDeductions:k,isEligible:N}}));r(T)}catch(S){console.error(S)}finally{o(!1)}})()},[a,d]);const _=["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"].map((x,S)=>({value:S,label:x})),v=[2024,2025,2026].map(x=>({value:x,label:x.toString()}));return i?f.jsx(oo,{size:"lg",text:"Generating report...",fullScreen:!0}):f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[f.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Laporan Gaji"}),f.jsxs("div",{className:"flex gap-3",children:[f.jsx(ai,{value:a,onChange:x=>c(Number(x.target.value)),options:_}),f.jsx(ai,{value:d,onChange:x=>m(Number(x.target.value)),options:v})]})]}),f.jsx(Ee,{className:"bg-gradient-to-r from-primary-600 to-primary-800 text-white",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-primary-200",children:"Periode Cutoff"}),f.jsx("p",{className:"text-2xl font-bold",children:w1(new Date(d,a,15))})]}),f.jsx(Qs,{className:"w-10 h-10 text-primary-200"})]})}),f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"w-full bg-white dark:bg-slate-800 rounded-xl overflow-hidden",children:[f.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Nama"}),f.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 uppercase",children:"Hari Kerja"}),f.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 uppercase",children:"Sakit (Paid)"}),f.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 uppercase",children:"Izin"}),f.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 uppercase",children:"Defisit"}),f.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 uppercase",children:"Allowance"})]})}),f.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:n.map(x=>f.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[f.jsx("td",{className:"px-4 py-3 font-medium text-slate-900 dark:text-white",children:x.name}),f.jsx("td",{className:"px-4 py-3 text-center",children:x.summary.totalWorkDays}),f.jsx("td",{className:"px-4 py-3 text-center",children:x.paidSick}),f.jsx("td",{className:"px-4 py-3 text-center",children:x.summary.totalLeave+x.unpaidSick}),f.jsx("td",{className:"px-4 py-3 text-center text-red-600",children:vn(x.summary.totalDeficitMinutes)}),f.jsx("td",{className:"px-4 py-3 text-center",children:x.isEligible?f.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-green-100 text-green-700 rounded-full text-xs",children:[f.jsx(oc,{className:"w-3 h-3"})," Eligible"]}):f.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-red-100 text-red-700 rounded-full text-xs",children:[f.jsx(Lj,{className:"w-3 h-3"})," Not Eligible"]})})]},x.id))})]})})]})},G3=(t,e,n,r)=>{const o=t*Math.PI/180,a=n*Math.PI/180,c=(n-t)*Math.PI/180,d=(r-e)*Math.PI/180,m=Math.sin(c/2)*Math.sin(c/2)+Math.cos(o)*Math.cos(a)*Math.sin(d/2)*Math.sin(d/2);return 6371e3*(2*Math.atan2(Math.sqrt(m),Math.sqrt(1-m)))},fg=(t,e)=>G3(t,e,Nt.lat,Nt.lng),Hw=(t,e)=>fg(t,e)<=Nt.radius,Z3=t=>t<1e3?`${Math.round(t)} m`:`${(t/1e3).toFixed(2)} km`,Q3=()=>new Promise((t,e)=>{if(!navigator.geolocation){e(new Error("Geolocation tidak didukung oleh browser ini"));return}navigator.geolocation.getCurrentPosition(n=>{t({lat:n.coords.latitude,lng:n.coords.longitude,accuracy:n.coords.accuracy})},n=>{let r="Gagal mendapatkan lokasi";switch(n.code){case n.PERMISSION_DENIED:r="Izin lokasi ditolak. Aktifkan GPS untuk melanjutkan.";break;case n.POSITION_UNAVAILABLE:r="Informasi lokasi tidak tersedia.";break;case n.TIMEOUT:r="Waktu permintaan lokasi habis.";break}e(new Error(r))},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})}),Y3=({center:t})=>{const e=b1();return O.useEffect(()=>{t&&e.setView([t.lat,t.lng],e.getZoom())},[t,e]),null},X3=({userLocation:t,isWithinRadius:e,distance:n,className:r="",height:i="300px"})=>{const[o,a]=O.useState(!1);O.useEffect(()=>{a(!0)},[]);const c=t||{lat:Nt.lat,lng:Nt.lng};return o?f.jsxs("div",{className:`rounded-xl overflow-hidden shadow-lg relative ${r}`,style:{height:i},children:[n!==null&&f.jsx("div",{className:"absolute top-3 right-3 z-[1000] px-3 py-1.5 bg-white/90 dark:bg-slate-800/90 backdrop-blur-sm rounded-lg shadow-lg",children:f.jsxs("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:["Jarak: ",f.jsx("span",{className:e?"text-green-600":"text-red-600",children:Z3(n)})]})}),f.jsxs(C1,{center:[c.lat,c.lng],zoom:18,style:{height:"100%",width:"100%"},scrollWheelZoom:!0,zoomControl:!0,children:[f.jsx(Y3,{center:t}),f.jsx(N1,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),f.jsx(A1,{center:[Nt.lat,Nt.lng],radius:Nt.radius,pathOptions:{color:e?"#22c55e":"#ef4444",fillColor:e?"#22c55e":"#ef4444",fillOpacity:.1,weight:2}}),f.jsx(Od,{center:[Nt.lat,Nt.lng],radius:8,pathOptions:{color:"#4f46e5",fillColor:"#4f46e5",fillOpacity:1,weight:2},children:f.jsx(Dd,{children:f.jsxs("div",{className:"text-center py-1",children:[f.jsx("strong",{className:"text-primary-600",children:"Kantor NEX Media"}),f.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Radius: ",Nt.radius,"m"]})]})})}),t&&f.jsx(Od,{center:[t.lat,t.lng],radius:10,pathOptions:{color:e?"#22c55e":"#ef4444",fillColor:e?"#22c55e":"#ef4444",fillOpacity:.8,weight:3},children:f.jsx(Dd,{children:f.jsxs("div",{className:"text-center py-1",children:[f.jsx("strong",{children:"Lokasi Anda"}),f.jsx("p",{className:`text-xs mt-1 ${e?"text-green-600":"text-red-600"}`,children:e?" Dalam area kantor":" Di luar area kantor"})]})})})]})]}):f.jsx("div",{className:`bg-slate-100 dark:bg-slate-800 rounded-xl animate-pulse flex items-center justify-center ${r}`,style:{height:i},children:f.jsx("span",{className:"text-slate-400",children:"Memuat peta..."})})},J3=({checkInTime:t,targetMinutes:e=420})=>{var _;const[n,r]=O.useState(0);O.useEffect(()=>{if(!t)return;const v=()=>{const S=Md(t);r(S)};v();const x=setInterval(v,1e3);return()=>clearInterval(x)},[t]);const i=Math.floor(n/60),o=Math.floor(n%60),a=Math.floor((Date.now()-(((_=t==null?void 0:t.toDate)==null?void 0:_.call(t))||new Date(t)).getTime())/1e3)%60,c=Math.min(n/e*100,100),d=n>=e,m=v=>v.toString().padStart(2,"0");return f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"mb-4",children:f.jsxs("div",{className:"inline-flex items-center gap-2 px-6 py-3 bg-slate-100 dark:bg-slate-800 rounded-2xl",children:[f.jsx(Pn,{className:`w-6 h-6 ${d?"text-green-500":"text-primary-500"}`}),f.jsxs("span",{className:`text-4xl font-mono font-bold tracking-wider ${d?"text-green-600 dark:text-green-400":"text-slate-900 dark:text-white"}`,children:[m(i),":",m(o),":",m(a)]})]})}),f.jsxs("div",{className:"relative",children:[f.jsx("div",{className:"h-3 bg-slate-200 dark:bg-slate-700 rounded-full overflow-hidden",children:f.jsx("div",{className:`h-full transition-all duration-1000 ease-out rounded-full ${d?"bg-gradient-to-r from-green-500 to-emerald-500":"bg-gradient-to-r from-primary-500 to-primary-600"}`,style:{width:`${c}%`}})}),f.jsxs("div",{className:"flex justify-between mt-2 text-sm",children:[f.jsxs("span",{className:"text-slate-500 dark:text-slate-400",children:["Target: ",Math.floor(e/60)," jam"]}),f.jsxs("span",{className:`font-medium ${d?"text-green-600 dark:text-green-400":"text-primary-600 dark:text-primary-400"}`,children:[Math.round(c),"%"]})]})]}),d&&f.jsx("div",{className:"mt-4 p-3 bg-green-50 dark:bg-green-900/20 rounded-xl",children:f.jsx("p",{className:"text-green-700 dark:text-green-400 font-medium",children:" Target jam kerja tercapai!"})})]})},e5=({isOpen:t,onClose:e,actualMinutes:n,targetMinutes:r,onPKBattle:i,onEarlyLeave:o,isLoading:a=!1})=>{const c=r-n;return f.jsx(Uu,{isOpen:t,onClose:e,title:"Konfirmasi Pulang",size:"md",children:f.jsxs("div",{className:"text-center space-y-6",children:[f.jsx("div",{className:"mx-auto w-16 h-16 bg-amber-100 dark:bg-amber-900/30 rounded-full flex items-center justify-center",children:f.jsx(Pn,{className:"w-8 h-8 text-amber-600 dark:text-amber-400"})}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-2",children:"Jam Kerja Belum Tercapai"}),f.jsxs("p",{className:"text-slate-600 dark:text-slate-400",children:["Durasi kerja Anda baru ",f.jsx("span",{className:"font-semibold text-primary-600",children:vn(n)}),", masih kurang ",f.jsx("span",{className:"font-semibold text-red-600",children:vn(c)})," dari target."]})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-800 rounded-xl",children:[f.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Sudah Bekerja"}),f.jsx("p",{className:"text-xl font-bold text-slate-900 dark:text-white",children:vn(n)})]}),f.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-800 rounded-xl",children:[f.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Target"}),f.jsx("p",{className:"text-xl font-bold text-slate-900 dark:text-white",children:vn(r)})]})]}),f.jsx("div",{className:"border-t border-slate-200 dark:border-slate-700"}),f.jsxs("div",{className:"space-y-3",children:[f.jsx("p",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Pilih opsi pulang:"}),f.jsx(Ke,{onClick:i,fullWidth:!0,size:"lg",variant:"primary",isLoading:a,leftIcon:f.jsx(qj,{className:"w-5 h-5"}),children:f.jsxs("div",{className:"text-left",children:[f.jsx("p",{className:"font-semibold",children:"Lanjut PK Battle"}),f.jsx("p",{className:"text-xs text-primary-200",children:"Jam kerja dihitung penuh, tidak ada defisit"})]})}),f.jsx(Ke,{onClick:o,fullWidth:!0,size:"lg",variant:"secondary",isLoading:a,leftIcon:f.jsx(gy,{className:"w-5 h-5"}),children:f.jsxs("div",{className:"text-left",children:[f.jsx("p",{className:"font-semibold",children:"Pulang Cepat"}),f.jsxs("p",{className:"text-xs text-slate-500",children:["Defisit ",vn(c)," akan dicatat"]})]})})]}),f.jsx("button",{onClick:e,className:"text-sm text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200",children:"Batal, lanjut bekerja"})]})})},t5=(t={})=>{const{enableWatch:e=!1,onLocationChange:n}=t,[r,i]=O.useState(null),[o,a]=O.useState(null),[c,d]=O.useState(!1),[m,_]=O.useState(null),[v,x]=O.useState(!1),S=O.useCallback(async()=>{try{x(!0),_(null);const R=await Q3();i(R);const F=fg(R.lat,R.lng);a(F);const b=Hw(R.lat,R.lng);return d(b),n&&n(R,F,b),{position:R,distance:F,isWithinRadius:b}}catch(R){throw _(R.message),R}finally{x(!1)}},[n]);O.useEffect(()=>{S()},[]),O.useEffect(()=>{if(!e)return;let R=null;return navigator.geolocation&&(R=navigator.geolocation.watchPosition(F=>{const b={lat:F.coords.latitude,lng:F.coords.longitude,accuracy:F.coords.accuracy};i(b);const T=fg(b.lat,b.lng);a(T);const P=Hw(b.lat,b.lng);d(P),n&&n(b,T,P)},F=>{_(F.message)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:5e3})),()=>{R&&navigator.geolocation.clearWatch(R)}},[e,n]);const C=O.useCallback(()=>S(),[S]);return{location:r,distance:o,isWithinRadius:c,error:m,isLoading:v,refresh:C}},n5=()=>{const{userProfile:t}=br(),{location:e,distance:n,isWithinRadius:r,error:i,isLoading:o,refresh:a}=t5({enableWatch:!0}),[c,d]=O.useState(null),[m,_]=O.useState(!1),[v,x]=O.useState(null),[S,C]=O.useState(null),[R,F]=O.useState(!1),[b,T]=O.useState(!1),[P,z]=O.useState(!1),K=((t==null?void 0:t.workHoursTarget)||7)*60,$=vj.includes(t==null?void 0:t.position);O.useEffect(()=>{if(!(t!=null&&t.id))return;const me=V3(t.id,kt=>{d(kt)});return()=>me()},[t==null?void 0:t.id]),O.useEffect(()=>{if(S){const me=setTimeout(()=>C(null),5e3);return()=>clearTimeout(me)}},[S]),O.useEffect(()=>{if(v){const me=setTimeout(()=>x(null),5e3);return()=>clearTimeout(me)}},[v]);const A=async()=>{if(!e&&!P){x("Tidak dapat mendapatkan lokasi. Pastikan GPS aktif.");return}if(!P&&!r){x("Anda berada di luar area kantor. Tidak dapat absen masuk.");return}try{_(!0),x(null),await R3(t.id,e,P),C("Berhasil absen masuk! Selamat bekerja.")}catch(me){x(me.message)}finally{_(!1)}},k=async()=>{if(!(c!=null&&c.checkIn)){x("Anda belum absen masuk");return}const me=Md(c.checkIn);if($&&me<K){F(!0);return}await N(!1)},N=async(me=!1)=>{try{_(!0),x(null),F(!1),await L3(t.id,e,K,me),C(me?"PK Battle tercatat! Jam kerja dihitung penuh.":"Berhasil absen pulang! Sampai jumpa besok.")}catch(kt){x(kt.message)}finally{_(!1)}},j=async me=>{try{_(!0),x(null),me==="holiday"?(await M3(t.id),C("Hari ini ditandai sebagai hari libur.")):me==="sick"?(await O3(t.id),C("Izin sakit berhasil dicatat. Semoga lekas sembuh!")):me==="leave"&&(await D3(t.id),C("Izin berhasil dicatat.")),T(!1)}catch(kt){x(kt.message)}finally{_(!1)}},U=(c==null?void 0:c.checkIn)&&!(c!=null&&c.checkOut)&&(c==null?void 0:c.status)===xe.WORKING,M=(c==null?void 0:c.checkOut)||[xe.COMPLETED,xe.PK_BATTLE,xe.EARLY_LEAVE].includes(c==null?void 0:c.status),D=[xe.HOLIDAY,xe.SICK,xe.LEAVE].includes(c==null?void 0:c.status);return f.jsxs("div",{className:"space-y-6",children:[v&&f.jsxs("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl flex items-start gap-3 animate-fade-in",children:[f.jsx(Cd,{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5"}),f.jsx("p",{className:"text-sm text-red-700 dark:text-red-400",children:v})]}),S&&f.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-xl flex items-start gap-3 animate-fade-in",children:[f.jsx(oc,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),f.jsx("p",{className:"text-sm text-green-700 dark:text-green-400",children:S})]}),f.jsxs(Ee,{padding:"none",className:"overflow-hidden",children:[f.jsxs("div",{className:"p-4 border-b border-slate-200 dark:border-slate-700",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(s1,{className:"w-5 h-5 text-primary-600"}),f.jsx("h2",{className:"font-semibold text-slate-900 dark:text-white",children:"Lokasi Anda"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsxs("label",{className:"flex items-center gap-2 text-sm cursor-pointer",children:[f.jsx("input",{type:"checkbox",checked:P,onChange:me=>z(me.target.checked),className:"w-4 h-4 rounded border-slate-300 text-primary-600 focus:ring-primary-500",disabled:U||M}),f.jsx(jj,{className:"w-4 h-4"}),f.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"WFH"})]}),f.jsx(Ke,{variant:"ghost",size:"icon",onClick:a,disabled:o,children:f.jsx(Hj,{className:`w-4 h-4 ${o?"animate-spin":""}`})})]})]}),i&&f.jsx("p",{className:"mt-2 text-sm text-red-500",children:i})]}),f.jsx(X3,{userLocation:e,isWithinRadius:P||r,distance:n,height:"250px"}),f.jsx("div",{className:`p-3 text-center text-sm font-medium ${P?"bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-400":r?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-400":"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-400"}`,children:P?" Mode Work From Home aktif":r?" Anda berada dalam area kantor":" Anda berada di luar area kantor"})]}),c&&f.jsxs(Ee,{children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white",children:"Status Hari Ini"}),f.jsx(_y,{status:c.status,size:"lg"})]}),U&&f.jsx(J3,{checkInTime:c.checkIn,targetMinutes:K}),c.checkIn&&f.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-4",children:[f.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-800 rounded-xl",children:[f.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Jam Masuk"}),f.jsx("p",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:vr(c.checkIn)})]}),c.checkOut&&f.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-800 rounded-xl",children:[f.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Jam Pulang"}),f.jsx("p",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:vr(c.checkOut)})]})]})]}),f.jsx(Ee,{children:f.jsxs("div",{className:"space-y-3",children:[!c&&!D&&f.jsxs(f.Fragment,{children:[f.jsx(Ke,{onClick:A,fullWidth:!0,size:"lg",isLoading:m,disabled:!P&&!r,leftIcon:f.jsx(Uj,{className:"w-5 h-5"}),children:"Absen Masuk"}),f.jsx(Ke,{onClick:()=>T(!0),fullWidth:!0,size:"lg",variant:"secondary",leftIcon:f.jsx(Qs,{className:"w-5 h-5"}),children:"Izin / Sakit / Libur"})]}),U&&f.jsx(Ke,{onClick:k,fullWidth:!0,size:"lg",variant:"danger",isLoading:m,leftIcon:f.jsx(gy,{className:"w-5 h-5"}),children:"Absen Pulang"}),(M||D)&&f.jsxs("div",{className:"text-center py-4",children:[f.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:D?"Anda sedang izin/libur hari ini":"Anda sudah menyelesaikan absensi hari ini"}),f.jsx("p",{className:"text-sm text-slate-400 dark:text-slate-500 mt-1",children:"Sampai jumpa besok! "})]})]})}),R&&c&&f.jsx(e5,{isOpen:R,onClose:()=>F(!1),actualMinutes:Md(c.checkIn),targetMinutes:K,onPKBattle:()=>N(!0),onEarlyLeave:()=>N(!1),isLoading:m}),f.jsx(Uu,{isOpen:b,onClose:()=>T(!1),title:"Pilih Jenis Izin",size:"sm",children:f.jsxs("div",{className:"space-y-3",children:[f.jsx(Ke,{onClick:()=>j("holiday"),fullWidth:!0,variant:"secondary",isLoading:m,leftIcon:f.jsx(Qs,{className:"w-5 h-5 text-purple-500"}),children:"Hari Libur / Off"}),f.jsx(Ke,{onClick:()=>j("sick"),fullWidth:!0,variant:"secondary",isLoading:m,leftIcon:f.jsx(my,{className:"w-5 h-5 text-orange-500"}),children:"Sakit"}),f.jsx(Ke,{onClick:()=>j("leave"),fullWidth:!0,variant:"secondary",isLoading:m,leftIcon:f.jsx(ac,{className:"w-5 h-5 text-cyan-500"}),children:"Izin Lainnya"})]})})]})},r5=()=>{const{userProfile:t}=br(),[e,n]=O.useState([]),[r,i]=O.useState(null),[o,a]=O.useState(!0),[c,d]=O.useState(""),[m,_]=O.useState("");return O.useEffect(()=>{const{startDate:v,endDate:x}=Of();d(v.toISOString().split("T")[0]),_(x.toISOString().split("T")[0])},[]),O.useEffect(()=>{(async()=>{if(!(!c||!m||!(t!=null&&t.id))){a(!0);try{const x=await xy(new Date(c),new Date(m),t.id);n(x),i(Ey(x))}catch(x){console.error(x)}finally{a(!1)}}})()},[c,m,t==null?void 0:t.id]),f.jsxs("div",{className:"space-y-6",children:[f.jsxs(Ee,{children:[f.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[f.jsx(r1,{className:"w-5 h-5 text-primary-600"}),f.jsx("h2",{className:"font-semibold text-slate-900 dark:text-white",children:"Filter Tanggal"})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsx(Et,{label:"Dari",type:"date",value:c,onChange:v=>d(v.target.value)}),f.jsx(Et,{label:"Sampai",type:"date",value:m,onChange:v=>_(v.target.value)})]})]}),r&&f.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[f.jsxs(Ee,{className:"text-center",children:[f.jsx("p",{className:"text-2xl font-bold text-green-600",children:r.totalWorkDays}),f.jsx("p",{className:"text-sm text-slate-500",children:"Hari Kerja"})]}),f.jsxs(Ee,{className:"text-center",children:[f.jsx("p",{className:"text-2xl font-bold text-purple-600",children:r.totalHolidays}),f.jsx("p",{className:"text-sm text-slate-500",children:"Libur"})]}),f.jsxs(Ee,{className:"text-center",children:[f.jsx("p",{className:"text-2xl font-bold text-orange-600",children:r.totalSick+r.totalLeave}),f.jsx("p",{className:"text-sm text-slate-500",children:"Izin/Sakit"})]}),f.jsxs(Ee,{className:"text-center",children:[f.jsx("p",{className:"text-2xl font-bold text-red-600",children:vn(r.totalDeficitMinutes)}),f.jsx("p",{className:"text-sm text-slate-500",children:"Total Defisit"})]})]}),f.jsxs(Ee,{padding:"none",children:[f.jsx("div",{className:"p-4 border-b border-slate-200 dark:border-slate-700",children:f.jsx("h2",{className:"font-semibold text-slate-900 dark:text-white",children:"Riwayat Absensi"})}),o?f.jsx(oo,{className:"py-12"}):f.jsx("div",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:e.length===0?f.jsx("p",{className:"text-center py-12 text-slate-500",children:"Tidak ada data"}):e.map(v=>f.jsxs("div",{className:"p-4 flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:Mf(v.date)}),f.jsxs("div",{className:"flex items-center gap-4 text-sm text-slate-500 mt-1",children:[v.checkIn&&f.jsxs("span",{children:[f.jsx(Pn,{className:"w-3 h-3 inline mr-1"}),vr(v.checkIn)," - ",v.checkOut?vr(v.checkOut):"Belum pulang"]}),v.durationMinutes>0&&f.jsx("span",{children:vn(v.durationMinutes)})]})]}),f.jsx(_y,{status:v.status})]},v.id))})]})]})},i5=()=>{const[t,e]=O.useState([]),[n,r]=O.useState(!0),[i,o]=O.useState(!1),a=O.useRef(null);return O.useEffect(()=>{const c=()=>o(!0);return document.addEventListener("click",c,{once:!0}),()=>document.removeEventListener("click",c)},[]),O.useEffect(()=>{const c=()=>{i&&a.current&&a.current.play().catch(console.error)},d=M1(m=>{e(m),r(!1)},()=>c());return()=>d()},[i]),n?f.jsx(oo,{size:"lg",text:"Memuat pengumuman...",fullScreen:!0}):f.jsxs("div",{className:"space-y-6",children:[f.jsx("audio",{ref:a,src:"/notification.mp3",preload:"auto"}),f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(Ad,{className:"w-6 h-6 text-primary-600"}),f.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Pengumuman"})]}),!i&&f.jsx(Ee,{className:"bg-blue-50 dark:bg-blue-900/20 border-blue-200",children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(Yj,{className:"w-5 h-5 text-blue-600"}),f.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:"Klik di mana saja untuk mengaktifkan notifikasi suara"})]})}),t.length===0?f.jsxs(Ee,{className:"text-center py-12",children:[f.jsx(ac,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),f.jsx("p",{className:"text-slate-500",children:"Belum ada pengumuman"})]}):f.jsx("div",{className:"space-y-4",children:t.map(c=>{var d;return f.jsxs(Ee,{hover:!0,children:[f.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:c.title}),f.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500 mt-1",children:[f.jsx(Pn,{className:"w-4 h-4"}),(d=c.createdAt)!=null&&d.toDate?Mf(c.createdAt.toDate()):"Baru"]}),f.jsx("p",{className:"mt-3 text-slate-600 dark:text-slate-300 whitespace-pre-wrap",children:c.content}),c.attachmentURL&&f.jsxs("a",{href:c.attachmentURL,target:"_blank",rel:"noopener noreferrer",className:"mt-4 inline-flex items-center gap-2 px-4 py-2 bg-primary-50 dark:bg-primary-900/20 text-primary-700 dark:text-primary-400 rounded-lg hover:bg-primary-100 transition-colors",children:[f.jsx(n1,{className:"w-4 h-4"}),c.attachmentName||"Download Lampiran"]})]},c.id)})})]})},s5=()=>{const{changePassword:t}=br(),[e,n]=O.useState(""),[r,i]=O.useState(""),[o,a]=O.useState(""),[c,d]=O.useState(!1),[m,_]=O.useState(""),[v,x]=O.useState(""),S=async C=>{if(C.preventDefault(),_(""),x(""),!e||!r||!o){_("Semua field wajib diisi");return}if(r.length<6){_("Password baru minimal 6 karakter");return}if(r!==o){_("Konfirmasi password tidak cocok");return}try{d(!0),await t(e,r),x("Password berhasil diubah!"),n(""),i(""),a("")}catch(R){_(R.message)}finally{d(!1)}};return f.jsxs("div",{className:"max-w-md mx-auto space-y-6",children:[f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"w-16 h-16 bg-primary-100 dark:bg-primary-900/30 rounded-full flex items-center justify-center mx-auto mb-4",children:f.jsx(py,{className:"w-8 h-8 text-primary-600"})}),f.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Ubah Password"}),f.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Amankan akun Anda dengan password baru"})]}),f.jsx(Ee,{children:f.jsxs("form",{onSubmit:S,className:"space-y-4",children:[m&&f.jsxs("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 rounded-lg flex items-center gap-2 text-sm text-red-700",children:[f.jsx(Cd,{className:"w-4 h-4"}),m]}),v&&f.jsxs("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 border border-green-200 rounded-lg flex items-center gap-2 text-sm text-green-700",children:[f.jsx(oc,{className:"w-4 h-4"}),v]}),f.jsx(Et,{label:"Password Lama",type:"password",value:e,onChange:C=>n(C.target.value),leftIcon:f.jsx(jh,{className:"w-4 h-4"}),placeholder:"Masukkan password lama"}),f.jsx(Et,{label:"Password Baru",type:"password",value:r,onChange:C=>i(C.target.value),leftIcon:f.jsx(jh,{className:"w-4 h-4"}),placeholder:"Minimal 6 karakter"}),f.jsx(Et,{label:"Konfirmasi Password Baru",type:"password",value:o,onChange:C=>a(C.target.value),leftIcon:f.jsx(jh,{className:"w-4 h-4"}),placeholder:"Ulangi password baru"}),f.jsx(Ke,{type:"submit",fullWidth:!0,size:"lg",isLoading:c,children:"Simpan Password Baru"})]})})]})},$w=({children:t,requiredRole:e})=>{const{user:n,userProfile:r,loading:i}=br();return i?f.jsx(oo,{size:"lg",text:"Memuat...",fullScreen:!0}):n?e&&(r==null?void 0:r.role)!==e?f.jsx(Ls,{to:(r==null?void 0:r.role)==="admin"?"/admin/dashboard":"/employee/attendance",replace:!0}):t:f.jsx(Ls,{to:"/login",replace:!0})},o5=({children:t})=>{const{user:e,userProfile:n,loading:r}=br();return r?f.jsx(oo,{size:"lg",text:"Memuat...",fullScreen:!0}):e&&n?f.jsx(Ls,{to:n.role==="admin"?"/admin/dashboard":"/employee/attendance",replace:!0}):t};function a5(){return f.jsxs(bA,{children:[f.jsx(bt,{path:"/login",element:f.jsx(o5,{children:f.jsx(o4,{})})}),f.jsxs(bt,{path:"/admin",element:f.jsx($w,{requiredRole:"admin",children:f.jsx(t4,{})}),children:[f.jsx(bt,{index:!0,element:f.jsx(Ls,{to:"/admin/dashboard",replace:!0})}),f.jsx(bt,{path:"dashboard",element:f.jsx(U3,{})}),f.jsx(bt,{path:"recap",element:f.jsx(z3,{})}),f.jsx(bt,{path:"users",element:f.jsx(B3,{})}),f.jsx(bt,{path:"manual-attendance",element:f.jsx(W3,{})}),f.jsx(bt,{path:"announcements",element:f.jsx(q3,{})}),f.jsx(bt,{path:"reports",element:f.jsx(K3,{})})]}),f.jsxs(bt,{path:"/employee",element:f.jsx($w,{requiredRole:"employee",children:f.jsx(r4,{})}),children:[f.jsx(bt,{index:!0,element:f.jsx(Ls,{to:"/employee/attendance",replace:!0})}),f.jsx(bt,{path:"attendance",element:f.jsx(n5,{})}),f.jsx(bt,{path:"history",element:f.jsx(r5,{})}),f.jsx(bt,{path:"announcements",element:f.jsx(i5,{})}),f.jsx(bt,{path:"change-password",element:f.jsx(s5,{})})]}),f.jsx(bt,{path:"/",element:f.jsx(Ls,{to:"/login",replace:!0})}),f.jsx(bt,{path:"*",element:f.jsx(Ls,{to:"/login",replace:!0})})]})}function l5(){return f.jsx(DA,{children:f.jsx(Ej,{children:f.jsx(wj,{children:f.jsx(a5,{})})})})}sT(document.getElementById("root")).render(f.jsx(O.StrictMode,{children:f.jsx(l5,{})}));
